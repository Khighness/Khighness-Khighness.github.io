<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Docker | Khighness</title><meta name="keywords" content="Docker"><meta name="author" content="Khighness"><meta name="copyright" content="Khighness"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ğŸ“–æ¦‚è¿°   æ•…äº‹  2010å¹´ï¼Œå‡ ä¸ªæ IT çš„å¹´è½»äººï¼Œåœ¨ç¾å›½æ—§é‡‘å±±æˆç«‹äº†ä¸€å®¶åå« dotCloud çš„å…¬å¸ã€‚dotCloud çš„å¹³å°å³æœåŠ¡ï¼ˆPlatform-as-a-Serviceï¼‰æä¾›å•†ã€‚åº•å±‚æŠ€æœ¯ä¸Šï¼ŒdotCloud å¹³å°åˆ©ç”¨äº†Linuxçš„ LXC å®¹å™¨æŠ€æœ¯ã€‚ä¸ºäº†æ–¹ä¾¿åˆ›å»ºå’Œç®¡ç†è¿™äº›å®¹å™¨ï¼ŒdotCloud åŸºäº Google å…¬å¸æ¨å‡ºçš„ Go è¯­è¨€å¼€å‘äº†ä¸€å¥—å†…éƒ¨å·¥å…·ï¼Œä¹‹åè¢«å‘½åä¸º Docke">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker">
<meta property="og:url" content="https://www.parak.top/posts/f5f9fa9b/index.html">
<meta property="og:site_name" content="Khighness">
<meta property="og:description" content="ğŸ“–æ¦‚è¿°   æ•…äº‹  2010å¹´ï¼Œå‡ ä¸ªæ IT çš„å¹´è½»äººï¼Œåœ¨ç¾å›½æ—§é‡‘å±±æˆç«‹äº†ä¸€å®¶åå« dotCloud çš„å…¬å¸ã€‚dotCloud çš„å¹³å°å³æœåŠ¡ï¼ˆPlatform-as-a-Serviceï¼‰æä¾›å•†ã€‚åº•å±‚æŠ€æœ¯ä¸Šï¼ŒdotCloud å¹³å°åˆ©ç”¨äº†Linuxçš„ LXC å®¹å™¨æŠ€æœ¯ã€‚ä¸ºäº†æ–¹ä¾¿åˆ›å»ºå’Œç®¡ç†è¿™äº›å®¹å™¨ï¼ŒdotCloud åŸºäº Google å…¬å¸æ¨å‡ºçš„ Go è¯­è¨€å¼€å‘äº†ä¸€å¥—å†…éƒ¨å·¥å…·ï¼Œä¹‹åè¢«å‘½åä¸º Docke">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Khighness/cdn/top/bg-14.jpg">
<meta property="article:published_time" content="2020-12-01T16:00:00.000Z">
<meta property="article:modified_time" content="2021-05-24T04:31:04.854Z">
<meta property="article:author" content="Khighness">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Khighness/cdn/top/bg-14.jpg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Khighness/cdn/avatar/K.jpg"><link rel="canonical" href="https://www.parak.top/posts/f5f9fa9b/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//s4.cnzz.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="yandex-verification" content="{&quot;theme_color&quot;:{&quot;enable&quot;:true,&quot;main&quot;:&quot;#49B1F5&quot;,&quot;paginator&quot;:&quot;#00c4b6&quot;,&quot;button_hover&quot;:&quot;#FF7242&quot;,&quot;text_selection&quot;:&quot;#00c4b6&quot;,&quot;link_color&quot;:&quot;#99a9bf&quot;,&quot;meta_color&quot;:&quot;#858585&quot;,&quot;hr_color&quot;:&quot;#A4D8FA&quot;,&quot;code_foreground&quot;:&quot;#F47466&quot;,&quot;code_background&quot;:&quot;rgba(27, 31, 35, .05)&quot;,&quot;toc_color&quot;:&quot;#00c4b6&quot;,&quot;blockquote_padding_color&quot;:&quot;#49b1f5&quot;,&quot;blockquote_background_color&quot;:&quot;#49b1f5&quot;}}"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?16576652";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" data-pjax="data-pjax" src="https://s4.cnzz.com/z_stat.php?id=1279324689&amp;web_id=1279324689"></script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  noticeOutdate: undefined,
  highlight: undefined,
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":50,"languages":{"author":"ä½œè€…: Khighness","link":"é“¾æ¥: ","source":"æ¥æº: Khighness","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-05-24 12:31:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="/css/iconfont/iconfont.css"><link rel="stylesheet" href="/css/mouse.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Khighness" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/Khighness/cdn/avatar/Khighness.jpg" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/Khighness/cdn/common/404.jpg'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">51</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">26</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">19</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-index"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw iconfont icon-tianchongxing-1"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw iconfont icon-tianchongxing-"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw iconfont icon-fenlei"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-ziyuan"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-K"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/Khighness/cdn/top/bg-14.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Khighness</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-index"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw iconfont icon-tianchongxing-1"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw iconfont icon-tianchongxing-"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw iconfont icon-fenlei"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-ziyuan"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-K"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Docker</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2020-12-01T16:00:00.000Z" title="å‘è¡¨äº 2020-12-02 00:00:00">2020-12-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2021-05-24T04:31:04.854Z" title="æ›´æ–°äº 2021-05-24 12:31:04">2021-05-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/DevOps/">DevOps</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">9.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>48åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Docker"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="ğŸ“–æ¦‚è¿°"><a href="#ğŸ“–æ¦‚è¿°" class="headerlink" title="ğŸ“–æ¦‚è¿°"></a>ğŸ“–æ¦‚è¿°</h2>

<blockquote>
<p>æ•…äº‹</p>
</blockquote>
<p>2010å¹´ï¼Œå‡ ä¸ªæ IT çš„å¹´è½»äººï¼Œåœ¨ç¾å›½æ—§é‡‘å±±æˆç«‹äº†ä¸€å®¶åå« <code>dotCloud </code>çš„å…¬å¸ã€‚<code>dotCloud </code>çš„å¹³å°å³æœåŠ¡ï¼ˆPlatform-as-a-Serviceï¼‰æä¾›å•†ã€‚åº•å±‚æŠ€æœ¯ä¸Šï¼Œ<code>dotCloud</code> å¹³å°åˆ©ç”¨äº†<code>Linux</code>çš„ <code>LXC </code>å®¹å™¨æŠ€æœ¯ã€‚ä¸ºäº†æ–¹ä¾¿åˆ›å»ºå’Œç®¡ç†è¿™äº›å®¹å™¨ï¼Œ<code>dotCloud </code>åŸºäº Google å…¬å¸æ¨å‡ºçš„ <code>Go </code>è¯­è¨€å¼€å‘äº†ä¸€å¥—å†…éƒ¨å·¥å…·ï¼Œä¹‹åè¢«å‘½åä¸º <code>Docker</code>ã€‚<code>Docker </code>å°±æ˜¯è¿™æ ·è¯ç”Ÿçš„ã€‚</p>
<p>2013å¹´çš„åç«¯æŠ€æœ¯é¢†åŸŸå·²ç»å¤ªä¹…æ²¡æœ‰å‡ºç°è®©äººæŒ¯å¥‹çš„ä¸œè¥¿äº†ã€‚å½“ç„¶<code>Docker</code>åœ¨å‘è¡Œä¹‹åä¹Ÿæ²¡ç”¨å¼•èµ·è¡Œä¸šçš„å…³æ³¨ã€‚åœ¨å¼€æºä¹‹åæ‰çˆ†ç«ã€‚</p>
<p><code>Docker</code>å®šä¹‰å®¹å™¨æŠ€æœ¯æ ‡ç –ä½¿å¾—å®¹å™¨æŠ€æœ¯çš„è½åœ°å˜å¾—ååˆ†ç®€å•ï¼Œåº”ç”¨å¯ä»¥ç¨³å®šä¾¿æºçš„è¿è¡Œåœ¨å®¹å™¨ä¸­ã€‚</p>
<a id="more"></a>



<blockquote>
<p>ç‰¹ç‚¹</p>
</blockquote>
<ul>
<li><strong>æ›´å¿«é€Ÿçš„åº”ç”¨äº¤ä»˜å’Œéƒ¨ç½²</strong></li>
<li><strong>æ›´ä¾¿æ·çš„å‡çº§å’Œæ‰©ç¼©å®¹</strong></li>
<li><strong>æ›´é«˜æ•ˆçš„è®¡ç®—èµ„æºåˆ©ç”¨</strong></li>
<li><strong>æ›´ç®€å•çš„ç³»ç»Ÿè¿ç»´</strong></li>
</ul>
<blockquote>
<p>æ¶æ„</p>
</blockquote>
<img src= "https://cdn.jsdelivr.net/gh/Khighness/cdn/common/loading.gif" data-lazy-src="/posts/f5f9fa9b/Docker%E6%9E%B6%E6%9E%84.jpg" class="" title="Docker">

<p><strong>é•œåƒï¼ˆimageï¼‰ï¼š</strong> ç›¸å½“äºä¸€ä¸ªæ¨¡æ¿ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ¨¡æ¿æ¥åˆ›å»ºå®¹å™¨æœåŠ¡</p>
<p><strong>å®¹å™¨ï¼ˆcontainerï¼‰ï¼š</strong> ç‹¬ç«‹è¿è¡Œä¸€ä¸ªæˆ–è€…ä¸€ä¸ªç»„åº”ç”¨</p>
<p><strong>ä»“åº“ï¼ˆrepositoryï¼‰ï¼š</strong> å­˜æ”¾é•œåƒçš„åœ°æ–¹</p>
<br>

<h2 id="ğŸ”¨å®‰è£…"><a href="#ğŸ”¨å®‰è£…" class="headerlink" title="ğŸ”¨å®‰è£…"></a>ğŸ”¨å®‰è£…</h2><blockquote>
<p>å®˜æ–¹æ–‡æ¡£</p>
</blockquote>
<p>CentOS 7å®‰è£…ï¼š<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/centos/">https://docs.docker.com/engine/install/centos/</a></p>
<blockquote>
<p>å¸è½½æ—§ç‰ˆæœ¬</p>
</blockquote>
<pre><code class="shell">$ sudo yum remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-engine</code></pre>
<blockquote>
<p>è®¾ç½®å­˜å‚¨åº“</p>
</blockquote>
<pre><code class="shell">$ sudo yum install -y yum-utils</code></pre>
<blockquote>
<p>æ›´æ¢é•œåƒæº</p>
</blockquote>
<pre><code class="shell">$ sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</code></pre>
<blockquote>
<p>æ›´æ–°YUMåŒ…</p>
<p>æ›´æ–°YUMç´¢å¼•</p>
</blockquote>
<pre><code class="shell">$ sudo yum update
$ sudo yum makecache fast</code></pre>
<blockquote>
<p>å®‰è£…dockerå¼•æ“å’Œå®¹å™¨</p>
</blockquote>
<pre><code class="shell">$ sudo yum install docker-ce docker-ce-cli containerd.io</code></pre>
<blockquote>
<p>å¯åŠ¨Dockerå¹¶æµ‹è¯•hello-world</p>
</blockquote>
<pre><code class="shell">$ sudo systemctl start docker
$ sudo docker run hello-world</code></pre>
<blockquote>
<p>å¸è½½æ–¹å¼</p>
</blockquote>
<pre><code class="shell">$ sudo yum remove docker-ce docker-ce-cli containerd.io
$ sudo rm -rf /var/lib/docker</code></pre>
<blockquote>
<p>é•œåƒåŠ é€Ÿ</p>
</blockquote>
<p>1ï¸âƒ£ä½¿ç”¨é˜¿é‡Œé•œåƒåŠ é€Ÿå™¨</p>
<img src= "https://cdn.jsdelivr.net/gh/Khighness/cdn/common/loading.gif" data-lazy-src="/posts/f5f9fa9b/image-20201206122604398.png" class="" title="image-20201206122604398">

<p>2ï¸âƒ£ä½¿ç”¨ä¸­ç§‘å¤§æˆ–è€…ç½‘æ˜“é•œåƒåŠ é€Ÿ</p>
<pre><code class="shell"># æ·»åŠ daemon.json
$ touch /etc/docker/daemon.json

# å†™å…¥å†…å®¹å¹¶ä¿å­˜
# ç§‘å¤§æº: https://docker.mirrors.ustc.edu.cn/
# ç½‘æ˜“æºï¼šhttp://hub-mirror.c.163.com
&#123;
  &quot;registry-mirrors&quot;: [&quot;https://docker.mirrors.ustc.edu.cn/&quot;]
&#125;

# é‡å¯Dicker
$ sudo systemctl restart docker</code></pre>
<br>

<h2 id="ğŸš€åŸç†"><a href="#ğŸš€åŸç†" class="headerlink" title="ğŸš€åŸç†"></a>ğŸš€åŸç†</h2><blockquote>
<p>docker runçš„æ‰§è¡Œæµç¨‹</p>
</blockquote>
<img src= "https://cdn.jsdelivr.net/gh/Khighness/cdn/common/loading.gif" data-lazy-src="/posts/f5f9fa9b/image-20201203233730702.png" class="" title="image-20201203233730702">

<blockquote>
<p>Dockerçš„å·¥ä½œ</p>
</blockquote>
<p>Dockeræ˜¯ä¸€ä¸ªClient-Serverç»“æ„çš„ç³»ç»Ÿï¼ŒDockerçš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šã€‚é€šè¿‡Socketä»å®¢æˆ·ç«¯è®¿é—®ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆDockeræ¯”VMå¿«ï¼Ÿ</strong></p>
<img src= "https://cdn.jsdelivr.net/gh/Khighness/cdn/common/loading.gif" data-lazy-src="/posts/f5f9fa9b/image-20201204003500802.png" class="" title="image-20201204003500802">

<p>1ã€Dockeræœ‰æ¯”è™šæ‹Ÿæœºæ›´å°‘çš„æŠ½è±¡å±‚ã€‚Dockerä¸éœ€è¦Hypervisorå®ç°ç¡¬ä»¶èµ„æºè™šæ‹ŸåŒ–ï¼Œè¿è¡Œåœ¨Dockerå®¹å™¨ä¸Šçš„ç¨‹åºç›´æ¥ä½¿ç”¨çš„æ˜¯å®é™…ç‰©ç†æœºçš„ç¡¬ä»¶èµ„æºï¼Œå› æ­¤åœ¨CPUã€å†…å­˜åˆ©ç”¨ç‡ä¸ŠDockerå°†ä¼šåœ¨æ•ˆç‡ä¸Šæœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ã€‚</p>
<p>2ã€Dockeråˆ©ç”¨çš„æ˜¯å®¿ä¸»æœºçš„å†…æ ¸ï¼Œè€Œä¸éœ€è¦Guest OSã€‚å› æ­¤åˆ›å»ºä¸€ä¸ªå®¹å™¨æ—¶ï¼Œä¸éœ€è¦å’Œè™šæ‹Ÿæœºä¸€æ ·é‡æ–°åŠ è½½ä¸€ä¸ªæ“ä½œç³»ç»Ÿå†…æ ¸ã€‚ä»è€Œé¿å…å¼•å¯»ã€åŠ è½½æ“ä½œç³»ç»Ÿå†…æ ¸è¿”å›æ—¶è€—æ—¶è€—èµ„æºçš„è¿‡ç¨‹ï¼Œå½“æ–°å»ºä¸€ä¸ªè™šæ‹Ÿæœºæ—¶ï¼Œè™šæ‹Ÿæœºè½¯ä»¶éœ€è¦åŠ è½½Guest OSï¼Œè¿”å›æ–°å»ºè¿‡ç¨‹æ˜¯åˆ†é’Ÿçº§åˆ«çš„ã€‚è€Œæ–°å»ºä¸€ä¸ªDockerå®¹å™¨åªéœ€è¦å‡ ç§’é’Ÿã€‚</p>
<p>3ã€Dockerä¸VMç›¸æ¯”ï¼š</p>
<ul>
<li>Dockerçµæ´»ï¼ŒVMç¬¨é‡</li>
<li>Dockerå­˜å‚¨çš„é•œåƒå°ï¼Œä¾¿äºå­˜å‚¨å’Œä¼ è¾“ï¼ŒVMé•œåƒåºå¤§</li>
</ul>
<br>

<h2 id="ğŸ”°å‘½ä»¤"><a href="#ğŸ”°å‘½ä»¤" class="headerlink" title="ğŸ”°å‘½ä»¤"></a>ğŸ”°å‘½ä»¤</h2><blockquote>
<p>ğŸŒå®˜æ–¹æ–‡æ¡£</p>
</blockquote>
<p>Command-line referenceï¼š<a target="_blank" rel="noopener" href="https://docs.docker.com/reference/">https://docs.docker.com/reference/</a></p>
<img src= "https://cdn.jsdelivr.net/gh/Khighness/cdn/common/loading.gif" data-lazy-src="/posts/f5f9fa9b/image-20201204225734966.png" class="" title="image-20201204225734966">

<br>

<h3 id="1ï¸âƒ£å¸®åŠ©å‘½ä»¤"><a href="#1ï¸âƒ£å¸®åŠ©å‘½ä»¤" class="headerlink" title="1ï¸âƒ£å¸®åŠ©å‘½ä»¤"></a>1ï¸âƒ£å¸®åŠ©å‘½ä»¤</h3><pre><code class="shell">$ docker version    # æ˜¾ç¤ºDockerç‰ˆæœ¬ä¿¡æ¯
$ docker info       # æ˜¾ç¤ºDockerç³»ç»Ÿä¿¡æ¯
$ docker --help     # Dockerå‘½ä»¤å¸®åŠ©ä¿¡æ¯</code></pre>
<br>

<h3 id="2ï¸âƒ£é•œåƒå‘½ä»¤"><a href="#2ï¸âƒ£é•œåƒå‘½ä»¤" class="headerlink" title="2ï¸âƒ£é•œåƒå‘½ä»¤"></a>2ï¸âƒ£é•œåƒå‘½ä»¤</h3><blockquote>
<p>æŸ¥çœ‹é•œåƒ</p>
</blockquote>
<pre><code class="shell">$ docker images

# å¯é€‰é¡¹
-a, --all             # åˆ—å‡ºæ‰€æœ‰é•œåƒ
    --digests         # æ˜¾ç¤ºé•œåƒçš„æ‘˜è¦ä¿¡æ¯
-q, --quiet           # åªæ˜¾ç¤ºé•œåƒçš„ID

# è¿è¡Œ
[root@parak khighness]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
hello-world         latest              bf756fb1ae65        11 months ago       13.3kB
# è§£é‡Š
REPOSITORY  é•œåƒçš„ä»“åº“æº
TAG         é•œåƒçš„æ ‡ç­¾
IMAGE ID    é•œåƒçš„ID
CREATED     é•œåƒçš„åˆ›å»ºæ—¶é—´
SIZE        é•œåƒçš„å¤§å°</code></pre>
<blockquote>
<p>æœç´¢é•œåƒ</p>
</blockquote>
<pre><code class="shell">$ docker search &lt;IMAGE&gt;

# å¯é€‰é¡¹
--filter=STARS=1000 # é•œåƒçš„STARSå¤§äº1000</code></pre>
<blockquote>
<p>ä¸‹è½½é•œåƒ</p>
</blockquote>
<pre><code class="shell">$ docker pull &lt;IMAGE&gt;
$ docker pull .io/library/mysql:latest

# å¦‚æœä¸å†™tagï¼Œé»˜è®¤å°±æ˜¯æœ€æ–°çš„

# æŒ‡å®šç‰ˆæœ¬ä¸‹è½½
[root@parak khighness]# docker pull mysql:8.0.20
8.0.20: Pulling from library/mysql  # åˆ†å±‚ä¸‹è½½
8559a31e96f4: Pull complete 
d51ce1c2e575: Pull complete 
c2344adc4858: Pull complete 
fcf3ceff18fc: Pull complete 
16da0c38dc5b: Pull complete 
b905d1797e97: Pull complete 
4b50d1c6b05c: Pull complete 
c75914a65ca2: Pull complete 
1ae8042bdd09: Pull complete 
453ac13c00a3: Pull complete 
9e680cd72f08: Pull complete 
a6b5dc864b6c: Pull complete 
Digest: sha256:8b7b328a7ff6de46ef96bcf83af048cb00a1c86282bfca0cb119c84568b4caf6
Status: Downloaded newer image for mysql:8.0.20
docker.io/library/mysql:8.0.20</code></pre>
<blockquote>
<p>åˆ é™¤é•œåƒ</p>
</blockquote>
<pre><code class="shell"># é€šè¿‡é•œåƒIDåˆ é™¤
$ docker rmi -f &lt;IMAGE ID&gt; ...
# åˆ é™¤æ‰€æœ‰é•œåƒ
$ docker rmi -f $(docker images -aq)0</code></pre>
<br>

<h3 id="3ï¸âƒ£å®¹å™¨å‘½ä»¤"><a href="#3ï¸âƒ£å®¹å™¨å‘½ä»¤" class="headerlink" title="3ï¸âƒ£å®¹å™¨å‘½ä»¤"></a>3ï¸âƒ£å®¹å™¨å‘½ä»¤</h3><blockquote>
<p>ä¸‹è½½ä¸€ä¸ªCentOSé•œåƒæ¥æµ‹è¯•å­¦(å¥—)ä¹ (å¨ƒ)</p>
</blockquote>
<pre><code class="shell">[root@parak khighness]# docker pull centos
Using default tag: latest
latest: Pulling from library/centos
3c72a8ed6814: Pull complete 
Digest: sha256:76d24f3ba3317fa945743bb3746fbaf3a0b752f10b10376960de01da70685fbd
Status: Downloaded newer image for centos:latest
docker.io/library/centos:latest</code></pre>
<blockquote>
<p>æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨</p>
</blockquote>
<pre><code class="shell">$ docker run [å¯é€‰å‚æ•°] &lt;IMAGE&gt;

# å‚æ•°è¯´æ˜
--name=&quot;NAME&quot;   å®¹å™¨åå­—ï¼Œç”¨äºåŒºåˆ†å®¹å™¨
-d              åå°æ–¹å¼è¿è¡Œ
-it             ä½¿ç”¨äº¤äº’æ–¹å¼è¿è¡Œï¼Œè¿›å¦‚å®¹å™¨æŸ¥çœ‹å†…å®¹
-p              æŒ‡å®šå®¹å™¨ç«¯å£  -p 8080:8080
    -p ip:ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£
    -p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£
    -p å®¹å™¨ç«¯å£

# æµ‹è¯•ï¼Œå¯åŠ¨å¹¶è¿›å…¥å®¹å™¨
[root@parak khighness]# docker run -it centos /bin/bash
[root@e4efa1c507b8 /]# ls
bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
# ä»å®¹å™¨ä¸­é€€å›ä¸»æœº
[root@e4efa1c507b8 /]# exit
exit
[root@parak khighness]# ls
å…¬å…±  æ¨¡æ¿  è§†é¢‘  å›¾ç‰‡  æ–‡æ¡£  ä¸‹è½½  éŸ³ä¹  æ¡Œé¢</code></pre>
<blockquote>
<p>æŸ¥çœ‹å®¹å™¨</p>
</blockquote>
<pre><code class="shell">$ docker ps  # æ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨
-a           # æ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨+å†å²è¿è¡Œè¿‡çš„å®¹å™¨
-n=?         # æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„nä¸ªå®¹å™¨
-q           # åªæ˜¾ç¤ºå®¹å™¨çš„ç¼–å·</code></pre>
<blockquote>
<p>é€€å‡ºå®¹å™¨</p>
</blockquote>
<pre><code class="shell">$ exit        </code></pre>
<blockquote>
<p>åˆ é™¤å®¹å™¨</p>
</blockquote>
<pre><code class="shell">$ docker rm &lt;Container ID/NAME&gt;    # åˆ é™¤æŒ‡å®šçš„å®¹å™¨ï¼Œä¸èƒ½åˆ é™¤åªåœ¨è¿è¡Œçš„å®¹å™¨
$ docker rm -f $(docker ps -aq)    # åˆ é™¤æ‰€æœ‰çš„å®¹å™¨
$ docker ps -a -q|xargs docker rm  # åˆ é™¤æ‰€æœ‰çš„å®¹å™¨ </code></pre>
<blockquote>
<p>å®¹å™¨æ“ä½œ</p>
</blockquote>
<pre><code class="shell">$ docker start   &lt;Container ID/NAME&gt;  # å¯åŠ¨å®¹å™¨ 
$ docker restart &lt;Container ID/NAME&gt;  # é‡å¯å®¹å™¨
$ docker stop    &lt;Container ID/NAME&gt;  # åœæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨
$ docker kill    &lt;Container ID/NAME&gt;  # å¼ºåˆ¶åœæ­¢å½“å‰å®¹å™¨</code></pre>
<blockquote>
<p>æŸ¥çœ‹æ—¥å¿—</p>
</blockquote>
<pre><code class="shell">$ docker logs -tf --tail &lt;n&gt; &lt;Container ID/NAME&gt; # æ˜¾ç¤ºæŒ‡å®šè¡Œæ•°çš„æ—¥å¿—</code></pre>
<blockquote>
<p>æŸ¥çœ‹å®¹å™¨ä¸­è¿›ç¨‹ä¿¡æ¯</p>
</blockquote>
<pre><code class="shell">$ docker top &lt;Container ID/NAME&gt;</code></pre>
<blockquote>
<p>æŸ¥çœ‹é•œåƒçš„å…ƒæ•°æ®</p>
</blockquote>
<pre><code class="shell">$ docker inspect</code></pre>
<blockquote>
<p>è¿›å…¥å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</p>
</blockquote>
<pre><code class="shell">$ docker exec -it &lt;Container ID&gt; bashShell  
# è¿›å…¥å®¹å™¨åå¼€å¯ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œå¯ä»¥åœ¨é‡Œé¢æ“ä½œï¼›
# execä¹‹åä¸ä¼šç»ˆç»“å½“å‰å®¹å™¨è¿›ç¨‹

$ docker attach &lt;Container ID&gt;              
# è¿›å…¥å®¹å™¨ä¸­æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹
# execä¹‹åç»ˆç»“å½“å‰å®¹å™¨è¿›ç¨‹</code></pre>
<blockquote>
<p>ä»å®¹å™¨æ‹·è´æ–°çš„ä¸œè¥¿åˆ°ä¸»æœº</p>
</blockquote>
<pre><code class="shell"># å¼€å¯CentOSå®¹å™¨
[root@parak khighness]# docker start b9ace468ea7d
b9ace468ea7d
# è¿›å…¥CentOSå®¹å™¨
[root@parak khighness]# docker attach b9ace468ea7d
# åˆ›å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶
[root@b9ace468ea7d /]# cd home/
[root@b9ace468ea7d home]# mkdir document 
[root@b9ace468ea7d home]# vi K1.java
# é€€å‡ºå®¹å™¨
[root@b9ace468ea7d document]# exit
exit
# å°†å®¹å™¨æ–‡ä»¶å¤åˆ¶åˆ°ä¸»æœºä¸Š
[root@parak khighness]# docker cp b9ace468ea7d:/home/document/K1.java document/
[root@parak khighness]# cd document/
[root@parak document]# ll
æ€»ç”¨é‡ 4
-rw-r--r--. 1 root root 186 12æœˆ  5 11:33 K1.java</code></pre>
<br>

<h2 id="ğŸ”±ç»ƒä¹ "><a href="#ğŸ”±ç»ƒä¹ " class="headerlink" title="ğŸ”±ç»ƒä¹ "></a>ğŸ”±ç»ƒä¹ </h2><br>

<h3 id="ğŸŒ -å®‰è£…Nginx"><a href="#ğŸŒ -å®‰è£…Nginx" class="headerlink" title="ğŸŒ  å®‰è£…Nginx"></a>ğŸŒ  å®‰è£…Nginx</h3><pre><code class="shell"># æœç´¢é•œåƒ
[root@parak khighness]# docker search nginx
NAME                               DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED
nginx                              Official build of Nginx.                        14063               [OK]                
jwilder/nginx-proxy                Automated Nginx reverse proxy for docker conâ€¦   1912                                    [OK]
richarvey/nginx-php-fpm            Container running Nginx + PHP-FPM capable ofâ€¦   795                                     [OK]
linuxserver/nginx                  An Nginx container, brought to you by LinuxSâ€¦   131                                     
jc21/nginx-proxy-manager           Docker container for managing Nginx proxy hoâ€¦   115                                     
tiangolo/nginx-rtmp                Docker image with Nginx using the nginx-rtmpâ€¦   105                                     [OK]
bitnami/nginx                      Bitnami nginx Docker Image                      90                                      [OK]
alfg/nginx-rtmp                    NGINX, nginx-rtmp-module and FFmpeg from souâ€¦   80                                      [OK]
jlesage/nginx-proxy-manager        Docker container for Nginx Proxy Manager        72                                      [OK]
nginxdemos/hello                   NGINX webserver that serves a simple page coâ€¦   63                                      [OK]
nginx/nginx-ingress                NGINX Ingress Controller for Kubernetes         45                                      
privatebin/nginx-fpm-alpine        PrivateBin running on an Nginx, php-fpm &amp; Alâ€¦   42                                      [OK]
nginxinc/nginx-unprivileged        Unprivileged NGINX Dockerfiles                  21                                      
schmunk42/nginx-redirect           A very simple container to redirect HTTP traâ€¦   19                                      [OK]
nginx/nginx-prometheus-exporter    NGINX Prometheus Exporter                       15                                      
centos/nginx-112-centos7           Platform for running nginx 1.12 or building â€¦   15                                      
staticfloat/nginx-certbot          Opinionated setup for automatic TLS certs loâ€¦   14                                      [OK]
raulr/nginx-wordpress              Nginx front-end for the official wordpress:fâ€¦   13                                      [OK]
centos/nginx-18-centos7            Platform for running nginx 1.8 or building nâ€¦   13                                      
mailu/nginx                        Mailu nginx frontend                            8                                       [OK]
bitwarden/nginx                    The Bitwarden nginx web server acting as a râ€¦   7                                       
flashspys/nginx-static             Super Lightweight Nginx Image                   7                                       [OK]
bitnami/nginx-ingress-controller   Bitnami Docker Image for NGINX Ingress Contrâ€¦   6                                       [OK]
wodby/nginx                        Generic nginx                                   1                                       [OK]
ansibleplaybookbundle/nginx-apb    An APB to deploy NGINX                          1                                       [OK]
# ä¸‹è½½é•œåƒ
[root@parak khighness]# docker pull nginx
Using default tag: latest
latest: Pulling from library/nginx
852e50cd189d: Pull complete 
571d7e852307: Pull complete 
addb10abd9cb: Pull complete 
d20aa7ccdb77: Pull complete 
8b03f1e11359: Pull complete 
Digest: sha256:6b1daa9462046581ac15be20277a7c75476283f969cb3a61c8725ec38d3b01c3
Status: Downloaded newer image for nginx:latest
docker.io/library/nginx:latest
# æŸ¥çœ‹é•œåƒ
[root@parak khighness]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
nginx               latest              bc9a0695f571        10 days ago         133MB
centos              latest              0d120b6ccaa8        3 months ago        215MB
mysql               8.0.20              be0dbf01a0f3        5 months ago        541MB
hello-world         latest              bf756fb1ae65        11 months ago       13.3kB
# åå°å¯åŠ¨80ç«¯å£nginxï¼Œå¯¹å¤–å¼€æ”¾3355ç«¯å£
[root@parak khighness]# docker run -d --name nginx1 -p 3355:80 nginx 
b6072408f44cd78594f01c95bc63da6baf911f74d62bf232ec42c1cd8b08b4d0
[root@parak khighness]# docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
b6072408f44c        nginx               &quot;/docker-entrypoint.â€¦&quot;   6 seconds ago       Up 4 seconds        0.0.0.0:3355-&gt;80/tcp   nginx1
# æµ‹è¯•ï¼Œå¯ä»¥ç”¨ip:3355åœ¨æµè§ˆå™¨è®¿é—®
[root@parak khighness]# curl localhost:3355
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
&lt;style&gt;
    body &#123;
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    &#125;
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
&lt;p&gt;If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.&lt;/p&gt;

&lt;p&gt;For online documentation and support please refer to
&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial support is available at
&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<br>

<h3 id="ğŸŒ -å®‰è£…Tomcat"><a href="#ğŸŒ -å®‰è£…Tomcat" class="headerlink" title="ğŸŒ  å®‰è£…Tomcat"></a>ğŸŒ  å®‰è£…Tomcat</h3><pre><code class="shell">[root@parak khighness]# docker pull tomcat:9.0
9.0: Pulling from library/tomcat
756975cb9c7e: Pull complete 
d77915b4e630: Pull complete 
5f37a0a41b6b: Pull complete 
96b2c1e36db5: Pull complete 
27a2d52b526e: Pull complete 
a867dba77389: Pull complete 
0939c055fb79: Pull complete 
0b0694ce0ae2: Pull complete 
81a5f8099e05: Pull complete 
c3d7917d545e: Pull complete 
Digest: sha256:a319b10d8729817c7ce0bcc2343a6f97711c7870395019340d96b6aafd6ccbea
Status: Downloaded newer image for tomcat:9.0
docker.io/library/tomcat:9.0

[root@parak khighness]# docker run -d -p 3355:8080 --name tomcat1 tomcat
48c7de09007af158b13a9bef1f2d2b77bed0c4bc2f93a4887eac427911118a9b
[root@parak khighness]# docker exec -it tomcat1 /bin/bash
root@48c7de09007a:/usr/local/tomcat# ls -al
total 128
drwxr-xr-x. 1 root root    30 Nov 19 06:16 .
drwxr-xr-x. 1 root root    20 Nov 19 06:12 ..
-rw-r--r--. 1 root root 18982 Nov 12 15:41 BUILDING.txt
-rw-r--r--. 1 root root  5409 Nov 12 15:41 CONTRIBUTING.md
-rw-r--r--. 1 root root 57092 Nov 12 15:41 LICENSE
-rw-r--r--. 1 root root  2333 Nov 12 15:41 NOTICE
-rw-r--r--. 1 root root  3257 Nov 12 15:41 README.md
-rw-r--r--. 1 root root  6898 Nov 12 15:41 RELEASE-NOTES
-rw-r--r--. 1 root root 16507 Nov 12 15:41 RUNNING.txt
drwxr-xr-x. 2 root root  4096 Nov 19 06:16 bin
drwxr-xr-x. 1 root root    22 Dec  5 13:15 conf
drwxr-xr-x. 2 root root  4096 Nov 19 06:16 lib
drwxrwxrwx. 1 root root   177 Dec  5 13:15 logs
drwxr-xr-x. 2 root root   134 Nov 19 06:16 native-jni-lib
drwxrwxrwx. 2 root root    30 Nov 19 06:16 temp
drwxr-xr-x. 2 root root     6 Nov 19 06:16 webapps
drwxr-xr-x. 7 root root    81 Nov 12 15:38 webapps.dist
drwxrwxrwx. 2 root root     6 Nov 12 15:35 work
# å¯ä»¥å‘ç°webappsç›®å½•ä¸ºç©º
root@48c7de09007a:/usr/local/tomcat# cd webapps
root@48c7de09007a:/usr/local/tomcat/webapps# ls -l
total 0

# å°†webapps.listç›®å½•ä¸‹çš„å†…å®¹æ‹·è´åˆ°webappsä¸‹ï¼Œå†ç”¨æµè§ˆå™¨æµ‹è¯•è®¿é—®
root@48c7de09007a:/usr/local/tomcat/webapps# cd ..
root@48c7de09007a:/usr/local/tomcat# cd webapps.dist/
root@48c7de09007a:/usr/local/tomcat/webapps.dist# ls
ROOT  docs  examples  host-manager  manager
root@48c7de09007a:/usr/local/tomcat/webapps.dist# cd ..
root@48c7de09007a:/usr/local/tomcat# cp -r webapps.dist/* webapps/
root@48c7de09007a:/usr/local/tomcat# cd webapps
root@48c7de09007a:/usr/local/tomcat/webapps# ls
ROOT  docs  examples  host-manager  manager</code></pre>
<blockquote>
<p>æµ‹è¯•è®¿é—® <a target="_blank" rel="noopener" href="http://192.168.117.155:3355/">http://192.168.117.155:3355/</a></p>
</blockquote>
<img src= "https://cdn.jsdelivr.net/gh/Khighness/cdn/common/loading.gif" data-lazy-src="/posts/f5f9fa9b/image-20201205214537503.png" class="" title="image-20201205214537503">

<br>

<h3 id="ğŸŒ å®‰è£…es-kibana"><a href="#ğŸŒ å®‰è£…es-kibana" class="headerlink" title="ğŸŒ å®‰è£…es + kibana"></a>ğŸŒ å®‰è£…es + kibana</h3><pre><code class="shell"># --net somenetwork ç½‘ç»œé…ç½®
$ docker run -d --name es1 -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; elasticsearch:7.6.2
# æŸ¥çœ‹ä¸»æœºçŠ¶æ€
$ doucker stats

# ä¸‹è½½å¹¶è¿è¡ŒES
[root@parak khighness]#  docker run -d --name es1 -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; elasticsearch:7.6.2
Unable to find image &#39;elasticsearch:7.6.2&#39; locally
7.6.2: Pulling from library/elasticsearch
ab5ef0e58194: Pull complete 
c4d1ca5c8a25: Pull complete 
941a3cc8e7b8: Pull complete 
43ec483d9618: Pull complete 
c486fd200684: Pull complete 
1b960df074b2: Pull complete 
1719d48d6823: Pull complete 
Digest: sha256:1b09dbd93085a1e7bca34830e77d2981521a7210e11f11eda997add1c12711fa
Status: Downloaded newer image for elasticsearch:7.6.2
51441d9abfb966c4baa0402ceb99e702f58ec68cd427710a2b8c8043983412e9
# æŸ¥çœ‹ä¸»æœºçŠ¶æ€
[root@parak khighness]# docker stats
CONTAINER ID    NAME   CPU %   MEM USAGE/LIMIT  MEM %     NET I/O    BLOCK I/O      PIDS
51441d9abfb9    es1   42.74%  495.6MiB/972.4MiB 50.97%    656B/0B   4.76GB/629MB     46

# åœæ­¢es1
$ docker stop es1
# åˆ é™¤es1
$ docker rm es1

# é™åˆ¶å†…å­˜ï¼Œå¯åŠ¨ES
$ docker run -d --name es1 -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; -e ES_JAVA_OPTS=&quot;-Xms64m -Xmx512m&quot; elasticsearch:7.6.2

# é‡æ–°å¯åŠ¨es1
[root@parak khighness]# docker run -d --name es1 -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; -e ES_JAVA_OPTS=&quot;-Xms64m -Xmx512m&quot; elasticsearch:7.6.2
ca4494f52e5642d5992c49816b636b1858f2e2f5c1aaf38621c76001262e8e4d
# å†æ¬¡æŸ¥çœ‹çŠ¶æ€
[root@parak khighness]# docker stats
CONTAINER ID    NAME   CPU %   MEM USAGE/LIMIT   MEM %     NET I/O   BLOCK I/O       PIDS
ca4494f52e56    es1    0.68%   357.5MiB/972.4MiB 36.77%    737B/0B   476MB/1.78MB     45
# æµ‹è¯•è®¿é—®
[root@parak khighness]# curl localhost:9200
&#123;
  &quot;name&quot; : &quot;ca4494f52e56&quot;,
  &quot;cluster_name&quot; : &quot;docker-cluster&quot;,
  &quot;cluster_uuid&quot; : &quot;aDKZlZW_T7Ss3Dr0CXZQlQ&quot;,
  &quot;version&quot; : &#123;
    &quot;number&quot; : &quot;7.6.2&quot;,
    &quot;build_flavor&quot; : &quot;default&quot;,
    &quot;build_type&quot; : &quot;docker&quot;,
    &quot;build_hash&quot; : &quot;ef48eb35cf30adf4db14086e8aabd07ef6fb113f&quot;,
    &quot;build_date&quot; : &quot;2020-03-26T06:34:37.794943Z&quot;,
    &quot;build_snapshot&quot; : false,
    &quot;lucene_version&quot; : &quot;8.4.0&quot;,
    &quot;minimum_wire_compatibility_version&quot; : &quot;6.8.0&quot;,
    &quot;minimum_index_compatibility_version&quot; : &quot;6.0.0-beta1&quot;
  &#125;,
  &quot;tagline&quot; : &quot;You Know, for Search&quot;
&#125;</code></pre>
<br>

<h2 id="ğŸ“ˆå¯è§†åŒ–"><a href="#ğŸ“ˆå¯è§†åŒ–" class="headerlink" title="ğŸ“ˆå¯è§†åŒ–"></a>ğŸ“ˆå¯è§†åŒ–</h2><p>Y1S1å¯è§†åŒ–é¢æ¿çš„å‰ç«¯å†™çš„çœŸå¥½çœ‹ï¼Œæˆ‘çˆ±äº†ã€‚</p>
<pre><code class="shell"># å®‰è£…è¿è¡Œ
$ docker run -d -p 8088:9000 --name=pt --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer</code></pre>
<blockquote>
<p>è®¿é—®æµ‹è¯• <a target="_blank" rel="noopener" href="http://192.168.117.155:8088/">http://192.168.117.155:8088/</a></p>
</blockquote>
<img src= "https://cdn.jsdelivr.net/gh/Khighness/cdn/common/loading.gif" data-lazy-src="Docker/image-20201205232646075.png" alt="image-20201205232646075"  />

<img src= "https://cdn.jsdelivr.net/gh/Khighness/cdn/common/loading.gif" data-lazy-src="Docker/image-20201206105337297.png" alt="image-20201206105337297"  />





<h2 id="ğŸ“‘DockerFile"><a href="#ğŸ“‘DockerFile" class="headerlink" title="ğŸ“‘DockerFile"></a>ğŸ“‘DockerFile</h2><p>DockerFileå°±æ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ„å»ºæ–‡ä»¶-å‘½ä»¤è„šæœ¬ã€‚</p>
<blockquote>
<p>å‘½ä»¤</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">å‘½ä»¤</th>
<th align="center">æè¿°</th>
<th align="center">ç†è§£</th>
</tr>
</thead>
<tbody><tr>
<td align="center">FROM</td>
<td align="center">æŒ‡å®šåŸºç¡€é•œåƒ</td>
<td align="center">å…¬å¸çš„çˆ¶å…¬å¸</td>
</tr>
<tr>
<td align="center">MAINTAINER</td>
<td align="center">æŒ‡å®šç»´æŠ¤è€…ä¿¡æ¯</td>
<td align="center">å…¬å¸æ³¨å†Œä¿¡æ¯</td>
</tr>
<tr>
<td align="center">RUN</td>
<td align="center">æŠŠå‘½ä»¤å‰é¢åŠ ä¸ŠRUNå³å¯</td>
<td align="center">å…¬å¸æ³¨å†Œæµç¨‹</td>
</tr>
<tr>
<td align="center">ADD</td>
<td align="center">COPYæ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨è§£å‹</td>
<td align="center">å…¬å¸æ³¨å†Œèµ„é‡‘</td>
</tr>
<tr>
<td align="center">WORKDIR</td>
<td align="center">è®¾ç½®å½“å‰å·¥ä½œç›®å½•</td>
<td align="center">å…¬å¸å¤§æ¥¼ä»“åº“</td>
</tr>
<tr>
<td align="center">VOLUMN</td>
<td align="center">æŒ‚è½½ä¸»æœºç›®å½•</td>
<td align="center">å…¬å¸çš„ä¸»ä»“åº“</td>
</tr>
<tr>
<td align="center">EXPOSE</td>
<td align="center">æŒ‡å®šå¯¹å¤–ç«¯å£</td>
<td align="center">å…¬å¸å¼€æ”¾å¤§é—¨</td>
</tr>
<tr>
<td align="center">RUN</td>
<td align="center">è¿›ç¨‹è¦ä¸€ç›´è¿è¡Œä¸‹å»</td>
<td align="center">å…¬å¸æ°¸ä¸å€’é—­</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">å‘½ä»¤</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">CMD</td>
<td align="center">æŒ‡å®šè¿™å®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤åªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿ä»£ã€‚</td>
</tr>
<tr>
<td align="center">ENTRYPOINT</td>
<td align="center">æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¿½åŠ å‘½ä»¤ã€‚</td>
</tr>
<tr>
<td align="center">ONBUILD</td>
<td align="center">å½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿DockerFileè¿™å°±ä¼šè¿è¡ŒONBUILDæŒ‡ä»¤ã€‚è§¦å‘æŒ‡ä»¤.</td>
</tr>
<tr>
<td align="center">COPY</td>
<td align="center">ç±»ä¼¼ADDï¼Œå°†æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­ã€‚</td>
</tr>
<tr>
<td align="center">ENV</td>
<td align="center">æ„å»ºçš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡ã€‚</td>
</tr>
</tbody></table>
<blockquote>
<p>å®ä¾‹1-æµ‹è¯•</p>
</blockquote>
<pre><code class="shell">[root@parak home]# mkdir volume
[root@parak home]# cd volume/
[root@parak volume]# vim dockerfile1
[root@parak volume]# cat dockerfile1 
FROM centos
VOLUME [&quot;volume01&quot;,&quot;volume02&quot;]
CMD echo &quot;---end---&quot;
CMD /bin/bash
[root@parak volume]# docker build -f /home/volume/dockerfile1 -t khighness/centos:1.0 .
Sending build context to Docker daemon  2.048kB
Step 1/4 : FROM centos
 ---&gt; 0d120b6ccaa8
Step 2/4 : VOLUME [&quot;volume01&quot;,&quot;volume02&quot;]
 ---&gt; Running in 79dc7b449286
Removing intermediate container 79dc7b449286
 ---&gt; 9a6608557c9a
Step 3/4 : CMD echo &quot;---end---&quot;
 ---&gt; Running in 8b8c40056f99
Removing intermediate container 8b8c40056f99
 ---&gt; 2158b18dedff
Step 4/4 : CMD /bin/bash
 ---&gt; Running in 9d76c3598d69
Removing intermediate container 9d76c3598d69
 ---&gt; 240a84cdfbef
Successfully built 240a84cdfbef
Successfully tagged khighness/centos:1.0</code></pre>
<blockquote>
<p>å®ä¾‹2-æ„å»ºè‡ªå·±çš„centos</p>
</blockquote>
<pre><code class="shell"># 1ã€ç¼–å†™DockerFileæ–‡ä»¶
[root@parak dockerfile]# vim mydockerfile-centos
[root@parak dockerfile]# cat mydockerfile-centos 
FROM centos
MAINTAINER khighness&lt;1823676372@qq.com&gt;

ENV MYPATH /usr/local
WORKDIR $MYPATH 

RUN yum -y install vim
RUN yum -y install net-tools

EXPOSE 80

CMD echo $MYPATH
CMD echo &quot;---end---&quot;
CMD /bin/bash

# 2ã€é€šè¿‡DockerFileæ„å»ºé•œåƒ
[root@parak dockerfile]# docker build -f mydockerfile-centos  -t mycentos:1.0 .
Sending build context to Docker daemon  2.048kB
Step 1/10 : FROM centos
 ---&gt; 0d120b6ccaa8
Step 2/10 : MAINTAINER khighness&lt;1823676372@qq.com&gt;
 ---&gt; Running in 024da1b1d4cc
Removing intermediate container 024da1b1d4cc
 ---&gt; 6c9b636504d2
Step 3/10 : ENV MYPATH /usr/local
 ---&gt; Running in 4046d4e257ac
Removing intermediate container 4046d4e257ac
 ---&gt; a5710fdc760e
Step 4/10 : WORKDIR $MYPATH
 ---&gt; Running in 252416d49e94
Removing intermediate container 252416d49e94
 ---&gt; fdbae7da4ca4
Step 5/10 : RUN yum -y install vim
 ---&gt; Running in 9eb786294022
CentOS-8 - AppStream                            288 kB/s | 6.2 MB     00:22    
CentOS-8 - Base                                 703 kB/s | 2.3 MB     00:03    
CentOS-8 - Extras                               1.3 kB/s | 8.1 kB     00:06    
Dependencies resolved.
================================================================================
 Package             Arch        Version                   Repository      Size
================================================================================
Installing:
 vim-enhanced        x86_64      2:8.0.1763-15.el8         AppStream      1.4 M
Installing dependencies:
 gpm-libs            x86_64      1.20.7-15.el8             AppStream       39 k
 vim-common          x86_64      2:8.0.1763-15.el8         AppStream      6.3 M
 vim-filesystem      noarch      2:8.0.1763-15.el8         AppStream       48 k
 which               x86_64      2.21-12.el8               BaseOS          49 k

Transaction Summary
================================================================================
Install  5 Packages

Total download size: 7.8 M
Installed size: 30 M
Downloading Packages:
(1/5): gpm-libs-1.20.7-15.el8.x86_64.rpm        340 kB/s |  39 kB     00:00    
(2/5): vim-filesystem-8.0.1763-15.el8.noarch.rp 664 kB/s |  48 kB     00:00    
(3/5): which-2.21-12.el8.x86_64.rpm             315 kB/s |  49 kB     00:00    
(4/5): vim-enhanced-8.0.1763-15.el8.x86_64.rpm  543 kB/s | 1.4 MB     00:02    
(5/5): vim-common-8.0.1763-15.el8.x86_64.rpm    387 kB/s | 6.3 MB     00:16    
--------------------------------------------------------------------------------
Total                                           448 kB/s | 7.8 MB     00:17     
warning: /var/cache/dnf/AppStream-02e86d1c976ab532/packages/gpm-libs-1.20.7-15.el8.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID 8483c65d: NOKEY
CentOS-8 - AppStream                            1.6 MB/s | 1.6 kB     00:00    
Importing GPG key 0x8483C65D:
 Userid     : &quot;CentOS (CentOS Official Signing Key) &lt;security@centos.org&gt;&quot;
 Fingerprint: 99DB 70FA E1D7 CE22 7FB6 4882 05B5 55B3 8483 C65D
 From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
Key imported successfully
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : which-2.21-12.el8.x86_64                               1/5 
  Installing       : vim-filesystem-2:8.0.1763-15.el8.noarch                2/5 
  Installing       : vim-common-2:8.0.1763-15.el8.x86_64                    3/5 
  Installing       : gpm-libs-1.20.7-15.el8.x86_64                          4/5 
  Running scriptlet: gpm-libs-1.20.7-15.el8.x86_64                          4/5 
  Installing       : vim-enhanced-2:8.0.1763-15.el8.x86_64                  5/5 
  Running scriptlet: vim-enhanced-2:8.0.1763-15.el8.x86_64                  5/5 
  Running scriptlet: vim-common-2:8.0.1763-15.el8.x86_64                    5/5 
  Verifying        : gpm-libs-1.20.7-15.el8.x86_64                          1/5 
  Verifying        : vim-common-2:8.0.1763-15.el8.x86_64                    2/5 
  Verifying        : vim-enhanced-2:8.0.1763-15.el8.x86_64                  3/5 
  Verifying        : vim-filesystem-2:8.0.1763-15.el8.noarch                4/5 
  Verifying        : which-2.21-12.el8.x86_64                               5/5 

Installed:
  gpm-libs-1.20.7-15.el8.x86_64         vim-common-2:8.0.1763-15.el8.x86_64    
  vim-enhanced-2:8.0.1763-15.el8.x86_64 vim-filesystem-2:8.0.1763-15.el8.noarch
  which-2.21-12.el8.x86_64             

Complete!
Removing intermediate container 9eb786294022
 ---&gt; 491907dac3e2
Step 6/10 : RUN yum -y install net-tools
 ---&gt; Running in 3a13d71952e5
Last metadata expiration check: 0:00:24 ago on Mon Dec  7 11:45:38 2020.
Dependencies resolved.
================================================================================
 Package         Architecture Version                        Repository    Size
================================================================================
Installing:
 net-tools       x86_64       2.0-0.52.20160912git.el8       BaseOS       322 k

Transaction Summary
================================================================================
Install  1 Package

Total download size: 322 k
Installed size: 942 k
Downloading Packages:
net-tools-2.0-0.52.20160912git.el8.x86_64.rpm   1.0 MB/s | 322 kB     00:00    
--------------------------------------------------------------------------------
Total                                           141 kB/s | 322 kB     00:02     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Installing       : net-tools-2.0-0.52.20160912git.el8.x86_64              1/1 
  Running scriptlet: net-tools-2.0-0.52.20160912git.el8.x86_64              1/1 
  Verifying        : net-tools-2.0-0.52.20160912git.el8.x86_64              1/1 

Installed:
  net-tools-2.0-0.52.20160912git.el8.x86_64                                     

Complete!
Removing intermediate container 3a13d71952e5
 ---&gt; 0d095f331d4a
Step 7/10 : EXPOSE 80
 ---&gt; Running in 66d8aceea20c
Removing intermediate container 66d8aceea20c
 ---&gt; a86402c5f9b7
Step 8/10 : CMD echo $MYPATH
 ---&gt; Running in b6af3ea8ff6a
Removing intermediate container b6af3ea8ff6a
 ---&gt; 17533352607f
Step 9/10 : CMD echo &quot;---end---&quot;
 ---&gt; Running in f015d24c9277
Removing intermediate container f015d24c9277
 ---&gt; cf7d78851a04
Step 10/10 : CMD /bin/bash
 ---&gt; Running in d0f70eaa39ec
Removing intermediate container d0f70eaa39ec
 ---&gt; d59930f07e43
Successfully built d59930f07e43
Successfully tagged mycentos:1.0


# 3ã€æµ‹è¯•è¿è¡Œï¼Œå®˜æ–¹çš„centosé•œåƒä¸­æ˜¯æ²¡æœ‰ç½‘ç»œå‘½ä»¤å’ŒVIMå‘½ä»¤çš„ï¼Œè€Œè‡ªå·±æ„å»ºçš„centosä¸­å·²ç»æœ‰
[root@parak dockerfile]# docker run -it --name=mycen mycentos:1.0 
[root@43b0b7eb76d8 local]# pwd
/usr/local
[root@43b0b7eb76d8 local]# vim test
[root@43b0b7eb76d8 local]# cat test 
Khighness
[root@43b0b7eb76d8 local]# ifconfig
eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 172.17.0.4  netmask 255.255.0.0  broadcast 172.17.255.255
        ether 02:42:ac:11:00:04  txqueuelen 0  (Ethernet)
        RX packets 8  bytes 656 (656.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0    
[root@43b0b7eb76d8 local]# exit
exit

# 4ã€æŸ¥çœ‹é•œåƒçš„å˜æ›´å†å²
[root@parak dockerfile]# docker history mycentos:1.0 
IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT
d59930f07e43        23 minutes ago      /bin/sh -c #(nop)  CMD [&quot;/bin/sh&quot; &quot;-c&quot; &quot;/binâ€¦   0B          
cf7d78851a04        23 minutes ago      /bin/sh -c #(nop)  CMD [&quot;/bin/sh&quot; &quot;-c&quot; &quot;echoâ€¦   0B               
17533352607f        23 minutes ago      /bin/sh -c #(nop)  CMD [&quot;/bin/sh&quot; &quot;-c&quot; &quot;echoâ€¦   0B                  
a86402c5f9b7        23 minutes ago      /bin/sh -c #(nop)  EXPOSE 80                    0B                  
0d095f331d4a        23 minutes ago      /bin/sh -c yum -y install net-tools             23.2MB              
491907dac3e2        23 minutes ago      /bin/sh -c yum -y install vim                   57.7MB              
fdbae7da4ca4        24 minutes ago      /bin/sh -c #(nop) WORKDIR /usr/local            0B                  
a5710fdc760e        24 minutes ago      /bin/sh -c #(nop)  ENV MYPATH=/usr/local        0B                  
6c9b636504d2        24 minutes ago      /bin/sh -c #(nop)  MAINTAINER khighness&lt;1823â€¦   0B                  
0d120b6ccaa8        3 months ago        /bin/sh -c #(nop)  CMD [&quot;/bin/bash&quot;]            0B                  
&lt;missing&gt;           3 months ago        /bin/sh -c #(nop)  LABEL org.label-schema.scâ€¦   0B                  
&lt;missing&gt;           3 months ago        /bin/sh -c #(nop) ADD file:538afc0c5c964ce0dâ€¦   215MB         </code></pre>
<blockquote>
<p>CMDå’ŒENTRYPOINTçš„åŒºåˆ«</p>
</blockquote>
<p><strong>æµ‹è¯•CMD</strong></p>
<pre><code class="shell"># ç¼–å†™æµ‹è¯•CMDçš„dockerfile
[root@parak dockerfile]# vim dockerfile-cmd-test1
# å†…å®¹å°±æ˜¯ä¸€ä¸ªCMDå‘½ä»¤
[root@parak dockerfile]# cat dockerfile-cmd-test1 
FROM centos
CMD [&quot;ls&quot;,&quot;-a&quot;]
# æ„å»ºé•œåƒ
[root@parak dockerfile]# docker build -f dockerfile-cmd-test1 -t cmdtest .
Sending build context to Docker daemon  3.072kB
Step 1/2 : FROM centos
 ---&gt; 0d120b6ccaa8
Step 2/2 : CMD [&quot;ls&quot;,&quot;-a&quot;]
 ---&gt; Running in e4df49ad7ca4
Removing intermediate container e4df49ad7ca4
 ---&gt; 4be395747805
Successfully built 4be395747805
Successfully tagged cmdtest:latest
# è¿è¡Œé•œåƒå°±ç›¸å½“äºè¿è¡ŒCMDå‘½ä»¤ï¼šls -a
[root@parak dockerfile]# docker run cmdtest
.
..
.dockerenv
bin
dev
etc
home
lib
lib64
lost+found
media
mnt
opt
proc
root
run
sbin
srv
sys
tmp
usr
var
# è¿½åŠ å‘½ä»¤-lï¼Œå³ls -al
[root@parak dockerfile]# docker run cmdtest -l
docker: Error response from daemon: OCI runtime create failed: container_linux.go:349: starting container process caused &quot;exec: \&quot;-l\&quot;: executable file not found in $PATH&quot;: unknown.

</code></pre>
<p><strong>æµ‹è¯•ENTRYPOINT</strong></p>
<pre><code class="shell"># ç¼–å†™æµ‹è¯•ENTRYPOINTçš„dockerfile
[root@parak dockerfile]# vim dockerfile-entrypoint-test1
# å†…å®¹å°±æ˜¯ä¸€ä¸ªENTRYPOINTå‘½ä»¤
[root@parak dockerfile]# cat dockerfile-entrypoint-test1 
FROM centos
ENTRYPOINT [&quot;ls&quot;, &quot;-a&quot;]
# æ„å»ºé•œåƒ
[root@parak dockerfile]# docker build -f dockerfile-entrypoint-test1 -t entrypointtest .
Sending build context to Docker daemon  4.096kB
Step 1/2 : FROM centos
 ---&gt; 0d120b6ccaa8
Step 2/2 : ENTRYPOINT [&quot;ls&quot;, &quot;-a&quot;]
 ---&gt; Running in 0aa9b4c97293
Removing intermediate container 0aa9b4c97293
 ---&gt; 472d86e826d8
Successfully built 472d86e826d8
Successfully tagged entrypointtest:latest
# è¿è¡Œé•œåƒ
[root@parak dockerfile]# docker run entrypointtest
.
..
.dockerenv
bin
dev
etc
home
lib
lib64
lost+found
media
mnt
opt
proc
root
run
sbin
srv
sys
tmp
usr
var
# è¿½å‡»å‘½ä»¤-lï¼Œå³ls -al
[root@parak dockerfile]# docker run entrypointtest -l
total 0
drwxr-xr-x.   1 root root   6 Dec  7 12:27 .
drwxr-xr-x.   1 root root   6 Dec  7 12:27 ..
-rwxr-xr-x.   1 root root   0 Dec  7 12:27 .dockerenv
lrwxrwxrwx.   1 root root   7 May 11  2019 bin -&gt; usr/bin
drwxr-xr-x.   5 root root 340 Dec  7 12:27 dev
drwxr-xr-x.   1 root root  66 Dec  7 12:27 etc
drwxr-xr-x.   2 root root   6 May 11  2019 home
lrwxrwxrwx.   1 root root   7 May 11  2019 lib -&gt; usr/lib
lrwxrwxrwx.   1 root root   9 May 11  2019 lib64 -&gt; usr/lib64
drwx------.   2 root root   6 Aug  9 21:40 lost+found
drwxr-xr-x.   2 root root   6 May 11  2019 media
drwxr-xr-x.   2 root root   6 May 11  2019 mnt
drwxr-xr-x.   2 root root   6 May 11  2019 opt
dr-xr-xr-x. 259 root root   0 Dec  7 12:27 proc
dr-xr-x---.   2 root root 162 Aug  9 21:40 root
drwxr-xr-x.  11 root root 163 Aug  9 21:40 run
lrwxrwxrwx.   1 root root   8 May 11  2019 sbin -&gt; usr/sbin
drwxr-xr-x.   2 root root   6 May 11  2019 srv
dr-xr-xr-x.  13 root root   0 Dec  6 08:24 sys
drwxrwxrwt.   7 root root 145 Aug  9 21:40 tmp
drwxr-xr-x.  12 root root 144 Aug  9 21:40 usr
drwxr-xr-x.  20 root root 262 Aug  9 21:40 var</code></pre>
<br>

<h2 id="ğŸ”é•œåƒ"><a href="#ğŸ”é•œåƒ" class="headerlink" title="ğŸ”é•œåƒ"></a>ğŸ”é•œåƒ</h2><blockquote>
<p>æ¦‚å¿µ</p>
</blockquote>
<p>é•œåƒæ˜¯ä¸€ç§è½»é‡çº§ã€å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…ï¼Œç”¨æ¥æ‰“åŒ…è½¯ä»¶è¿è¡Œç¯å¢ƒå’ŒåŸºäºè¿è¡Œç¯å¢ƒå¼€å‘çš„è½¯ä»¶ï¼Œå®ƒåŒ…å«è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä»£ç ã€è¿è¡Œæ—¶ã€åº“ã€ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ã€‚</p>
<blockquote>
<p>UnionFS(è”åˆæ–‡ä»¶ç³»ç»Ÿ)</p>
</blockquote>
<p>UnionFS: è”åˆæ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹(Unite several directions into a single virtual file system)ã€‚Unionæ–‡ä»¶ç³»ç»Ÿæ˜¯Dockeré•œåƒçš„åŸºç¡€ã€‚é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒ(æ²¡æœ‰çˆ¶é•œåƒ)ï¼Œå¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒã€‚</p>
<p>ç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p>
<blockquote>
<p>Dockeré•œåƒåŠ è½½åŸç†</p>
</blockquote>
<p>Dockerçš„é•œåƒå®é™…ä¸Šç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»ŸUnionFSã€‚</p>
<p>bootfs(boot file system)ä¸»è¦åŒ…å«bootloaderå’Œkernelï¼Œbootloaderä¸»è¦æ˜¯å¼•å¯¼åŠ è½½kernelï¼ŒLinuxåˆšå¯åŠ¨æ—¶ä¼šåœ¨å®¶bootfsæ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨Dockeré•œåƒçš„æœ€åº•å±‚æ˜¯bootfsã€‚è¿™ä¸€å±‚ä¸æˆ‘ä»¬å…¸å‹çš„Linux/Unixç³»ç»Ÿæ˜¯ä¸€æ ·çš„ï¼ŒåŒ…å«bootåŠ è½½å™¨å’Œå†…æ ¸ã€‚å½“bootåŠ è½½å®Œæˆä¹‹åæ•´ä¸ªå†…æ ¸å°±éƒ½åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶å†…å­˜å’Œä½¿ç”¨æƒå·²ç”±bootfsè½¬äº¤ç»™å†…æ ¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¹Ÿä¼šå¸è½½bootfsã€‚</p>
<p>rootfs(root file system)ï¼Œåœ¨bootfsä¹‹åã€‚åŒ…å«çš„å°±æ˜¯å…¸å‹Linuxç³»ç»Ÿ/devï¼Œ/procï¼Œ/binï¼Œ/etcç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶ã€‚rootfså°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆï¼Œæ¯”å¦‚Ubuntuã€CentOSç­‰ç­‰ã€‚</p>
<blockquote>
<p>commité•œåƒ</p>
</blockquote>
<pre><code class="shell">$ docker commit -m=&quot;&lt;messahe&gt;&quot; -a=&quot;&lt;author&gt;&quot; &lt;Container ID/NAME&gt; &lt;Target&gt;:&lt;Tag&gt;

# ä¾‹å¦‚ï¼Œæ”¹è£…tomcat:9.0çš„é•œåƒæ‰“åŒ…æˆè‡ªå·±çš„é•œåƒk-tom:1.0
[root@parak khighness]# docker commit -a=&quot;Khighness&quot; -m=&quot;Add web application&quot; tom1 k-tom:1.0
sha256:fa4617c8771c81b890dc2a87c7be1d2b851c6ba92b053d0d1d8730b2006550c5
[root@parak khighness]# docker images
REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE
k-tom                 1.0                 fa4617c8771c        26 seconds ago      654MB
nginx                 latest              bc9a0695f571        11 days ago         133MB
tomcat                9.0                 e0bd8b34b4ea        2 weeks ago         649MB
redis                 latest              74d107221092        2 weeks ago         104MB
portainer/portainer   latest              62771b0b9b09        4 months ago        79.1MB
elasticsearch         7.6.2               f29a1ee41030        8 months ago        791MB
hello-world           latest              bf756fb1ae65        11 months ago       13.3kB</code></pre>
<br>

<h2 id="ğŸŒ€å®¹å™¨æ•°æ®å·"><a href="#ğŸŒ€å®¹å™¨æ•°æ®å·" class="headerlink" title="ğŸŒ€å®¹å™¨æ•°æ®å·"></a>ğŸŒ€å®¹å™¨æ•°æ®å·</h2><blockquote>
<p>æ¦‚å¿µ</p>
</blockquote>
<p>ç›®å½•æŒ‚è½½ï¼Œå°†å®¹å™¨å†…çš„ç›®å½•æŒ‚è½½åœ¨CentOSä¸Š</p>
<ul>
<li>Dockerå®¹å™¨äº§ç”Ÿçš„æ•°æ®åŒæ­¥åˆ°å®¿ä¸»æœº</li>
<li>æ•°æ®å·å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«æˆ–é‡ç”¨æ•°æ®</li>
</ul>
<blockquote>
<p>å‘½ä»¤è¡ŒæŒ‚è½½</p>
</blockquote>
<pre><code class="shell">$ docker run -it -v -p &lt;ä¸»æœºç›®å½•&gt;:&lt;å®¹å™¨ç›®å½•&gt; 

# ä¾‹å¦‚ï¼Œå°†dockerçš„centoså®¹å™¨ç›®å½•/home/testä¸å®¿ä¸»centosçš„/home/testæŒ‚è½½èµ·æ¥
[root@parak khighness]# docker run -it --name=cen -v /home/test:/home/test centos  /bin/bash
Unable to find image &#39;centos:latest&#39; locally
latest: Pulling from library/centos
3c72a8ed6814: Pull complete 
Digest: sha256:76d24f3ba3317fa945743bb3746fbaf3a0b752f10b10376960de01da70685fbd
Status: Downloaded newer image for centos:latest
[root@4410a5c86528 /]# ls
bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
[root@4410a5c86528 /]# cd home/
[root@4410a5c86528 home]# ls
test
[khighness@parak ~]$ cd /home/
[khighness@parak home]$ ls
khighness  test
[root@parak home]# docker inspect cen
# å¦‚ä¸‹æ˜¯æŒ‚è½½ä¿¡æ¯
        &quot;Mounts&quot;: [
            &#123;
                &quot;Type&quot;: &quot;bind&quot;,              # ç±»å‹ï¼šç»‘å®š
                &quot;Source&quot;: &quot;/home/test&quot;,      # å®¹å™¨ç›®å½•
                &quot;Destination&quot;: &quot;/home/test&quot;, # ä¸»æœºç›®å½•
                &quot;Mode&quot;: &quot;&quot;,
                &quot;RW&quot;: true,
                &quot;Propagation&quot;: &quot;rprivate&quot;
            &#125;
        ]
</code></pre>
<p>åœ¨å®¹å™¨çš„æŒ‚è½½ç›®å½•ä¸‹æ–°å»ºK1.javaï¼Œåœ¨å®¿ä¸»æœºçš„æŒ‚è½½ç›®å½•ä¸­å¯ä»¥ç›´æ¥çœ‹åˆ°</p>
<img src= "https://cdn.jsdelivr.net/gh/Khighness/cdn/common/loading.gif" data-lazy-src="/posts/f5f9fa9b/image-20201206183841366.png" class="" title="image-20201206183841366">



<blockquote>
<p>å®‰è£…MySQL</p>
</blockquote>
<pre><code class="shell"># ä¸‹è½½8.0.20ç‰ˆæœ¬çš„mysqlé•œåƒ
$ docker pull mysql:8.0.20
# å¯åŠ¨mysqlæœåŠ¡
# -d åå°è¿è¡Œ
# -v æŒ‚è½½é…ç½®å’Œæ•°æ®
# -e MYSQL_ROOT)PASSWORD è®¾ç½®å¯†ç 
$ docker run --name ksql -d -p 3306:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=KAG1823 mysql:8.0.20

# è§£å†³windowsçš„navicatæ— æ³•è¿æ¥çš„é—®é¢˜
# è¿›å…¥mysqlå®¢æˆ·ç«¯
$ docker exec -it ksql  bash
# ç™»å½•mysql
$ mysql -u root -pKAG1823
# é‡ç½®å¯†ç 
$ ALTER USER &#39;root&#39;@&#39;%&#39; IDENTIFIED WITH mysql_native_password BY &#39;KAG1823&#39;;</code></pre>
<br>

<h2 id="ğŸŒDockerç½‘ç»œ"><a href="#ğŸŒDockerç½‘ç»œ" class="headerlink" title="ğŸŒDockerç½‘ç»œ"></a>ğŸŒDockerç½‘ç»œ</h2><blockquote>
<p>å®ç°åŸç†</p>
</blockquote>
<p>Dockerä½¿ç”¨Linuxæ¡¥æ¥ï¼Œåœ¨å®¿ä¸»æœºè™šæ‹Ÿä¸€ä¸ªDockerå®¹å™¨ç½‘æ¡¥(Docker0)ï¼ŒDockerå¯åŠ¨ä¸€ä¸ªå®¹å™¨æ—¶ä¼šæ ¹æ®Dockerç½‘æ¡¥çš„ç½‘æ®µåˆ†é…ç»™å®¹å™¨ä¸€ä¸ªIPåœ°å€ï¼Œç§°ä¸ºContainer-IPï¼ŒåŒæ—¶Dockerç½‘æ¡¥æ˜¯æ¯ä¸ªå®¹å™¨çš„é»˜è®¤ç½‘å…³ã€‚å› ä¸ºåœ¨åŒä¸€å®¿ä¸»æœºå†…çš„å®¹å™¨éƒ½æ¥å…¥åŒä¸€ç½‘æ¡¥ã€‚è¿™æ ·å®¹å™¨ä¹‹é—´å°±èƒ½å¤Ÿé€šè¿‡å®¹å™¨çš„Contain-IPç›´æ¥é€šä¿¡ã€‚</p>
<p>Dockerç½‘æ¡¥æ˜¯å®¿ä¸»æœºè™šæ‹Ÿå‡ºæ¥çš„ï¼Œå¹¶ä¸æ˜¯çœŸå®å­˜åœ¨çš„ç½‘ç»œè®¾å¤‡ï¼Œå¤–éƒ¨è®¾å¤‡æ˜¯æ— æ³•å¯»å€åˆ°çš„ï¼Œè¿™ä¹Ÿæ„å‘³ç€å¤–éƒ¨è®¾å¤‡æ— æ³•é€šè¿‡ç›´æ¥Container-IPè®¿é—®åˆ°å®¹å™¨ã€‚å¦‚æœå®¹å™¨å¸Œæœ›å¤–éƒ¨è®¿é—®åˆ°ï¼Œå¯ä»¥é€šè¿‡æ˜ å°„å®¹å™¨ç«¯å£åˆ°å®¿ä¸»ä¸»æœºï¼ˆç«¯å£æ˜ å°„ï¼‰ï¼Œå³docker runåˆ›å»ºå®¹å™¨æ—¶å€™é€šè¿‡-pæˆ–è€…-På‚æ•°æ¥å¯åŠ¨ï¼Œè®¿é—®å®¹å™¨çš„æ—¶å€™å°±é€šè¿‡[å®¿ä¸»æœºIP]:[å®¹å™¨ç«¯å£]è®¿é—®å®¹å™¨ã€‚</p>
<blockquote>
<p>ç½‘ç»œæ¨¡å¼</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">æ¨¡å¼</th>
<th align="center">é…ç½®</th>
<th align="center">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Bridgeæ¨¡å¼</td>
<td align="center">-net=bridge</td>
<td align="center">é»˜è®¤æ¨¡å¼</td>
</tr>
<tr>
<td align="center">Hostæ¨¡å¼</td>
<td align="center">-net=host</td>
<td align="center">å®¹å™¨å’Œå®¿ä¸»æœºå…±äº«Network NameSpace</td>
</tr>
<tr>
<td align="center">Containeræ¨¡å¼</td>
<td align="center">-net=container : NAME OR ID</td>
<td align="center">å®¹å™¨å’Œå¦å¤–ä¸€ä¸ªå®¹å™¨å…±äº«Network NameSpace</td>
</tr>
<tr>
<td align="center">Noneæ¨¡å¼</td>
<td align="center">-net=none</td>
<td align="center">å®¹å™¨æœ‰ç‹¬ç«‹çš„Network NameSpaceï¼Œä½†å¹¶æ²¡æœ‰å¯¹å…¶è¿›è¡Œä»»ä½•ç½‘ç»œè®¾ç½®ï¼Œå¦‚åˆ†é…veth pair å’Œç½‘æ¡¥è¿æ¥ï¼Œé…ç½®IPç­‰</td>
</tr>
</tbody></table>
<br>

<h3 id="1ï¸âƒ£hostæ¨¡å¼"><a href="#1ï¸âƒ£hostæ¨¡å¼" class="headerlink" title="1ï¸âƒ£hostæ¨¡å¼"></a>1ï¸âƒ£hostæ¨¡å¼</h3><p>å¦‚æœå¯åŠ¨å®¹å™¨çš„æ—¶å€™ä½¿ç”¨hostæ¨¡å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¹å™¨å°†ä¸ä¼šè·å¾—ä¸€ä¸ªç‹¬ç«‹çš„Network NameSpaceï¼Œè€Œæ˜¯å’Œå®¿ä¸»æœºå…±ç”¨ä¸€ä¸ªNetwork NameSpaceã€‚å®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„IPç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„IPå’Œç«¯å£ã€‚ä½†æ˜¯ï¼Œå®¹å™¨çš„å…¶ä»–æ–¹é¢ï¼Œå¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯å’Œå®¿ä¸»æœºéš”ç¦»çš„ã€‚</p>
<p>ä½¿ç”¨hostæ¨¡å¼çš„å®¹å™¨å¯ä»¥ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„IPåœ°å€ä¸å¤–ç•Œé€šä¿¡ï¼Œå®¹å™¨å†…éƒ¨çš„æœåŠ¡ç«¯å£ä¹Ÿå¯ä»¥ä½¿ç”¨å®¿ä¸»æœºçš„ç«¯å£ï¼Œä¸éœ€è¦è¿›è¡ŒNATï¼Œhostæœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯ç½‘ç»œæ€§èƒ½æ¯”è¾ƒå¥½ï¼Œä½†æ˜¯docker hostä¸Šå·²ç»ä½¿ç”¨çš„ç«¯å£å°±ä¸èƒ½å†ç”¨äº†ï¼Œç½‘ç»œçš„éš”ç¦»æ€§ä¸å¥½ã€‚</p>
<br>

<h3 id="2ï¸âƒ£containeræ¨¡å¼"><a href="#2ï¸âƒ£containeræ¨¡å¼" class="headerlink" title="2ï¸âƒ£containeræ¨¡å¼"></a>2ï¸âƒ£containeræ¨¡å¼</h3><p>è¿™ä¸ªæ¨¡å¼æŒ‡å®šæ–°åˆ›å»ºçš„å®¹å™¨å’Œå·²ç»å­˜åœ¨çš„ä¸€ä¸ªå®¹å™¨å…±äº«ä¸€ä¸ª Network NameSpaceï¼Œè€Œä¸æ˜¯å’Œå®¿ä¸»æœºå…±äº«ã€‚æ–°åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„ IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº« IPã€ç«¯å£èŒƒå›´ç­‰ã€‚åŒæ ·ï¼Œä¸¤ä¸ªå®¹å™¨é™¤äº†ç½‘ç»œæ–¹é¢ï¼Œå…¶ä»–çš„å¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯éš”ç¦»çš„ã€‚ä¸¤ä¸ªå®¹å™¨çš„è¿›ç¨‹å¯ä»¥é€šè¿‡ lo ç½‘å¡è®¾å¤‡é€šä¿¡ã€‚</p>
<br>

<h3 id="3ï¸âƒ£noneæ¨¡å¼"><a href="#3ï¸âƒ£noneæ¨¡å¼" class="headerlink" title="3ï¸âƒ£noneæ¨¡å¼"></a>3ï¸âƒ£noneæ¨¡å¼</h3><p>ä½¿ç”¨noneæ¨¡å¼ï¼ŒDockerå®¹å™¨æ‹¥æœ‰è‡ªå·±çš„Network NameSpaceï¼Œä½†æ˜¯ï¼Œå¹¶ä¸ä¸ºDockerå®¹å™¨è¿›è¡Œä»»ä½•ç½‘ç»œé…ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªDockerå®¹å™¨æ²¡æœ‰ç½‘å¡ã€IPã€è·¯ç”±ç­‰ä¿¡æ¯ã€‚éœ€è¦æˆ‘ä»¬è‡ªå·±ä¸ºDockerå®¹å™¨æ·»åŠ ç½‘å¡ã€é…ç½®IPç­‰ã€‚</p>
<p>è¿™ç§ç½‘ç»œæ¨¡å¼ä¸‹å®¹å™¨åªæœ‰loå›ç¯ç½‘ç»œï¼Œæ²¡æœ‰å…¶ä»–ç½‘å¡ã€‚noneæ¨¡å¼å¯ä»¥åœ¨å®¹å™¨åˆ›å»ºæ—¶é€šè¿‡â€“network=noneæ¥æŒ‡å®šã€‚è¿™ç§ç±»å‹çš„ç½‘ç»œæ²¡æœ‰åŠæ³•è”ç½‘ï¼Œå°é—­çš„ç½‘ç»œèƒ½å¾ˆå¥½çš„ä¿è¯å®¹å™¨çš„å®‰å…¨æ€§ã€‚</p>
<br>

<h3 id="4ï¸âƒ£bridgeæ¨¡å¼"><a href="#4ï¸âƒ£bridgeæ¨¡å¼" class="headerlink" title="4ï¸âƒ£bridgeæ¨¡å¼"></a>4ï¸âƒ£bridgeæ¨¡å¼</h3><p>å½“Dockerè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œä¼šåœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªåä¸ºdocker0çš„è™šæ‹Ÿç½‘æ¡¥ï¼Œæ­¤ä¸»æœºä¸Šå¯åŠ¨çš„Dockerå®¹å™¨ä¼šè¿æ¥åˆ°è¿™ä¸ªè™šæ‹Ÿç½‘æ¡¥ä¸Šã€‚è™šæ‹Ÿç½‘æ¡¥çš„å·¥ä½œæ–¹å¼å’Œç‰©ç†äº¤æ¢æœºç±»ä¼¼ï¼Œè¿™æ ·ä¸»æœºä¸Šçš„æ‰€æœ‰å®¹å™¨å°±é€šè¿‡äº¤æ¢æœºè¿åœ¨äº†ä¸€ä¸ªäºŒå±‚ç½‘ç»œä¸­ã€‚</p>
<p>ä»docker0å­ç½‘ä¸­åˆ†é…ä¸€ä¸ªIPç»™å®¹å™¨ä½¿ç”¨ï¼Œå¹¶è®¾ç½®docker0çš„IPåœ°å€ä¸ºå®¹å™¨çš„é»˜è®¤ç½‘å…³ã€‚åœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€å¯¹è™šæ‹Ÿç½‘å¡veth pairè®¾å¤‡ï¼ŒDockerå°†veth pairè®¾å¤‡çš„ä¸€ç«¯æ”¾åœ¨æ–°åˆ›å»ºçš„å®¹å™¨ä¸­ï¼Œå¹¶å‘½åä¸ºeth0ï¼ˆå®¹å™¨çš„ç½‘å¡ï¼‰ï¼Œå¦ä¸€ç«¯æ”¾åœ¨ä¸»æœºä¸­ï¼Œä»¥vethxxxè¿™æ ·ç±»ä¼¼çš„åå­—å‘½åï¼Œå¹¶å°†è¿™ä¸ªç½‘ç»œè®¾å¤‡åŠ å…¥åˆ°docker0ç½‘æ¡¥ä¸­ã€‚å¯ä»¥é€šè¿‡brctl showå‘½ä»¤æŸ¥çœ‹ã€‚</p>
<p>bridgeæ¨¡å¼æ˜¯dockerçš„é»˜è®¤ç½‘ç»œæ¨¡å¼ï¼Œä¸å†™â€“netå‚æ•°ï¼Œå°±æ˜¯bridgeæ¨¡å¼ã€‚ä½¿ç”¨docker run -pæ—¶ï¼Œdockerå®é™…æ˜¯åœ¨iptablesåšäº†DNATè§„åˆ™ï¼Œå®ç°ç«¯å£è½¬å‘åŠŸèƒ½ã€‚å¯ä»¥ä½¿ç”¨iptables -t nat -vnLæŸ¥çœ‹ã€‚</p>
<blockquote>
<p>â€“linkæ¢ç©¶</p>
</blockquote>
<p>å®˜æ–¹å·²ç»ä¸æ¨èä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£ä¸€ä¸‹ã€‚</p>
<p>2ä¸ªå®¹å™¨ä¹‹é—´äº’ç›¸è®¿é—®é€šä¿¡ï¼š<code>docker run &lt;container1-id/name&gt; --link &lt;container2-id/name&gt; &lt;image&gt;</code></p>
<p>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯åŠ¨å®¹å™¨2çš„æ—¶å€™ï¼Œå®¹å™¨ä¾¿å¯ä»¥pingé€šå®¹å™¨1ï¼Œä½†æ˜¯åå‘pingä¸é€šã€‚</p>
<pre><code class="shell"># åˆ›å»ºå®¹å™¨tom1
[root@parak khighness]# docker run -d -p 3356:8080 --name tom1 tomcat:9.0 
dd615d6d2ccb9467aad8ba008ece995588680d849b9f61945b10de5c3475f671
# ä½¿ç”¨--linkåˆ›å»ºå®¹å™¨2
[root@parak khighness]# docker run -d -p 3357:8081 --name tom2 --link tom1  tomcat:9.0 
b2c17969a2cb4407bb1a61a53703a38998a11db01ce516feb70e397b42af6ad3
# tom1ä¸èƒ½pingé€štom2
[root@parak khighness]# docker exec -it tom1 ping tom2
ping: tom2: Name or service not known
# tom2å¯ä»¥pingé€štom1
[root@parak khighness]# docker exec -it tom2 ping tom1
PING tom1 (172.17.0.4) 56(84) bytes of data.
64 bytes from tom1 (172.17.0.4): icmp_seq=1 ttl=64 time=0.161 ms
64 bytes from tom1 (172.17.0.4): icmp_seq=2 ttl=64 time=0.108 ms
64 bytes from tom1 (172.17.0.4): icmp_seq=3 ttl=64 time=0.122 ms
^C
--- tom1 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 4ms
rtt min/avg/max/mdev = 0.108/0.130/0.161/0.024 ms
# æŸ¥çœ‹tom2å†…éƒ¨çš„hostsæ–‡ä»¶
[root@parak khighness]# docker exec -it tom2 cat /etc/hosts
127.0.0.1    localhost
::1    localhost ip6-localhost ip6-loopback
fe00::0    ip6-localnet
ff00::0    ip6-mcastprefix
ff02::1    ip6-allnodes
ff02::2    ip6-allrouters
172.17.0.4    tom1 dd615d6d2ccb # ==&gt; æ ¹æºï¼šæœ¬è´¨å°±æ˜¯tom2å°±æ˜¯åœ¨æœ¬åœ°é…ç½®äº†tom1çš„åŸŸåIPè§£æã€‚
172.17.0.5    b2c17969a2cb</code></pre>
<blockquote>
<p>è‡ªå®šä¹‰ç½‘ç»œ</p>
</blockquote>
<pre><code class="shell"># åˆ›å»ºç½‘ç»œ
[root@parak khighness]# docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet
abaebdc493149a140ee77965274885adea3882bf117c4f8e61e4034730c3b890
# æŸ¥çœ‹ç½‘ç»œ
[root@parak khighness]# docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
4399361ba4a9        bridge              bridge              local
65f0ec2bfb42        host                host                local
abaebdc49314        mynet               bridge              local
feab1dfce431        none                null                local
# è¯¦ç»†ä¿¡æ¯
[root@parak khighness]# docker network inspect mynet 
[
    &#123;
        &quot;Name&quot;: &quot;mynet&quot;,
        &quot;Id&quot;: &quot;abaebdc493149a140ee77965274885adea3882bf117c4f8e61e4034730c3b890&quot;,
        &quot;Created&quot;: &quot;2020-12-10T16:12:08.563828418+08:00&quot;,
        &quot;Scope&quot;: &quot;local&quot;,
        &quot;Driver&quot;: &quot;bridge&quot;,
        &quot;EnableIPv6&quot;: false,
        &quot;IPAM&quot;: &#123;
            &quot;Driver&quot;: &quot;default&quot;,
            &quot;Options&quot;: &#123;&#125;,
            &quot;Config&quot;: [
                &#123;
                    &quot;Subnet&quot;: &quot;192.168.0.0/16&quot;,
                    &quot;Gateway&quot;: &quot;192.168.0.1&quot;
                &#125;
            ]
        &#125;,
        &quot;Internal&quot;: false,
        &quot;Attachable&quot;: false,
        &quot;Ingress&quot;: false,
        &quot;ConfigFrom&quot;: &#123;
            &quot;Network&quot;: &quot;&quot;
        &#125;,
        &quot;ConfigOnly&quot;: false,
        &quot;Containers&quot;: &#123;&#125;,
        &quot;Options&quot;: &#123;&#125;,
        &quot;Labels&quot;: &#123;&#125;
    &#125;
]
# åœ¨mynetä¸‹å¯åŠ¨tomcat1
[root@parak khighness]# docker run -d -it -p 8080:3355 --net mynet --name mynet-tom1 tomcat:9.0 
4d799757f01f560af7fd44d610b7fdabd1e0f66ef528bf1259f09242bddbb636
# åœ¨mynetä¸‹å¯åŠ¨tomcat2
[root@parak khighness]# docker run -d -it -p 8081:3356 --net mynet --name mynet-tom2 tomcat:9.0 
15c045f96d5b7b2ee2e470cb69e5b1f86511929f7ed05ed8f20db26ef4b975af
# ä½¿ç”¨mynet-tom2 ping mynet-tom1
[root@parak khighness]# docker exec -it mynet-tom2 ping mynet-tom1
PING mynet-tom1 (192.168.0.2) 56(84) bytes of data.
64 bytes from mynet-tom1.mynet (192.168.0.2): icmp_seq=1 ttl=64 time=0.068 ms
64 bytes from mynet-tom1.mynet (192.168.0.2): icmp_seq=2 ttl=64 time=0.042 ms
64 bytes from mynet-tom1.mynet (192.168.0.2): icmp_seq=3 ttl=64 time=0.055 ms
--- mynet-tom1 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 4ms
rtt min/avg/max/mdev = 0.042/0.055/0.068/0.010 ms
# ä½¿ç”¨mynet-tom1 ping mynet-tom2
[root@parak khighness]# docker exec -it mynet-tom1 ping mynet-tom2
PING mynet-tom2 (192.168.0.3) 56(84) bytes of data.
64 bytes from mynet-tom2.mynet (192.168.0.3): icmp_seq=1 ttl=64 time=0.036 ms
64 bytes from mynet-tom2.mynet (192.168.0.3): icmp_seq=2 ttl=64 time=0.048 ms
64 bytes from mynet-tom2.mynet (192.168.0.3): icmp_seq=3 ttl=64 time=0.058 ms
--- mynet-tom2 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2ms
rtt min/avg/max/mdev = 0.036/0.047/0.058/0.010 ms</code></pre>
<p>è‡ªå®šä¹‰ç½‘ç»œè‡ªåŠ¨ç»´æŠ¤å¥½å®¹å™¨çš„ç½‘ç»œå…³ç³»ï¼</p>
<blockquote>
<p>ç½‘ç»œè¿é€š</p>
</blockquote>
<pre><code class="shell"># åœ¨Docker0ç½‘ç»œå¯åŠ¨tomcat
[root@parak khighness]# docker run -d -it -p 8082:3357 --name tom1 tomcat:9.0 
0344f04baab2eaeaac0118dac7a93d8b2d77946636c76ed3bde804cbeda836be
# æµ‹è¯•tom1 ping mynetâ€”tom1
[root@parak khighness]# docker exec tom1 ping mynet-tom1
ping: mynet-tom1: Name or service not known
# è¿é€šmynet - tom1
[root@parak khighness]# docker network connect mynet tom1 
# æŸ¥çœ‹mynet1çš„è¯¦ç»†ä¿¡æ¯
[root@parak khighness]# docker inspect mynet
[
    &#123;
        &quot;Name&quot;: &quot;mynet&quot;,
        &quot;Id&quot;: &quot;abaebdc493149a140ee77965274885adea3882bf117c4f8e61e4034730c3b890&quot;,
        &quot;Created&quot;: &quot;2020-12-10T16:12:08.563828418+08:00&quot;,
        &quot;Scope&quot;: &quot;local&quot;,
        &quot;Driver&quot;: &quot;bridge&quot;,
        &quot;EnableIPv6&quot;: false,
        &quot;IPAM&quot;: &#123;
            &quot;Driver&quot;: &quot;default&quot;,
            &quot;Options&quot;: &#123;&#125;,
            &quot;Config&quot;: [
                &#123;
                    &quot;Subnet&quot;: &quot;192.168.0.0/16&quot;,
                    &quot;Gateway&quot;: &quot;192.168.0.1&quot;
                &#125;
            ]
        &#125;,
        &quot;Internal&quot;: false,
        &quot;Attachable&quot;: false,
        &quot;Ingress&quot;: false,
        &quot;ConfigFrom&quot;: &#123;
            &quot;Network&quot;: &quot;&quot;
        &#125;,
        &quot;ConfigOnly&quot;: false,
        &quot;Containers&quot;: &#123;
            # å‘ç°mynetå°†tom1æ”¾åˆ°äº†mynetç½‘ç»œä¸‹ï¼Œå³ä¸€ä¸ªå®¹å™¨ï¼Œä¸¤ä¸ªIP
            &quot;0344f04baab2eaeaac0118dac7a93d8b2d77946636c76ed3bde804cbeda836be&quot;: &#123;
                &quot;Name&quot;: &quot;tom1&quot;,
                &quot;EndpointID&quot;: &quot;8911ad05a9b0d7d0effbf50c82659f36b82d21e18f992359b09494073dddd969&quot;,
                &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:04&quot;,
                &quot;IPv4Address&quot;: &quot;192.168.0.4/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            &#125;,
            &quot;15c045f96d5b7b2ee2e470cb69e5b1f86511929f7ed05ed8f20db26ef4b975af&quot;: &#123;
                &quot;Name&quot;: &quot;mynet-tom2&quot;,
                &quot;EndpointID&quot;: &quot;907f16284e90be0d880a999b29210d1cd82adb2c79b4179eeb1d70d75130362a&quot;,
                &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:03&quot;,
                &quot;IPv4Address&quot;: &quot;192.168.0.3/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            &#125;,
            &quot;4d799757f01f560af7fd44d610b7fdabd1e0f66ef528bf1259f09242bddbb636&quot;: &#123;
                &quot;Name&quot;: &quot;mynet-tom1&quot;,
                &quot;EndpointID&quot;: &quot;6529ef4fc05dffe65fe875fdf15f2f4a61665c4d969767db94dd828baf88b323&quot;,
                &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:02&quot;,
                &quot;IPv4Address&quot;: &quot;192.168.0.2/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            &#125;
        &#125;,
        &quot;Options&quot;: &#123;&#125;,
        &quot;Labels&quot;: &#123;&#125;
    &#125;
]
# å†æ¬¡æµ‹è¯•tom1 ping mynetâ€”tom1
[root@parak khighness]# docker exec -it tom1 ping mynet-tom1
PING mynet-tom1 (192.168.0.2) 56(84) bytes of data.
64 bytes from mynet-tom1.mynet (192.168.0.2): icmp_seq=1 ttl=64 time=0.097 ms
64 bytes from mynet-tom1.mynet (192.168.0.2): icmp_seq=2 ttl=64 time=0.052 ms
64 bytes from mynet-tom1.mynet (192.168.0.2): icmp_seq=3 ttl=64 time=0.053 ms
--- mynet-tom1 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 3ms
rtt min/avg/max/mdev = 0.052/0.067/0.097/0.022 ms</code></pre>
<br>

<h2 id="ğŸ’ Redisé›†ç¾¤éƒ¨ç½²"><a href="#ğŸ’ Redisé›†ç¾¤éƒ¨ç½²" class="headerlink" title="ğŸ’ Redisé›†ç¾¤éƒ¨ç½²"></a>ğŸ’ Redisé›†ç¾¤éƒ¨ç½²</h2><blockquote>
<p>shellè„šæœ¬</p>
</blockquote>
<pre><code class="shell"># åˆ›å»ºç½‘å¡
docker network create redis --subnet 172.38.0.0/16

# é€šè¿‡è„šæœ¬åˆ›å»ºå…­ä¸ªredisé…ç½®
for port in $(seq 1 6); \
do \
mkdir -p /mydata/redis/node-$&#123;port&#125;/conf
touch /mydata/redis/node-$&#123;port&#125;/conf/redis.conf
cat &lt;&lt; EOF &gt;&gt;/mydata/redis/node-$&#123;port&#125;/conf/redis.conf
port 6379
bind 0.0.0.0
cluster-enabled yes
cluster-config-file nodes.conf
cluster-node-timeout 5000
cluster-announce-ip 172.38.0.1$&#123;port&#125;
cluster-announce-port 6379
cluster-announce-bus-port 16379
appendonly yes
EOF
done

# è¿è¡Œredis
for port in $(seq 1 6); \
do
docker run -p 637$&#123;port&#125;:6379 -p 1637$&#123;port&#125;:16379 --name redis-$&#123;port&#125; \
-v /mydata/redis/node-$&#123;port&#125;/data:/data \
-v /mydata/redis/node-$&#123;port&#125;/conf/redis.conf:/etc/redis/redis.conf \
-d --net redis --ip 172.38.0.1$&#123;port&#125; redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf
done

# è¿›å…¥redis-1
docker exec -it redis-1 /bin/sh
# æ­å»ºé›†ç¾¤
redis-cli --cluster create 172.38.0.11:6379 172.38.0.12:6379 172.38.0.13:6379 172.38.0.14:6379 172.38.0.15:6379 172.38.0.16:6379 

# åœæ­¢é›†ç¾¤
for port in $(seq 1 6); \
do
docker stop redis-$&#123;port&#125; 
done

# å¯åŠ¨é›†ç¾¤
for port in $(seq 1 6); \
do 
docker start redis-$&#123;port&#125; 
done</code></pre>
<br>

<h2 id="ğŸ’¨SpringBootæµ‹è¯•"><a href="#ğŸ’¨SpringBootæµ‹è¯•" class="headerlink" title="ğŸ’¨SpringBootæµ‹è¯•"></a>ğŸ’¨SpringBootæµ‹è¯•</h2><blockquote>
<p>æ­¥éª¤</p>
</blockquote>
<ul>
<li>æ„å»ºSpringBooté¡¹ç›®</li>
<li>æ‰“åŒ…webåº”ç”¨</li>
<li>ç¼–å†™dockerfile</li>
<li>æ„å»ºé•œåƒ</li>
<li>å‘å¸ƒè¿è¡Œ</li>
</ul>
<blockquote>
<p>ç¼–å†™Controller</p>
</blockquote>
<pre><code class="java">@RestController
public class HelloController &#123;
    @GetMapping(&quot;/hello/&#123;name&#125;&quot;)
    public String sayHello(@PathVariable(&quot;name&quot;) String name) &#123;
        return &quot;Hello, &quot; + name + &quot;\n\n&quot; + &quot; -from KHighness&quot;;
    &#125;
&#125;</code></pre>
<blockquote>
<p>é€šè¿‡mavençš„packageæ‰“åŒ…</p>
</blockquote>
<pre><code class="shell">[INFO] Scanning for projects...
[INFO] 
[INFO] --------------------------&lt; top.parak:hello &gt;---------------------------
[INFO] Building hello 1.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] --- maven-resources-plugin:3.1.0:resources (default-resources) @ hello ---
[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO] Copying 0 resource
[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ hello ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 2 source files to C:\Users\18236\Desktop\Recent\hello\target\classes
[INFO] --- maven-resources-plugin:3.1.0:testResources (default-testResources) @ hello ---
[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory C:\Users\18236\Desktop\Recent\hello\src\test\resources
[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ hello ---
[INFO] No sources to compile
[INFO] --- maven-surefire-plugin:2.22.2:test (default-test) @ hello ---
[INFO] No tests to run.
[INFO] --- maven-jar-plugin:3.1.2:jar (default-jar) @ hello ---
[INFO] Building jar: C:\Users\18236\Desktop\Recent\hello\target\hello-1.0-SNAPSHOT.jar
[INFO] --- spring-boot-maven-plugin:2.2.5.RELEASE:repackage (repackage) @ hello ---
[INFO] Replacing main artifact with repackaged archive
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  5.534 s
[INFO] Finished at: 2020-12-10T17:54:11+08:00
[INFO] ------------------------------------------------------------------------</code></pre>
<blockquote>
<p>ç¼–å†™Dockerfile</p>
</blockquote>
<pre><code class="shell">FROM java:8

COPY *.jar /app.jar

CMD [&quot;--server.port=8080&quot;]

EXPOSE 8080

ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]</code></pre>
<p>é€šè¿‡Xftpå°†æ„å»ºå¥½çš„jaråŒ…å’ŒDockerFileå‘é€åˆ°è™šæ‹Ÿæœº</p>
<blockquote>
<p>æ„å»ºé•œåƒ</p>
</blockquote>
<pre><code class="shell">[root@parak hello]# docker build -t hello .
Sending build context to Docker daemon   17.6MB
Step 1/5 : FROM java:8
 ---&gt; d23bdf5b1b1b
Step 2/5 : COPY *.jar /app.jar
 ---&gt; 34774df7a107
Step 3/5 : CMD [&quot;--server.port=8080&quot;]
 ---&gt; [Warning] IPv4 forwarding is disabled. Networking will not work.
 ---&gt; Running in 11d95474e047
Removing intermediate container 11d95474e047
 ---&gt; e8b6fa21a3a0
Step 4/5 : EXPOSE 8080
 ---&gt; [Warning] IPv4 forwarding is disabled. Networking will not work.
 ---&gt; Running in 896cc7d50875
Removing intermediate container 896cc7d50875
 ---&gt; b139242b232d
Step 5/5 : ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]
 ---&gt; [Warning] IPv4 forwarding is disabled. Networking will not work.
 ---&gt; Running in 562f3bb605a0
Removing intermediate container 562f3bb605a0
 ---&gt; 1d28463205d5
Successfully built 1d28463205d5
Successfully tagged hello:latest</code></pre>
<blockquote>
<p>è¿è¡Œé•œåƒ</p>
</blockquote>
<pre><code class="shell">[root@parak hello]# docker run -d -it -p 8001:8080 hello
7e19b364789de18c736c51e5c84d611e7474d3a733f188220dfd7cc011e55729
[root@parak hello]# curl http://192.168.117.155:8001/hello/KKK
Hello, KKK

 -from KHighness</code></pre>
<br>

<h2 id="â­•ç›¸å…³é—®é¢˜"><a href="#â­•ç›¸å…³é—®é¢˜" class="headerlink" title="â­•ç›¸å…³é—®é¢˜"></a>â­•ç›¸å…³é—®é¢˜</h2><blockquote>
<p>è§£å†³é—®é¢˜1: WARNING: IPv4 forwarding is disabled. Networking will not work.</p>
</blockquote>
<pre><code class="shell">$ echo &quot;net.ipv4.ip_forward=1&quot; &gt;&gt;/usr/lib/sysctl.d/00-system.conf
$ systemctl restart network &amp;&amp; systemctl restart docker</code></pre>
<blockquote>
<p>è§£å†³é—®é¢˜2: ä½¿ç”¨é˜¿é‡Œäº‘æœåŠ¡å™¨è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œå¤–éƒ¨IPä¸èƒ½è®¿é—®</p>
</blockquote>
<p>éœ€è¦åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨é…ç½®é˜²ç«å¢™ç›¸å…³ç«¯å£å¯¹å¤–å¼€æ”¾ã€‚</p>
<p>æ¯”å¦‚è·‘ä¸€ä¸ªå¼€æ”¾ç«¯å£ä¸º3333çš„springbootåº”ç”¨éœ€è¦åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨æ§åˆ¶å°çš„é˜²ç«å¢™æ·»åŠ è§„åˆ™:</p>
<img src= "https://cdn.jsdelivr.net/gh/Khighness/cdn/common/loading.gif" data-lazy-src="/posts/f5f9fa9b/image-20201211233834182.png" class="" title="image-20201211233834182">



</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://parak.top">Khighness</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://parak.top/posts/f5f9fa9b">https://parak.top/posts/f5f9fa9b</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"> CC BY-NC-SA 4.0 </a>è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª<a href="https://www.parak.top">ç‚’èœKæ®¿ä¸‹</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docker/">Docker</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Khighness/cdn/top/bg-14.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> æ‰“èµ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Khighness/cdn/avatar/wepay.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="https://cdn.jsdelivr.net/gh/Khighness/cdn/avatar/wepay.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Khighness/cdn/avatar/alipay.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="https://cdn.jsdelivr.net/gh/Khighness/cdn/avatar/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/c24675b4/"><img class="prev-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/Khighness/cdn/top/bg-15.jpg" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/Khighness/cdn/common/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">MySQL</div></div></a></div><div class="next-post pull-right"><a href="/posts/33422a09/"><img class="next-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/Khighness/cdn/top/bg-13.jpg" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/Khighness/cdn/common/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">è´Ÿè·ç¦»</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div><div id="comment-switch"><span class="first-comment">Twikoo</span><span class="switch-btn"></span><span class="second-comment">Valine</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%96%E6%A6%82%E8%BF%B0"><span class="toc-text">ğŸ“–æ¦‚è¿°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%A8%E5%AE%89%E8%A3%85"><span class="toc-text">ğŸ”¨å®‰è£…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%9A%80%E5%8E%9F%E7%90%86"><span class="toc-text">ğŸš€åŸç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%B0%E5%91%BD%E4%BB%A4"><span class="toc-text">ğŸ”°å‘½ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3%E5%B8%AE%E5%8A%A9%E5%91%BD%E4%BB%A4"><span class="toc-text">1ï¸âƒ£å¸®åŠ©å‘½ä»¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4"><span class="toc-text">2ï¸âƒ£é•œåƒå‘½ä»¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%B8%8F%E2%83%A3%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">3ï¸âƒ£å®¹å™¨å‘½ä»¤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%B1%E7%BB%83%E4%B9%A0"><span class="toc-text">ğŸ”±ç»ƒä¹ </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8C%A0-%E5%AE%89%E8%A3%85Nginx"><span class="toc-text">ğŸŒ  å®‰è£…Nginx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8C%A0-%E5%AE%89%E8%A3%85Tomcat"><span class="toc-text">ğŸŒ  å®‰è£…Tomcat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8C%A0%E5%AE%89%E8%A3%85es-kibana"><span class="toc-text">ğŸŒ å®‰è£…es + kibana</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%88%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-text">ğŸ“ˆå¯è§†åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%91DockerFile"><span class="toc-text">ğŸ“‘DockerFile</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%94%8D%E9%95%9C%E5%83%8F"><span class="toc-text">ğŸ”é•œåƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8C%80%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-text">ğŸŒ€å®¹å™¨æ•°æ®å·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8C%90Docker%E7%BD%91%E7%BB%9C"><span class="toc-text">ğŸŒDockerç½‘ç»œ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%B8%8F%E2%83%A3host%E6%A8%A1%E5%BC%8F"><span class="toc-text">1ï¸âƒ£hostæ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%B8%8F%E2%83%A3container%E6%A8%A1%E5%BC%8F"><span class="toc-text">2ï¸âƒ£containeræ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%B8%8F%E2%83%A3none%E6%A8%A1%E5%BC%8F"><span class="toc-text">3ï¸âƒ£noneæ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%B8%8F%E2%83%A3bridge%E6%A8%A1%E5%BC%8F"><span class="toc-text">4ï¸âƒ£bridgeæ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%92%A0Redis%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2"><span class="toc-text">ğŸ’ Redisé›†ç¾¤éƒ¨ç½²</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%92%A8SpringBoot%E6%B5%8B%E8%AF%95"><span class="toc-text">ğŸ’¨SpringBootæµ‹è¯•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%AD%95%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98"><span class="toc-text">â­•ç›¸å…³é—®é¢˜</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/Khighness/cdn/common/footer.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Khighness</div><div class="footer_custom_text"><a href="https://www.foreverblog.cn/" target="_blank" > <img src="https://img.foreverblog.cn/logo_en_default.png" alt="" style="width:auto;height:16px;"> </a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç°¡</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      true && mermaid.init()
    })
  }
}</script><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'hexo-2grv2lyu1131c342',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'hexo-2grv2lyu1131c342',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'Py2eOHzSdrnxKPzKrOJaHJOq-9Nh9j0Va',
      appKey: '9eQhwuCgyshpYKn4rtEhqt4R',
      placeholder: '',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: true,
      serverURLs: '',
      emojiCDN: 'https://cdn.jsdelivr.net/gh/imaegoo/emotion/owo.json',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
      requiredFields: ["nick, mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('/js/Valine.min.js').then(initValine)
}

if ('Twikoo' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[å›¾ç‰‡]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[é“¾æ¥]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[ä»£ç ]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'hexo-2grv2lyu1131c342',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "æ— æ³•è·å–è¯„è®ºï¼Œè¯·ç¡®è®¤ç›¸å…³é…ç½®æ˜¯å¦æ­£ç¡®"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'æ²¡æœ‰è¯„è®º'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>function history_calendar_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>é‚£å¹´ä»Šæ—¥</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>';
                console.log('å·²æŒ‚è½½history_calendar')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // æ— æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // æœ‰æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            history_calendar_injector_config()
        } </script><script data-pjax  src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><!-- hexo injector body_end end --></body></html>