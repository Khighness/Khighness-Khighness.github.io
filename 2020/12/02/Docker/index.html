<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="utf-8">
    
  <meta name="description" content="Kæ®¿">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    Docker |  Kæ®¿
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/k.ico">
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

  
  

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'ParaK', 'auto');
ga('send', 'pageview');

</script>



  
<script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?ParaK";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
</script>


  <!-- å°é¢æ ‡é¢˜é—ªçƒ -->
  <link rel="stylesheet" href="/css/titleFlash.css">
  <!-- æµè§ˆå™¨æç¬‘æ ‡é¢˜ -->
<!--  <script type="text/javascript">
  //
  var OriginTitle = document.title;
  var titleTime;
  document.addEventListener('visibilitychange', function () {
      if (location.href != "https://www.xxxzhy.com/"){//ä¸»é¡µä¸å˜
          if (document.hidden) {
              //$('[rel="icon"]').attr('href', "/funny.ico");
              document.title = '/(ã„’oã„’)/ä½ å¼„ä¸¢äº†XXXZhy';
              clearTimeout(titleTime);
          }else {
              //$('[rel="icon"]').attr('href', "/favicon.ico");
              document.title = '(à¸…>Ï‰<*à¸…) å™«åˆå¥½å•¦~' + OriginTitle;
              titleTime = setTimeout(function () {
                  document.title = OriginTitle;
              }, 2000);
          }
      }
  });
  </script> -->
  <!-- ç™¾åº¦è‡ªåŠ¨æ¨é€ -->
  <script>
  (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();
  </script>
<link rel="alternate" href="/atom.xml" title="Khighness" type="application/atom+xml">
</head>

<body>



  <div id="app">
    
      <canvas class="fireworks"></canvas>
      <style>
        .fireworks {
          position: fixed;
          left: 0;
          top: 0;
          z-index: 99999;
          pointer-events: none;
        }
      </style>
      
      
    <main class="content on">
      <section class="outer">
  <article id="post-Docker" class="article article-type-post" itemscope="" itemprop="blogPost" data-scroll-reveal="">
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Docker
</h1>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/12/02/Docker/" class="article-date">
  <time datetime="2020-12-01T16:00:00.000Z" itemprop="datePublished">2020-12-02</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> å­—æ•°ç»Ÿè®¡:</span>
            <span class="post-count">9.1k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> é˜…è¯»æ—¶é•¿â‰ˆ</span>
            <span class="post-count">46 åˆ†é’Ÿ</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><center>
    <font face="Kristen ITC" color="#555555" size="3">ğŸ’¤ Khighness ğŸ’¤</font><br>
</center>



<h2 id="ğŸ“–æ¦‚è¿°"><a href="#ğŸ“–æ¦‚è¿°" class="headerlink" title="ğŸ“–æ¦‚è¿°"></a>ğŸ“–æ¦‚è¿°</h2>

<blockquote>
<p>æ•…äº‹</p>
</blockquote>
<p>2010å¹´ï¼Œå‡ ä¸ªæ IT çš„å¹´è½»äººï¼Œåœ¨ç¾å›½æ—§é‡‘å±±æˆç«‹äº†ä¸€å®¶åå« <code>dotCloud </code>çš„å…¬å¸ã€‚<code>dotCloud </code>çš„å¹³å°å³æœåŠ¡ï¼ˆPlatform-as-a-Serviceï¼‰æä¾›å•†ã€‚åº•å±‚æŠ€æœ¯ä¸Šï¼Œ<code>dotCloud</code> å¹³å°åˆ©ç”¨äº†<code>Linux</code>çš„ <code>LXC </code>å®¹å™¨æŠ€æœ¯ã€‚ä¸ºäº†æ–¹ä¾¿åˆ›å»ºå’Œç®¡ç†è¿™äº›å®¹å™¨ï¼Œ<code>dotCloud </code>åŸºäº Google å…¬å¸æ¨å‡ºçš„ <code>Go </code>è¯­è¨€å¼€å‘äº†ä¸€å¥—å†…éƒ¨å·¥å…·ï¼Œä¹‹åè¢«å‘½åä¸º <code>Docker</code>ã€‚<code>Docker </code>å°±æ˜¯è¿™æ ·è¯ç”Ÿçš„ã€‚</p>
<p>2013å¹´çš„åç«¯æŠ€æœ¯é¢†åŸŸå·²ç»å¤ªä¹…æ²¡æœ‰å‡ºç°è®©äººæŒ¯å¥‹çš„ä¸œè¥¿äº†ã€‚å½“ç„¶<code>Docker</code>åœ¨å‘è¡Œä¹‹åä¹Ÿæ²¡ç”¨å¼•èµ·è¡Œä¸šçš„å…³æ³¨ã€‚åœ¨å¼€æºä¹‹åæ‰çˆ†ç«ã€‚</p>
<p><code>Docker</code>å®šä¹‰å®¹å™¨æŠ€æœ¯æ ‡ç –ä½¿å¾—å®¹å™¨æŠ€æœ¯çš„è½åœ°å˜å¾—ååˆ†ç®€å•ï¼Œåº”ç”¨å¯ä»¥ç¨³å®šä¾¿æºçš„è¿è¡Œåœ¨å®¹å™¨ä¸­ã€‚</p>
<blockquote>
<p>ç‰¹ç‚¹</p>
</blockquote>
<ul>
<li><strong>æ›´å¿«é€Ÿçš„åº”ç”¨äº¤ä»˜å’Œéƒ¨ç½²</strong></li>
<li><strong>æ›´ä¾¿æ·çš„å‡çº§å’Œæ‰©ç¼©å®¹</strong></li>
<li><strong>æ›´é«˜æ•ˆçš„è®¡ç®—èµ„æºåˆ©ç”¨</strong></li>
<li><strong>æ›´ç®€å•çš„ç³»ç»Ÿè¿ç»´</strong></li>
</ul>
<blockquote>
<p>æ¶æ„</p>
</blockquote>
<img src="/2020/12/02/Docker/Docker%E6%9E%B6%E6%9E%84.jpg" class="" title="Docker">

<p><strong>é•œåƒï¼ˆimageï¼‰ï¼š</strong> ç›¸å½“äºä¸€ä¸ªæ¨¡æ¿ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ¨¡æ¿æ¥åˆ›å»ºå®¹å™¨æœåŠ¡</p>
<p><strong>å®¹å™¨ï¼ˆcontainerï¼‰ï¼š</strong> ç‹¬ç«‹è¿è¡Œä¸€ä¸ªæˆ–è€…ä¸€ä¸ªç»„åº”ç”¨</p>
<p><strong>ä»“åº“ï¼ˆrepositoryï¼‰ï¼š</strong> å­˜æ”¾é•œåƒçš„åœ°æ–¹</p>
<h2 id="ğŸ”¨å®‰è£…"><a href="#ğŸ”¨å®‰è£…" class="headerlink" title="ğŸ”¨å®‰è£…"></a>ğŸ”¨å®‰è£…</h2><blockquote>
<p>å®˜æ–¹æ–‡æ¡£</p>
</blockquote>
<p>CentOS 7å®‰è£…ï¼š<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/centos/">https://docs.docker.com/engine/install/centos/</a></p>
<blockquote>
<p>å¸è½½æ—§ç‰ˆæœ¬</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum remove docker \</span></span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>è®¾ç½®å­˜å‚¨åº“</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install -y yum-utils</span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>æ›´æ¢é•œåƒæº</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>æ›´æ–°YUMåŒ…</p>
<p>æ›´æ–°YUMç´¢å¼•</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum update</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum makecache fast</span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>å®‰è£…dockerå¼•æ“å’Œå®¹å™¨</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install docker-ce docker-ce-cli containerd.io</span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>å¯åŠ¨Dockerå¹¶æµ‹è¯•hello-world</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl start docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo docker run hello-world</span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>å¸è½½æ–¹å¼</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum remove docker-ce docker-ce-cli containerd.io</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo rm -rf /var/lib/docker</span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>é•œåƒåŠ é€Ÿ</p>
</blockquote>
<p>1ï¸âƒ£ä½¿ç”¨é˜¿é‡Œé•œåƒåŠ é€Ÿå™¨</p>
<img src="/2020/12/02/Docker/image-20201206122604398.png" class="" title="image-20201206122604398">

<p>2ï¸âƒ£ä½¿ç”¨ä¸­ç§‘å¤§æˆ–è€…ç½‘æ˜“é•œåƒåŠ é€Ÿ</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ·»åŠ daemon.json</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> touch /etc/docker/daemon.json</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å†™å…¥å†…å®¹å¹¶ä¿å­˜</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç§‘å¤§æº: https://docker.mirrors.ustc.edu.cn/</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç½‘æ˜“æºï¼šhttp://hub-mirror.c.163.com</span></span><br><span class="line">{</span><br><span class="line">  "registry-mirrors": ["https://docker.mirrors.ustc.edu.cn/"]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡å¯Dicker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl restart docker</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="ğŸš€åŸç†"><a href="#ğŸš€åŸç†" class="headerlink" title="ğŸš€åŸç†"></a>ğŸš€åŸç†</h2><blockquote>
<p>docker runçš„æ‰§è¡Œæµç¨‹</p>
</blockquote>
<img src="Docker/image-20201203233730702.png" alt="image-20201203233730702" style="zoom:88%;">

<blockquote>
<p>Dockerçš„å·¥ä½œ</p>
</blockquote>
<p>Dockeræ˜¯ä¸€ä¸ªClient-Serverç»“æ„çš„ç³»ç»Ÿï¼ŒDockerçš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šã€‚é€šè¿‡Socketä»å®¢æˆ·ç«¯è®¿é—®ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆDockeræ¯”VMå¿«ï¼Ÿ</strong></p>
<img src="/2020/12/02/Docker/image-20201204003500802.png" class="" title="image-20201204003500802">

<p>1ã€Dockeræœ‰æ¯”è™šæ‹Ÿæœºæ›´å°‘çš„æŠ½è±¡å±‚ã€‚Dockerä¸éœ€è¦Hypervisorå®ç°ç¡¬ä»¶èµ„æºè™šæ‹ŸåŒ–ï¼Œè¿è¡Œåœ¨Dockerå®¹å™¨ä¸Šçš„ç¨‹åºç›´æ¥ä½¿ç”¨çš„æ˜¯å®é™…ç‰©ç†æœºçš„ç¡¬ä»¶èµ„æºï¼Œå› æ­¤åœ¨CPUã€å†…å­˜åˆ©ç”¨ç‡ä¸ŠDockerå°†ä¼šåœ¨æ•ˆç‡ä¸Šæœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ã€‚</p>
<p>2ã€Dockeråˆ©ç”¨çš„æ˜¯å®¿ä¸»æœºçš„å†…æ ¸ï¼Œè€Œä¸éœ€è¦Guest OSã€‚å› æ­¤åˆ›å»ºä¸€ä¸ªå®¹å™¨æ—¶ï¼Œä¸éœ€è¦å’Œè™šæ‹Ÿæœºä¸€æ ·é‡æ–°åŠ è½½ä¸€ä¸ªæ“ä½œç³»ç»Ÿå†…æ ¸ã€‚ä»è€Œé¿å…å¼•å¯»ã€åŠ è½½æ“ä½œç³»ç»Ÿå†…æ ¸è¿”å›æ—¶è€—æ—¶è€—èµ„æºçš„è¿‡ç¨‹ï¼Œå½“æ–°å»ºä¸€ä¸ªè™šæ‹Ÿæœºæ—¶ï¼Œè™šæ‹Ÿæœºè½¯ä»¶éœ€è¦åŠ è½½Guest OSï¼Œè¿”å›æ–°å»ºè¿‡ç¨‹æ˜¯åˆ†é’Ÿçº§åˆ«çš„ã€‚è€Œæ–°å»ºä¸€ä¸ªDockerå®¹å™¨åªéœ€è¦å‡ ç§’é’Ÿã€‚</p>
<p>3ã€Dockerä¸VMç›¸æ¯”ï¼š</p>
<ul>
<li>Dockerçµæ´»ï¼ŒVMç¬¨é‡</li>
<li>Dockerå­˜å‚¨çš„é•œåƒå°ï¼Œä¾¿äºå­˜å‚¨å’Œä¼ è¾“ï¼ŒVMé•œåƒåºå¤§</li>
</ul>
<h2 id="ğŸ”°å‘½ä»¤"><a href="#ğŸ”°å‘½ä»¤" class="headerlink" title="ğŸ”°å‘½ä»¤"></a>ğŸ”°å‘½ä»¤</h2><blockquote>
<p>ğŸŒå®˜æ–¹æ–‡æ¡£</p>
</blockquote>
<p>Command-line referenceï¼š<a target="_blank" rel="noopener" href="https://docs.docker.com/reference/">https://docs.docker.com/reference/</a></p>
<img src="/2020/12/02/Docker/image-20201204225734966.png" class="" title="image-20201204225734966">



<h3 id="1ï¸âƒ£å¸®åŠ©å‘½ä»¤"><a href="#1ï¸âƒ£å¸®åŠ©å‘½ä»¤" class="headerlink" title="1ï¸âƒ£å¸®åŠ©å‘½ä»¤"></a>1ï¸âƒ£å¸®åŠ©å‘½ä»¤</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker version    <span class="comment"># æ˜¾ç¤ºDockerç‰ˆæœ¬ä¿¡æ¯</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker info       <span class="comment"># æ˜¾ç¤ºDockerç³»ç»Ÿä¿¡æ¯</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker --<span class="built_in">help</span>     <span class="comment"># Dockerå‘½ä»¤å¸®åŠ©ä¿¡æ¯</span></span></span><br></pre></td></tr></tbody></table></figure>



<h3 id="2ï¸âƒ£é•œåƒå‘½ä»¤"><a href="#2ï¸âƒ£é•œåƒå‘½ä»¤" class="headerlink" title="2ï¸âƒ£é•œåƒå‘½ä»¤"></a>2ï¸âƒ£é•œåƒå‘½ä»¤</h3><blockquote>
<p>æŸ¥çœ‹é•œåƒ</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker images</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯é€‰é¡¹</span></span><br><span class="line">-a, --all             # åˆ—å‡ºæ‰€æœ‰é•œåƒ</span><br><span class="line">    --digests         # æ˜¾ç¤ºé•œåƒçš„æ‘˜è¦ä¿¡æ¯</span><br><span class="line">-q, --quiet           # åªæ˜¾ç¤ºé•œåƒçš„ID</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿è¡Œ</span></span><br><span class="line">[root@parak khighness]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">hello-world         latest              bf756fb1ae65        11 months ago       13.3kB</span><br><span class="line"><span class="meta">#</span><span class="bash"> è§£é‡Š</span></span><br><span class="line">REPOSITORY  é•œåƒçš„ä»“åº“æº</span><br><span class="line">TAG         é•œåƒçš„æ ‡ç­¾</span><br><span class="line">IMAGE ID    é•œåƒçš„ID</span><br><span class="line">CREATED     é•œåƒçš„åˆ›å»ºæ—¶é—´</span><br><span class="line">SIZE        é•œåƒçš„å¤§å°</span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>æœç´¢é•œåƒ</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker search &lt;IMAGE&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯é€‰é¡¹</span></span><br><span class="line">--filter=STARS=1000 # é•œåƒçš„STARSå¤§äº1000</span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>ä¸‹è½½é•œåƒ</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker pull &lt;IMAGE&gt;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker pull .io/library/mysql:latest</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœä¸å†™tagï¼Œé»˜è®¤å°±æ˜¯æœ€æ–°çš„</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŒ‡å®šç‰ˆæœ¬ä¸‹è½½</span></span><br><span class="line">[root@parak khighness]# docker pull mysql:8.0.20</span><br><span class="line">8.0.20: Pulling from library/mysql  # åˆ†å±‚ä¸‹è½½</span><br><span class="line">8559a31e96f4: Pull complete </span><br><span class="line">d51ce1c2e575: Pull complete </span><br><span class="line">c2344adc4858: Pull complete </span><br><span class="line">fcf3ceff18fc: Pull complete </span><br><span class="line">16da0c38dc5b: Pull complete </span><br><span class="line">b905d1797e97: Pull complete </span><br><span class="line">4b50d1c6b05c: Pull complete </span><br><span class="line">c75914a65ca2: Pull complete </span><br><span class="line">1ae8042bdd09: Pull complete </span><br><span class="line">453ac13c00a3: Pull complete </span><br><span class="line">9e680cd72f08: Pull complete </span><br><span class="line">a6b5dc864b6c: Pull complete </span><br><span class="line">Digest: sha256:8b7b328a7ff6de46ef96bcf83af048cb00a1c86282bfca0cb119c84568b4caf6</span><br><span class="line">Status: Downloaded newer image for mysql:8.0.20</span><br><span class="line">docker.io/library/mysql:8.0.20</span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>åˆ é™¤é•œåƒ</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> é€šè¿‡é•œåƒIDåˆ é™¤</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker rmi -f &lt;IMAGE ID&gt; ...</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ é™¤æ‰€æœ‰é•œåƒ</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker rmi -f $(docker images -aq)0</span></span><br></pre></td></tr></tbody></table></figure>



<h3 id="3ï¸âƒ£å®¹å™¨å‘½ä»¤"><a href="#3ï¸âƒ£å®¹å™¨å‘½ä»¤" class="headerlink" title="3ï¸âƒ£å®¹å™¨å‘½ä»¤"></a>3ï¸âƒ£å®¹å™¨å‘½ä»¤</h3><blockquote>
<p>ä¸‹è½½ä¸€ä¸ªCentOSé•œåƒæ¥æµ‹è¯•å­¦(å¥—)ä¹ (å¨ƒ)</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@parak khighness]# docker pull centos</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/centos</span><br><span class="line">3c72a8ed6814: Pull complete </span><br><span class="line">Digest: sha256:76d24f3ba3317fa945743bb3746fbaf3a0b752f10b10376960de01da70685fbd</span><br><span class="line">Status: Downloaded newer image for centos:latest</span><br><span class="line">docker.io/library/centos:latest</span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run [å¯é€‰å‚æ•°] &lt;IMAGE&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å‚æ•°è¯´æ˜</span></span><br><span class="line">--name="NAME"   å®¹å™¨åå­—ï¼Œç”¨äºåŒºåˆ†å®¹å™¨</span><br><span class="line">-d              åå°æ–¹å¼è¿è¡Œ</span><br><span class="line">-it             ä½¿ç”¨äº¤äº’æ–¹å¼è¿è¡Œï¼Œè¿›å¦‚å®¹å™¨æŸ¥çœ‹å†…å®¹</span><br><span class="line">-p              æŒ‡å®šå®¹å™¨ç«¯å£  -p 8080:8080</span><br><span class="line">	-p ip:ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</span><br><span class="line">	-p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</span><br><span class="line">	-p å®¹å™¨ç«¯å£</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•ï¼Œå¯åŠ¨å¹¶è¿›å…¥å®¹å™¨</span></span><br><span class="line">[root@parak khighness]# docker run -it centos /bin/bash</span><br><span class="line">[root@e4efa1c507b8 /]# ls</span><br><span class="line">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä»å®¹å™¨ä¸­é€€å›ä¸»æœº</span></span><br><span class="line">[root@e4efa1c507b8 /]# exit</span><br><span class="line">exit</span><br><span class="line">[root@parak khighness]# ls</span><br><span class="line">å…¬å…±  æ¨¡æ¿  è§†é¢‘  å›¾ç‰‡  æ–‡æ¡£  ä¸‹è½½  éŸ³ä¹  æ¡Œé¢</span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>æŸ¥çœ‹å®¹å™¨</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker ps  <span class="comment"># æ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span></span></span><br><span class="line">-a           # æ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨+å†å²è¿è¡Œè¿‡çš„å®¹å™¨</span><br><span class="line">-n=?         # æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„nä¸ªå®¹å™¨</span><br><span class="line">-q           # åªæ˜¾ç¤ºå®¹å™¨çš„ç¼–å·</span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>é€€å‡ºå®¹å™¨</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">exit</span>        </span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>åˆ é™¤å®¹å™¨</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker rm &lt;Container ID/NAME&gt;    <span class="comment"># åˆ é™¤æŒ‡å®šçš„å®¹å™¨ï¼Œä¸èƒ½åˆ é™¤åªåœ¨è¿è¡Œçš„å®¹å™¨</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker rm -f $(docker ps -aq)    <span class="comment"># åˆ é™¤æ‰€æœ‰çš„å®¹å™¨</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker ps -a -q|xargs docker rm  <span class="comment"># åˆ é™¤æ‰€æœ‰çš„å®¹å™¨ </span></span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>å®¹å™¨æ“ä½œ</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker start   &lt;Container ID/NAME&gt;  <span class="comment"># å¯åŠ¨å®¹å™¨ </span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker restart &lt;Container ID/NAME&gt;  <span class="comment"># é‡å¯å®¹å™¨</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker stop    &lt;Container ID/NAME&gt;  <span class="comment"># åœæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">kill</span>    &lt;Container ID/NAME&gt;  <span class="comment"># å¼ºåˆ¶åœæ­¢å½“å‰å®¹å™¨</span></span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>æŸ¥çœ‹æ—¥å¿—</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker logs -tf --tail &lt;n&gt; &lt;Container ID/NAME&gt; <span class="comment"># æ˜¾ç¤ºæŒ‡å®šè¡Œæ•°çš„æ—¥å¿—</span></span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>æŸ¥çœ‹å®¹å™¨ä¸­è¿›ç¨‹ä¿¡æ¯</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker top &lt;Container ID/NAME&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>æŸ¥çœ‹é•œåƒçš„å…ƒæ•°æ®</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker inspect</span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>è¿›å…¥å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it &lt;Container ID&gt; bashShell  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥å®¹å™¨åå¼€å¯ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œå¯ä»¥åœ¨é‡Œé¢æ“ä½œï¼›</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">exec</span>ä¹‹åä¸ä¼šç»ˆç»“å½“å‰å®¹å™¨è¿›ç¨‹</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker attach &lt;Container ID&gt;              </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥å®¹å™¨ä¸­æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">exec</span>ä¹‹åç»ˆç»“å½“å‰å®¹å™¨è¿›ç¨‹</span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>ä»å®¹å™¨æ‹·è´æ–°çš„ä¸œè¥¿åˆ°ä¸»æœº</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¼€å¯CentOSå®¹å™¨</span></span><br><span class="line">[root@parak khighness]# docker start b9ace468ea7d</span><br><span class="line">b9ace468ea7d</span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥CentOSå®¹å™¨</span></span><br><span class="line">[root@parak khighness]# docker attach b9ace468ea7d</span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶</span></span><br><span class="line">[root@b9ace468ea7d /]# cd home/</span><br><span class="line">[root@b9ace468ea7d home]# mkdir document </span><br><span class="line">[root@b9ace468ea7d home]# vi K1.java</span><br><span class="line"><span class="meta">#</span><span class="bash"> é€€å‡ºå®¹å™¨</span></span><br><span class="line">[root@b9ace468ea7d document]# exit</span><br><span class="line">exit</span><br><span class="line"><span class="meta">#</span><span class="bash"> å°†å®¹å™¨æ–‡ä»¶å¤åˆ¶åˆ°ä¸»æœºä¸Š</span></span><br><span class="line">[root@parak khighness]# docker cp b9ace468ea7d:/home/document/K1.java document/</span><br><span class="line">[root@parak khighness]# cd document/</span><br><span class="line">[root@parak document]# ll</span><br><span class="line">æ€»ç”¨é‡ 4</span><br><span class="line">-rw-r--r--. 1 root root 186 12æœˆ  5 11:33 K1.java</span><br></pre></td></tr></tbody></table></figure>



<h2 id="ğŸ”±ç»ƒä¹ "><a href="#ğŸ”±ç»ƒä¹ " class="headerlink" title="ğŸ”±ç»ƒä¹ "></a>ğŸ”±ç»ƒä¹ </h2><h3 id="ğŸŒ -å®‰è£…Nginx"><a href="#ğŸŒ -å®‰è£…Nginx" class="headerlink" title="ğŸŒ  å®‰è£…Nginx"></a>ğŸŒ  å®‰è£…Nginx</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æœç´¢é•œåƒ</span></span><br><span class="line">[root@parak khighness]# docker search nginx</span><br><span class="line">NAME                               DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">nginx                              Official build of Nginx.                        14063               [OK]                </span><br><span class="line">jwilder/nginx-proxy                Automated Nginx reverse proxy for docker conâ€¦   1912                                    [OK]</span><br><span class="line">richarvey/nginx-php-fpm            Container running Nginx + PHP-FPM capable ofâ€¦   795                                     [OK]</span><br><span class="line">linuxserver/nginx                  An Nginx container, brought to you by LinuxSâ€¦   131                                     </span><br><span class="line">jc21/nginx-proxy-manager           Docker container for managing Nginx proxy hoâ€¦   115                                     </span><br><span class="line">tiangolo/nginx-rtmp                Docker image with Nginx using the nginx-rtmpâ€¦   105                                     [OK]</span><br><span class="line">bitnami/nginx                      Bitnami nginx Docker Image                      90                                      [OK]</span><br><span class="line">alfg/nginx-rtmp                    NGINX, nginx-rtmp-module and FFmpeg from souâ€¦   80                                      [OK]</span><br><span class="line">jlesage/nginx-proxy-manager        Docker container for Nginx Proxy Manager        72                                      [OK]</span><br><span class="line">nginxdemos/hello                   NGINX webserver that serves a simple page coâ€¦   63                                      [OK]</span><br><span class="line">nginx/nginx-ingress                NGINX Ingress Controller for Kubernetes         45                                      </span><br><span class="line">privatebin/nginx-fpm-alpine        PrivateBin running on an Nginx, php-fpm &amp; Alâ€¦   42                                      [OK]</span><br><span class="line">nginxinc/nginx-unprivileged        Unprivileged NGINX Dockerfiles                  21                                      </span><br><span class="line">schmunk42/nginx-redirect           A very simple container to redirect HTTP traâ€¦   19                                      [OK]</span><br><span class="line">nginx/nginx-prometheus-exporter    NGINX Prometheus Exporter                       15                                      </span><br><span class="line">centos/nginx-112-centos7           Platform for running nginx 1.12 or building â€¦   15                                      </span><br><span class="line">staticfloat/nginx-certbot          Opinionated setup for automatic TLS certs loâ€¦   14                                      [OK]</span><br><span class="line">raulr/nginx-wordpress              Nginx front-end for the official wordpress:fâ€¦   13                                      [OK]</span><br><span class="line">centos/nginx-18-centos7            Platform for running nginx 1.8 or building nâ€¦   13                                      </span><br><span class="line">mailu/nginx                        Mailu nginx frontend                            8                                       [OK]</span><br><span class="line">bitwarden/nginx                    The Bitwarden nginx web server acting as a râ€¦   7                                       </span><br><span class="line">flashspys/nginx-static             Super Lightweight Nginx Image                   7                                       [OK]</span><br><span class="line">bitnami/nginx-ingress-controller   Bitnami Docker Image for NGINX Ingress Contrâ€¦   6                                       [OK]</span><br><span class="line">wodby/nginx                        Generic nginx                                   1                                       [OK]</span><br><span class="line">ansibleplaybookbundle/nginx-apb    An APB to deploy NGINX                          1                                       [OK]</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸‹è½½é•œåƒ</span></span><br><span class="line">[root@parak khighness]# docker pull nginx</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/nginx</span><br><span class="line">852e50cd189d: Pull complete </span><br><span class="line">571d7e852307: Pull complete </span><br><span class="line">addb10abd9cb: Pull complete </span><br><span class="line">d20aa7ccdb77: Pull complete </span><br><span class="line">8b03f1e11359: Pull complete </span><br><span class="line">Digest: sha256:6b1daa9462046581ac15be20277a7c75476283f969cb3a61c8725ec38d3b01c3</span><br><span class="line">Status: Downloaded newer image for nginx:latest</span><br><span class="line">docker.io/library/nginx:latest</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹é•œåƒ</span></span><br><span class="line">[root@parak khighness]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">nginx               latest              bc9a0695f571        10 days ago         133MB</span><br><span class="line">centos              latest              0d120b6ccaa8        3 months ago        215MB</span><br><span class="line">mysql               8.0.20              be0dbf01a0f3        5 months ago        541MB</span><br><span class="line">hello-world         latest              bf756fb1ae65        11 months ago       13.3kB</span><br><span class="line"><span class="meta">#</span><span class="bash"> åå°å¯åŠ¨80ç«¯å£nginxï¼Œå¯¹å¤–å¼€æ”¾3355ç«¯å£</span></span><br><span class="line">[root@parak khighness]# docker run -d --name nginx1 -p 3355:80 nginx </span><br><span class="line">b6072408f44cd78594f01c95bc63da6baf911f74d62bf232ec42c1cd8b08b4d0</span><br><span class="line">[root@parak khighness]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">b6072408f44c        nginx               "/docker-entrypoint.â€¦"   6 seconds ago       Up 4 seconds        0.0.0.0:3355-&gt;80/tcp   nginx1</span><br><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•ï¼Œå¯ä»¥ç”¨ip:3355åœ¨æµè§ˆå™¨è®¿é—®</span></span><br><span class="line">[root@parak khighness]# curl localhost:3355</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    body {</span><br><span class="line">        width: 35em;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">        font-family: Tahoma, Verdana, Arial, sans-serif;</span><br><span class="line">    }</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;For online documentation and support please refer to</span><br><span class="line">&lt;a href="http://nginx.org/"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class="line">Commercial support is available at</span><br><span class="line">&lt;a href="http://nginx.com/"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>



<h3 id="ğŸŒ -å®‰è£…Tomcat"><a href="#ğŸŒ -å®‰è£…Tomcat" class="headerlink" title="ğŸŒ  å®‰è£…Tomcat"></a>ğŸŒ  å®‰è£…Tomcat</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">[root@parak khighness]# docker pull tomcat:9.0</span><br><span class="line">9.0: Pulling from library/tomcat</span><br><span class="line">756975cb9c7e: Pull complete </span><br><span class="line">d77915b4e630: Pull complete </span><br><span class="line">5f37a0a41b6b: Pull complete </span><br><span class="line">96b2c1e36db5: Pull complete </span><br><span class="line">27a2d52b526e: Pull complete </span><br><span class="line">a867dba77389: Pull complete </span><br><span class="line">0939c055fb79: Pull complete </span><br><span class="line">0b0694ce0ae2: Pull complete </span><br><span class="line">81a5f8099e05: Pull complete </span><br><span class="line">c3d7917d545e: Pull complete </span><br><span class="line">Digest: sha256:a319b10d8729817c7ce0bcc2343a6f97711c7870395019340d96b6aafd6ccbea</span><br><span class="line">Status: Downloaded newer image for tomcat:9.0</span><br><span class="line">docker.io/library/tomcat:9.0</span><br><span class="line"></span><br><span class="line">[root@parak khighness]# docker run -d -p 3355:8080 --name tomcat1 tomcat</span><br><span class="line">48c7de09007af158b13a9bef1f2d2b77bed0c4bc2f93a4887eac427911118a9b</span><br><span class="line">[root@parak khighness]# docker exec -it tomcat1 /bin/bash</span><br><span class="line">root@48c7de09007a:/usr/local/tomcat# ls -al</span><br><span class="line">total 128</span><br><span class="line">drwxr-xr-x. 1 root root    30 Nov 19 06:16 .</span><br><span class="line">drwxr-xr-x. 1 root root    20 Nov 19 06:12 ..</span><br><span class="line">-rw-r--r--. 1 root root 18982 Nov 12 15:41 BUILDING.txt</span><br><span class="line">-rw-r--r--. 1 root root  5409 Nov 12 15:41 CONTRIBUTING.md</span><br><span class="line">-rw-r--r--. 1 root root 57092 Nov 12 15:41 LICENSE</span><br><span class="line">-rw-r--r--. 1 root root  2333 Nov 12 15:41 NOTICE</span><br><span class="line">-rw-r--r--. 1 root root  3257 Nov 12 15:41 README.md</span><br><span class="line">-rw-r--r--. 1 root root  6898 Nov 12 15:41 RELEASE-NOTES</span><br><span class="line">-rw-r--r--. 1 root root 16507 Nov 12 15:41 RUNNING.txt</span><br><span class="line">drwxr-xr-x. 2 root root  4096 Nov 19 06:16 bin</span><br><span class="line">drwxr-xr-x. 1 root root    22 Dec  5 13:15 conf</span><br><span class="line">drwxr-xr-x. 2 root root  4096 Nov 19 06:16 lib</span><br><span class="line">drwxrwxrwx. 1 root root   177 Dec  5 13:15 logs</span><br><span class="line">drwxr-xr-x. 2 root root   134 Nov 19 06:16 native-jni-lib</span><br><span class="line">drwxrwxrwx. 2 root root    30 Nov 19 06:16 temp</span><br><span class="line">drwxr-xr-x. 2 root root     6 Nov 19 06:16 webapps</span><br><span class="line">drwxr-xr-x. 7 root root    81 Nov 12 15:38 webapps.dist</span><br><span class="line">drwxrwxrwx. 2 root root     6 Nov 12 15:35 work</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯ä»¥å‘ç°webappsç›®å½•ä¸ºç©º</span></span><br><span class="line">root@48c7de09007a:/usr/local/tomcat# cd webapps</span><br><span class="line">root@48c7de09007a:/usr/local/tomcat/webapps# ls -l</span><br><span class="line">total 0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å°†webapps.listç›®å½•ä¸‹çš„å†…å®¹æ‹·è´åˆ°webappsä¸‹ï¼Œå†ç”¨æµè§ˆå™¨æµ‹è¯•è®¿é—®</span></span><br><span class="line">root@48c7de09007a:/usr/local/tomcat/webapps# cd ..</span><br><span class="line">root@48c7de09007a:/usr/local/tomcat# cd webapps.dist/</span><br><span class="line">root@48c7de09007a:/usr/local/tomcat/webapps.dist# ls</span><br><span class="line">ROOT  docs  examples  host-manager  manager</span><br><span class="line">root@48c7de09007a:/usr/local/tomcat/webapps.dist# cd ..</span><br><span class="line">root@48c7de09007a:/usr/local/tomcat# cp -r webapps.dist/* webapps/</span><br><span class="line">root@48c7de09007a:/usr/local/tomcat# cd webapps</span><br><span class="line">root@48c7de09007a:/usr/local/tomcat/webapps# ls</span><br><span class="line">ROOT  docs  examples  host-manager  manager</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æµ‹è¯•è®¿é—® <a target="_blank" rel="noopener" href="http://192.168.117.155:3355/">http://192.168.117.155:3355/</a></p>
</blockquote>
<img src="/2020/12/02/Docker/image-20201205214537503.png" class="" title="image-20201205214537503">



<h3 id="ğŸŒ å®‰è£…es-kibana"><a href="#ğŸŒ å®‰è£…es-kibana" class="headerlink" title="ğŸŒ å®‰è£…es + kibana"></a>ğŸŒ å®‰è£…es + kibana</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> --net somenetwork ç½‘ç»œé…ç½®</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -d --name es1 -p 9200:9200 -p 9300:9300 -e <span class="string">"discovery.type=single-node"</span> elasticsearch:7.6.2</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹ä¸»æœºçŠ¶æ€</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> doucker stats</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸‹è½½å¹¶è¿è¡ŒES</span></span><br><span class="line">[root@parak khighness]#  docker run -d --name es1 -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" elasticsearch:7.6.2</span><br><span class="line">Unable to find image 'elasticsearch:7.6.2' locally</span><br><span class="line">7.6.2: Pulling from library/elasticsearch</span><br><span class="line">ab5ef0e58194: Pull complete </span><br><span class="line">c4d1ca5c8a25: Pull complete </span><br><span class="line">941a3cc8e7b8: Pull complete </span><br><span class="line">43ec483d9618: Pull complete </span><br><span class="line">c486fd200684: Pull complete </span><br><span class="line">1b960df074b2: Pull complete </span><br><span class="line">1719d48d6823: Pull complete </span><br><span class="line">Digest: sha256:1b09dbd93085a1e7bca34830e77d2981521a7210e11f11eda997add1c12711fa</span><br><span class="line">Status: Downloaded newer image for elasticsearch:7.6.2</span><br><span class="line">51441d9abfb966c4baa0402ceb99e702f58ec68cd427710a2b8c8043983412e9</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹ä¸»æœºçŠ¶æ€</span></span><br><span class="line">[root@parak khighness]# docker stats</span><br><span class="line">CONTAINER ID    NAME   CPU %   MEM USAGE/LIMIT  MEM %     NET I/O    BLOCK I/O      PIDS</span><br><span class="line">51441d9abfb9    es1   42.74%  495.6MiB/972.4MiB 50.97%    656B/0B   4.76GB/629MB     46</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> åœæ­¢es1</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker stop es1</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ é™¤es1</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker rm es1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> é™åˆ¶å†…å­˜ï¼Œå¯åŠ¨ES</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -d --name es1 -p 9200:9200 -p 9300:9300 -e <span class="string">"discovery.type=single-node"</span> -e ES_JAVA_OPTS=<span class="string">"-Xms64m -Xmx512m"</span> elasticsearch:7.6.2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡æ–°å¯åŠ¨es1</span></span><br><span class="line">[root@parak khighness]# docker run -d --name es1 -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" -e ES_JAVA_OPTS="-Xms64m -Xmx512m" elasticsearch:7.6.2</span><br><span class="line">ca4494f52e5642d5992c49816b636b1858f2e2f5c1aaf38621c76001262e8e4d</span><br><span class="line"><span class="meta">#</span><span class="bash"> å†æ¬¡æŸ¥çœ‹çŠ¶æ€</span></span><br><span class="line">[root@parak khighness]# docker stats</span><br><span class="line">CONTAINER ID    NAME   CPU %   MEM USAGE/LIMIT   MEM %     NET I/O   BLOCK I/O       PIDS</span><br><span class="line">ca4494f52e56    es1    0.68%   357.5MiB/972.4MiB 36.77%    737B/0B   476MB/1.78MB     45</span><br><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•è®¿é—®</span></span><br><span class="line">[root@parak khighness]# curl localhost:9200</span><br><span class="line">{</span><br><span class="line">  "name" : "ca4494f52e56",</span><br><span class="line">  "cluster_name" : "docker-cluster",</span><br><span class="line">  "cluster_uuid" : "aDKZlZW_T7Ss3Dr0CXZQlQ",</span><br><span class="line">  "version" : {</span><br><span class="line">    "number" : "7.6.2",</span><br><span class="line">    "build_flavor" : "default",</span><br><span class="line">    "build_type" : "docker",</span><br><span class="line">    "build_hash" : "ef48eb35cf30adf4db14086e8aabd07ef6fb113f",</span><br><span class="line">    "build_date" : "2020-03-26T06:34:37.794943Z",</span><br><span class="line">    "build_snapshot" : false,</span><br><span class="line">    "lucene_version" : "8.4.0",</span><br><span class="line">    "minimum_wire_compatibility_version" : "6.8.0",</span><br><span class="line">    "minimum_index_compatibility_version" : "6.0.0-beta1"</span><br><span class="line">  },</span><br><span class="line">  "tagline" : "You Know, for Search"</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>





<h2 id="ğŸ“ˆå¯è§†åŒ–"><a href="#ğŸ“ˆå¯è§†åŒ–" class="headerlink" title="ğŸ“ˆå¯è§†åŒ–"></a>ğŸ“ˆå¯è§†åŒ–</h2><p>Y1S1å¯è§†åŒ–é¢æ¿çš„å‰ç«¯å†™çš„çœŸå¥½çœ‹ï¼Œæˆ‘çˆ±äº†ã€‚</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…è¿è¡Œ</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -d -p 8088:9000 --name=pt --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=<span class="literal">true</span> portainer/portainer</span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>è®¿é—®æµ‹è¯• <a target="_blank" rel="noopener" href="http://192.168.117.155:8088/">http://192.168.117.155:8088/</a></p>
</blockquote>
<img src="Docker/image-20201205232646075.png" alt="image-20201205232646075">

<img src="Docker/image-20201206105337297.png" alt="image-20201206105337297">





<h2 id="ğŸ“‘DockerFile"><a href="#ğŸ“‘DockerFile" class="headerlink" title="ğŸ“‘DockerFile"></a>ğŸ“‘DockerFile</h2><p>DockerFileå°±æ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ„å»ºæ–‡ä»¶-å‘½ä»¤è„šæœ¬ã€‚</p>
<blockquote>
<p>å‘½ä»¤</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">å‘½ä»¤</th>
<th align="center">æè¿°</th>
<th align="center">ç†è§£</th>
</tr>
</thead>
<tbody><tr>
<td align="center">FROM</td>
<td align="center">æŒ‡å®šåŸºç¡€é•œåƒ</td>
<td align="center">å…¬å¸çš„çˆ¶å…¬å¸</td>
</tr>
<tr>
<td align="center">MAINTAINER</td>
<td align="center">æŒ‡å®šç»´æŠ¤è€…ä¿¡æ¯</td>
<td align="center">å…¬å¸æ³¨å†Œä¿¡æ¯</td>
</tr>
<tr>
<td align="center">RUN</td>
<td align="center">æŠŠå‘½ä»¤å‰é¢åŠ ä¸ŠRUNå³å¯</td>
<td align="center">å…¬å¸æ³¨å†Œæµç¨‹</td>
</tr>
<tr>
<td align="center">ADD</td>
<td align="center">COPYæ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨è§£å‹</td>
<td align="center">å…¬å¸æ³¨å†Œèµ„é‡‘</td>
</tr>
<tr>
<td align="center">WORKDIR</td>
<td align="center">è®¾ç½®å½“å‰å·¥ä½œç›®å½•</td>
<td align="center">å…¬å¸å¤§æ¥¼ä»“åº“</td>
</tr>
<tr>
<td align="center">VOLUMN</td>
<td align="center">æŒ‚è½½ä¸»æœºç›®å½•</td>
<td align="center">å…¬å¸çš„ä¸»ä»“åº“</td>
</tr>
<tr>
<td align="center">EXPOSE</td>
<td align="center">æŒ‡å®šå¯¹å¤–ç«¯å£</td>
<td align="center">å…¬å¸å¼€æ”¾å¤§é—¨</td>
</tr>
<tr>
<td align="center">RUN</td>
<td align="center">è¿›ç¨‹è¦ä¸€ç›´è¿è¡Œä¸‹å»</td>
<td align="center">å…¬å¸æ°¸ä¸å€’é—­</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">å‘½ä»¤</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">CMD</td>
<td align="center">æŒ‡å®šè¿™å®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤åªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿ä»£ã€‚</td>
</tr>
<tr>
<td align="center">ENTRYPOINT</td>
<td align="center">æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¿½åŠ å‘½ä»¤ã€‚</td>
</tr>
<tr>
<td align="center">ONBUILD</td>
<td align="center">å½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿DockerFileè¿™å°±ä¼šè¿è¡ŒONBUILDæŒ‡ä»¤ã€‚è§¦å‘æŒ‡ä»¤.</td>
</tr>
<tr>
<td align="center">COPY</td>
<td align="center">ç±»ä¼¼ADDï¼Œå°†æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­ã€‚</td>
</tr>
<tr>
<td align="center">ENV</td>
<td align="center">æ„å»ºçš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡ã€‚</td>
</tr>
</tbody></table>
<blockquote>
<p>å®ä¾‹1-æµ‹è¯•</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@parak home]# mkdir volume</span><br><span class="line">[root@parak home]# cd volume/</span><br><span class="line">[root@parak volume]# vim dockerfile1</span><br><span class="line">[root@parak volume]# cat dockerfile1 </span><br><span class="line">FROM centos</span><br><span class="line">VOLUME ["volume01","volume02"]</span><br><span class="line">CMD echo "---end---"</span><br><span class="line">CMD /bin/bash</span><br><span class="line">[root@parak volume]# docker build -f /home/volume/dockerfile1 -t khighness/centos:1.0 .</span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1/4 : FROM centos</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 0d120b6ccaa8</span></span><br><span class="line">Step 2/4 : VOLUME ["volume01","volume02"]</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> 79dc7b449286</span></span><br><span class="line">Removing intermediate container 79dc7b449286</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 9a6608557c9a</span></span><br><span class="line">Step 3/4 : CMD echo "---end---"</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> 8b8c40056f99</span></span><br><span class="line">Removing intermediate container 8b8c40056f99</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 2158b18dedff</span></span><br><span class="line">Step 4/4 : CMD /bin/bash</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> 9d76c3598d69</span></span><br><span class="line">Removing intermediate container 9d76c3598d69</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 240a84cdfbef</span></span><br><span class="line">Successfully built 240a84cdfbef</span><br><span class="line">Successfully tagged khighness/centos:1.0</span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>å®ä¾‹2-æ„å»ºè‡ªå·±çš„centos</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1ã€ç¼–å†™DockerFileæ–‡ä»¶</span></span><br><span class="line">[root@parak dockerfile]# vim mydockerfile-centos</span><br><span class="line">[root@parak dockerfile]# cat mydockerfile-centos </span><br><span class="line">FROM centos</span><br><span class="line">MAINTAINER khighness&lt;1823676372@qq.com&gt;</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line">WORKDIR $MYPATH </span><br><span class="line"></span><br><span class="line">RUN yum -y install vim</span><br><span class="line">RUN yum -y install net-tools</span><br><span class="line"></span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line">CMD echo $MYPATH</span><br><span class="line">CMD echo "---end---"</span><br><span class="line">CMD /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2ã€é€šè¿‡DockerFileæ„å»ºé•œåƒ</span></span><br><span class="line">[root@parak dockerfile]# docker build -f mydockerfile-centos  -t mycentos:1.0 .</span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1/10 : FROM centos</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 0d120b6ccaa8</span></span><br><span class="line">Step 2/10 : MAINTAINER khighness&lt;1823676372@qq.com&gt;</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> 024da1b1d4cc</span></span><br><span class="line">Removing intermediate container 024da1b1d4cc</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 6c9b636504d2</span></span><br><span class="line">Step 3/10 : ENV MYPATH /usr/local</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> 4046d4e257ac</span></span><br><span class="line">Removing intermediate container 4046d4e257ac</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> a5710fdc760e</span></span><br><span class="line">Step 4/10 : WORKDIR $MYPATH</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> 252416d49e94</span></span><br><span class="line">Removing intermediate container 252416d49e94</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> fdbae7da4ca4</span></span><br><span class="line">Step 5/10 : RUN yum -y install vim</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> 9eb786294022</span></span><br><span class="line">CentOS-8 - AppStream                            288 kB/s | 6.2 MB     00:22    </span><br><span class="line">CentOS-8 - Base                                 703 kB/s | 2.3 MB     00:03    </span><br><span class="line">CentOS-8 - Extras                               1.3 kB/s | 8.1 kB     00:06    </span><br><span class="line">Dependencies resolved.</span><br><span class="line">================================================================================</span><br><span class="line"> Package             Arch        Version                   Repository      Size</span><br><span class="line">================================================================================</span><br><span class="line">Installing:</span><br><span class="line"> vim-enhanced        x86_64      2:8.0.1763-15.el8         AppStream      1.4 M</span><br><span class="line">Installing dependencies:</span><br><span class="line"> gpm-libs            x86_64      1.20.7-15.el8             AppStream       39 k</span><br><span class="line"> vim-common          x86_64      2:8.0.1763-15.el8         AppStream      6.3 M</span><br><span class="line"> vim-filesystem      noarch      2:8.0.1763-15.el8         AppStream       48 k</span><br><span class="line"> which               x86_64      2.21-12.el8               BaseOS          49 k</span><br><span class="line"></span><br><span class="line">Transaction Summary</span><br><span class="line">================================================================================</span><br><span class="line">Install  5 Packages</span><br><span class="line"></span><br><span class="line">Total download size: 7.8 M</span><br><span class="line">Installed size: 30 M</span><br><span class="line">Downloading Packages:</span><br><span class="line">(1/5): gpm-libs-1.20.7-15.el8.x86_64.rpm        340 kB/s |  39 kB     00:00    </span><br><span class="line">(2/5): vim-filesystem-8.0.1763-15.el8.noarch.rp 664 kB/s |  48 kB     00:00    </span><br><span class="line">(3/5): which-2.21-12.el8.x86_64.rpm             315 kB/s |  49 kB     00:00    </span><br><span class="line">(4/5): vim-enhanced-8.0.1763-15.el8.x86_64.rpm  543 kB/s | 1.4 MB     00:02    </span><br><span class="line">(5/5): vim-common-8.0.1763-15.el8.x86_64.rpm    387 kB/s | 6.3 MB     00:16    </span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">Total                                           448 kB/s | 7.8 MB     00:17     </span><br><span class="line">warning: /var/cache/dnf/AppStream-02e86d1c976ab532/packages/gpm-libs-1.20.7-15.el8.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID 8483c65d: NOKEY</span><br><span class="line">CentOS-8 - AppStream                            1.6 MB/s | 1.6 kB     00:00    </span><br><span class="line">Importing GPG key 0x8483C65D:</span><br><span class="line"> Userid     : "CentOS (CentOS Official Signing Key) &lt;security@centos.org&gt;"</span><br><span class="line"> Fingerprint: 99DB 70FA E1D7 CE22 7FB6 4882 05B5 55B3 8483 C65D</span><br><span class="line"> From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial</span><br><span class="line">Key imported successfully</span><br><span class="line">Running transaction check</span><br><span class="line">Transaction check succeeded.</span><br><span class="line">Running transaction test</span><br><span class="line">Transaction test succeeded.</span><br><span class="line">Running transaction</span><br><span class="line">  Preparing        :                                                        1/1 </span><br><span class="line">  Installing       : which-2.21-12.el8.x86_64                               1/5 </span><br><span class="line">  Installing       : vim-filesystem-2:8.0.1763-15.el8.noarch                2/5 </span><br><span class="line">  Installing       : vim-common-2:8.0.1763-15.el8.x86_64                    3/5 </span><br><span class="line">  Installing       : gpm-libs-1.20.7-15.el8.x86_64                          4/5 </span><br><span class="line">  Running scriptlet: gpm-libs-1.20.7-15.el8.x86_64                          4/5 </span><br><span class="line">  Installing       : vim-enhanced-2:8.0.1763-15.el8.x86_64                  5/5 </span><br><span class="line">  Running scriptlet: vim-enhanced-2:8.0.1763-15.el8.x86_64                  5/5 </span><br><span class="line">  Running scriptlet: vim-common-2:8.0.1763-15.el8.x86_64                    5/5 </span><br><span class="line">  Verifying        : gpm-libs-1.20.7-15.el8.x86_64                          1/5 </span><br><span class="line">  Verifying        : vim-common-2:8.0.1763-15.el8.x86_64                    2/5 </span><br><span class="line">  Verifying        : vim-enhanced-2:8.0.1763-15.el8.x86_64                  3/5 </span><br><span class="line">  Verifying        : vim-filesystem-2:8.0.1763-15.el8.noarch                4/5 </span><br><span class="line">  Verifying        : which-2.21-12.el8.x86_64                               5/5 </span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  gpm-libs-1.20.7-15.el8.x86_64         vim-common-2:8.0.1763-15.el8.x86_64    </span><br><span class="line">  vim-enhanced-2:8.0.1763-15.el8.x86_64 vim-filesystem-2:8.0.1763-15.el8.noarch</span><br><span class="line">  which-2.21-12.el8.x86_64             </span><br><span class="line"></span><br><span class="line">Complete!</span><br><span class="line">Removing intermediate container 9eb786294022</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 491907dac3e2</span></span><br><span class="line">Step 6/10 : RUN yum -y install net-tools</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> 3a13d71952e5</span></span><br><span class="line">Last metadata expiration check: 0:00:24 ago on Mon Dec  7 11:45:38 2020.</span><br><span class="line">Dependencies resolved.</span><br><span class="line">================================================================================</span><br><span class="line"> Package         Architecture Version                        Repository    Size</span><br><span class="line">================================================================================</span><br><span class="line">Installing:</span><br><span class="line"> net-tools       x86_64       2.0-0.52.20160912git.el8       BaseOS       322 k</span><br><span class="line"></span><br><span class="line">Transaction Summary</span><br><span class="line">================================================================================</span><br><span class="line">Install  1 Package</span><br><span class="line"></span><br><span class="line">Total download size: 322 k</span><br><span class="line">Installed size: 942 k</span><br><span class="line">Downloading Packages:</span><br><span class="line">net-tools-2.0-0.52.20160912git.el8.x86_64.rpm   1.0 MB/s | 322 kB     00:00    </span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">Total                                           141 kB/s | 322 kB     00:02     </span><br><span class="line">Running transaction check</span><br><span class="line">Transaction check succeeded.</span><br><span class="line">Running transaction test</span><br><span class="line">Transaction test succeeded.</span><br><span class="line">Running transaction</span><br><span class="line">  Preparing        :                                                        1/1 </span><br><span class="line">  Installing       : net-tools-2.0-0.52.20160912git.el8.x86_64              1/1 </span><br><span class="line">  Running scriptlet: net-tools-2.0-0.52.20160912git.el8.x86_64              1/1 </span><br><span class="line">  Verifying        : net-tools-2.0-0.52.20160912git.el8.x86_64              1/1 </span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  net-tools-2.0-0.52.20160912git.el8.x86_64                                     </span><br><span class="line"></span><br><span class="line">Complete!</span><br><span class="line">Removing intermediate container 3a13d71952e5</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 0d095f331d4a</span></span><br><span class="line">Step 7/10 : EXPOSE 80</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> 66d8aceea20c</span></span><br><span class="line">Removing intermediate container 66d8aceea20c</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> a86402c5f9b7</span></span><br><span class="line">Step 8/10 : CMD echo $MYPATH</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> b6af3ea8ff6a</span></span><br><span class="line">Removing intermediate container b6af3ea8ff6a</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 17533352607f</span></span><br><span class="line">Step 9/10 : CMD echo "---end---"</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> f015d24c9277</span></span><br><span class="line">Removing intermediate container f015d24c9277</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> cf7d78851a04</span></span><br><span class="line">Step 10/10 : CMD /bin/bash</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> d0f70eaa39ec</span></span><br><span class="line">Removing intermediate container d0f70eaa39ec</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> d59930f07e43</span></span><br><span class="line">Successfully built d59930f07e43</span><br><span class="line">Successfully tagged mycentos:1.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3ã€æµ‹è¯•è¿è¡Œï¼Œå®˜æ–¹çš„centosé•œåƒä¸­æ˜¯æ²¡æœ‰ç½‘ç»œå‘½ä»¤å’ŒVIMå‘½ä»¤çš„ï¼Œè€Œè‡ªå·±æ„å»ºçš„centosä¸­å·²ç»æœ‰</span></span><br><span class="line">[root@parak dockerfile]# docker run -it --name=mycen mycentos:1.0 </span><br><span class="line">[root@43b0b7eb76d8 local]# pwd</span><br><span class="line">/usr/local</span><br><span class="line">[root@43b0b7eb76d8 local]# vim test</span><br><span class="line">[root@43b0b7eb76d8 local]# cat test </span><br><span class="line">Khighness</span><br><span class="line">[root@43b0b7eb76d8 local]# ifconfig</span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 172.17.0.4  netmask 255.255.0.0  broadcast 172.17.255.255</span><br><span class="line">        ether 02:42:ac:11:00:04  txqueuelen 0  (Ethernet)</span><br><span class="line">        RX packets 8  bytes 656 (656.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        loop  txqueuelen 1000  (Local Loopback)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0    </span><br><span class="line">[root@43b0b7eb76d8 local]# exit</span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4ã€æŸ¥çœ‹é•œåƒçš„å˜æ›´å†å²</span></span><br><span class="line">[root@parak dockerfile]# docker history mycentos:1.0 </span><br><span class="line">IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT</span><br><span class="line">d59930f07e43        23 minutes ago      /bin/sh -c #(nop)  CMD ["/bin/sh" "-c" "/binâ€¦   0B          </span><br><span class="line">cf7d78851a04        23 minutes ago      /bin/sh -c #(nop)  CMD ["/bin/sh" "-c" "echoâ€¦   0B               </span><br><span class="line">17533352607f        23 minutes ago      /bin/sh -c #(nop)  CMD ["/bin/sh" "-c" "echoâ€¦   0B                  </span><br><span class="line">a86402c5f9b7        23 minutes ago      /bin/sh -c #(nop)  EXPOSE 80                    0B                  </span><br><span class="line">0d095f331d4a        23 minutes ago      /bin/sh -c yum -y install net-tools             23.2MB              </span><br><span class="line">491907dac3e2        23 minutes ago      /bin/sh -c yum -y install vim                   57.7MB              </span><br><span class="line">fdbae7da4ca4        24 minutes ago      /bin/sh -c #(nop) WORKDIR /usr/local            0B                  </span><br><span class="line">a5710fdc760e        24 minutes ago      /bin/sh -c #(nop)  ENV MYPATH=/usr/local        0B                  </span><br><span class="line">6c9b636504d2        24 minutes ago      /bin/sh -c #(nop)  MAINTAINER khighness&lt;1823â€¦   0B                  </span><br><span class="line">0d120b6ccaa8        3 months ago        /bin/sh -c #(nop)  CMD ["/bin/bash"]            0B                  </span><br><span class="line">&lt;missing&gt;           3 months ago        /bin/sh -c #(nop)  LABEL org.label-schema.scâ€¦   0B                  </span><br><span class="line">&lt;missing&gt;           3 months ago        /bin/sh -c #(nop) ADD file:538afc0c5c964ce0dâ€¦   215MB         </span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>CMDå’ŒENTRYPOINTçš„åŒºåˆ«</p>
</blockquote>
<p><strong>æµ‹è¯•CMD</strong></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ç¼–å†™æµ‹è¯•CMDçš„dockerfile</span></span><br><span class="line">[root@parak dockerfile]# vim dockerfile-cmd-test1</span><br><span class="line"><span class="meta">#</span><span class="bash"> å†…å®¹å°±æ˜¯ä¸€ä¸ªCMDå‘½ä»¤</span></span><br><span class="line">[root@parak dockerfile]# cat dockerfile-cmd-test1 </span><br><span class="line">FROM centos</span><br><span class="line">CMD ["ls","-a"]</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ„å»ºé•œåƒ</span></span><br><span class="line">[root@parak dockerfile]# docker build -f dockerfile-cmd-test1 -t cmdtest .</span><br><span class="line">Sending build context to Docker daemon  3.072kB</span><br><span class="line">Step 1/2 : FROM centos</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 0d120b6ccaa8</span></span><br><span class="line">Step 2/2 : CMD ["ls","-a"]</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> e4df49ad7ca4</span></span><br><span class="line">Removing intermediate container e4df49ad7ca4</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 4be395747805</span></span><br><span class="line">Successfully built 4be395747805</span><br><span class="line">Successfully tagged cmdtest:latest</span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿è¡Œé•œåƒå°±ç›¸å½“äºè¿è¡ŒCMDå‘½ä»¤ï¼šls -a</span></span><br><span class="line">[root@parak dockerfile]# docker run cmdtest</span><br><span class="line">.</span><br><span class="line">..</span><br><span class="line">.dockerenv</span><br><span class="line">bin</span><br><span class="line">dev</span><br><span class="line">etc</span><br><span class="line">home</span><br><span class="line">lib</span><br><span class="line">lib64</span><br><span class="line">lost+found</span><br><span class="line">media</span><br><span class="line">mnt</span><br><span class="line">opt</span><br><span class="line">proc</span><br><span class="line">root</span><br><span class="line">run</span><br><span class="line">sbin</span><br><span class="line">srv</span><br><span class="line">sys</span><br><span class="line">tmp</span><br><span class="line">usr</span><br><span class="line">var</span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿½åŠ å‘½ä»¤-lï¼Œå³ls -al</span></span><br><span class="line">[root@parak dockerfile]# docker run cmdtest -l</span><br><span class="line">docker: Error response from daemon: OCI runtime create failed: container_linux.go:349: starting container process caused "exec: \"-l\": executable file not found in $PATH": unknown.</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p><strong>æµ‹è¯•ENTRYPOINT</strong></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ç¼–å†™æµ‹è¯•ENTRYPOINTçš„dockerfile</span></span><br><span class="line">[root@parak dockerfile]# vim dockerfile-entrypoint-test1</span><br><span class="line"><span class="meta">#</span><span class="bash"> å†…å®¹å°±æ˜¯ä¸€ä¸ªENTRYPOINTå‘½ä»¤</span></span><br><span class="line">[root@parak dockerfile]# cat dockerfile-entrypoint-test1 </span><br><span class="line">FROM centos</span><br><span class="line">ENTRYPOINT ["ls", "-a"]</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ„å»ºé•œåƒ</span></span><br><span class="line">[root@parak dockerfile]# docker build -f dockerfile-entrypoint-test1 -t entrypointtest .</span><br><span class="line">Sending build context to Docker daemon  4.096kB</span><br><span class="line">Step 1/2 : FROM centos</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 0d120b6ccaa8</span></span><br><span class="line">Step 2/2 : ENTRYPOINT ["ls", "-a"]</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> 0aa9b4c97293</span></span><br><span class="line">Removing intermediate container 0aa9b4c97293</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 472d86e826d8</span></span><br><span class="line">Successfully built 472d86e826d8</span><br><span class="line">Successfully tagged entrypointtest:latest</span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿è¡Œé•œåƒ</span></span><br><span class="line">[root@parak dockerfile]# docker run entrypointtest</span><br><span class="line">.</span><br><span class="line">..</span><br><span class="line">.dockerenv</span><br><span class="line">bin</span><br><span class="line">dev</span><br><span class="line">etc</span><br><span class="line">home</span><br><span class="line">lib</span><br><span class="line">lib64</span><br><span class="line">lost+found</span><br><span class="line">media</span><br><span class="line">mnt</span><br><span class="line">opt</span><br><span class="line">proc</span><br><span class="line">root</span><br><span class="line">run</span><br><span class="line">sbin</span><br><span class="line">srv</span><br><span class="line">sys</span><br><span class="line">tmp</span><br><span class="line">usr</span><br><span class="line">var</span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿½å‡»å‘½ä»¤-lï¼Œå³ls -al</span></span><br><span class="line">[root@parak dockerfile]# docker run entrypointtest -l</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x.   1 root root   6 Dec  7 12:27 .</span><br><span class="line">drwxr-xr-x.   1 root root   6 Dec  7 12:27 ..</span><br><span class="line">-rwxr-xr-x.   1 root root   0 Dec  7 12:27 .dockerenv</span><br><span class="line">lrwxrwxrwx.   1 root root   7 May 11  2019 bin -&gt; usr/bin</span><br><span class="line">drwxr-xr-x.   5 root root 340 Dec  7 12:27 dev</span><br><span class="line">drwxr-xr-x.   1 root root  66 Dec  7 12:27 etc</span><br><span class="line">drwxr-xr-x.   2 root root   6 May 11  2019 home</span><br><span class="line">lrwxrwxrwx.   1 root root   7 May 11  2019 lib -&gt; usr/lib</span><br><span class="line">lrwxrwxrwx.   1 root root   9 May 11  2019 lib64 -&gt; usr/lib64</span><br><span class="line">drwx------.   2 root root   6 Aug  9 21:40 lost+found</span><br><span class="line">drwxr-xr-x.   2 root root   6 May 11  2019 media</span><br><span class="line">drwxr-xr-x.   2 root root   6 May 11  2019 mnt</span><br><span class="line">drwxr-xr-x.   2 root root   6 May 11  2019 opt</span><br><span class="line">dr-xr-xr-x. 259 root root   0 Dec  7 12:27 proc</span><br><span class="line">dr-xr-x---.   2 root root 162 Aug  9 21:40 root</span><br><span class="line">drwxr-xr-x.  11 root root 163 Aug  9 21:40 run</span><br><span class="line">lrwxrwxrwx.   1 root root   8 May 11  2019 sbin -&gt; usr/sbin</span><br><span class="line">drwxr-xr-x.   2 root root   6 May 11  2019 srv</span><br><span class="line">dr-xr-xr-x.  13 root root   0 Dec  6 08:24 sys</span><br><span class="line">drwxrwxrwt.   7 root root 145 Aug  9 21:40 tmp</span><br><span class="line">drwxr-xr-x.  12 root root 144 Aug  9 21:40 usr</span><br><span class="line">drwxr-xr-x.  20 root root 262 Aug  9 21:40 var</span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>å®ä¾‹3-æ„å»ºè‡ªå·±çš„tomcat</p>
</blockquote>
<h2 id="ğŸ”é•œåƒ"><a href="#ğŸ”é•œåƒ" class="headerlink" title="ğŸ”é•œåƒ"></a>ğŸ”é•œåƒ</h2><blockquote>
<p>æ¦‚å¿µ</p>
</blockquote>
<p>é•œåƒæ˜¯ä¸€ç§è½»é‡çº§ã€å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…ï¼Œç”¨æ¥æ‰“åŒ…è½¯ä»¶è¿è¡Œç¯å¢ƒå’ŒåŸºäºè¿è¡Œç¯å¢ƒå¼€å‘çš„è½¯ä»¶ï¼Œå®ƒåŒ…å«è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ä»£ç ã€è¿è¡Œæ—¶ã€åº“ã€ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ã€‚</p>
<blockquote>
<p>UnionFS(è”åˆæ–‡ä»¶ç³»ç»Ÿ)</p>
</blockquote>
<p>UnionFS: è”åˆæ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹(Unite several directions into a single virtual file system)ã€‚Unionæ–‡ä»¶ç³»ç»Ÿæ˜¯Dockeré•œåƒçš„åŸºç¡€ã€‚é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒ(æ²¡æœ‰çˆ¶é•œåƒ)ï¼Œå¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒã€‚</p>
<p>ç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p>
<blockquote>
<p>Dockeré•œåƒåŠ è½½åŸç†</p>
</blockquote>
<p>Dockerçš„é•œåƒå®é™…ä¸Šç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»ŸUnionFSã€‚</p>
<p>bootfs(boot file system)ä¸»è¦åŒ…å«bootloaderå’Œkernelï¼Œbootloaderä¸»è¦æ˜¯å¼•å¯¼åŠ è½½kernelï¼ŒLinuxåˆšå¯åŠ¨æ—¶ä¼šåœ¨å®¶bootfsæ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨Dockeré•œåƒçš„æœ€åº•å±‚æ˜¯bootfsã€‚è¿™ä¸€å±‚ä¸æˆ‘ä»¬å…¸å‹çš„Linux/Unixç³»ç»Ÿæ˜¯ä¸€æ ·çš„ï¼ŒåŒ…å«bootåŠ è½½å™¨å’Œå†…æ ¸ã€‚å½“bootåŠ è½½å®Œæˆä¹‹åæ•´ä¸ªå†…æ ¸å°±éƒ½åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶å†…å­˜å’Œä½¿ç”¨æƒå·²ç”±bootfsè½¬äº¤ç»™å†…æ ¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¹Ÿä¼šå¸è½½bootfsã€‚</p>
<p>rootfs(root file system)ï¼Œåœ¨bootfsä¹‹åã€‚åŒ…å«çš„å°±æ˜¯å…¸å‹Linuxç³»ç»Ÿ/devï¼Œ/procï¼Œ/binï¼Œ/etcç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶ã€‚rootfså°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆï¼Œæ¯”å¦‚Ubuntuã€CentOSç­‰ç­‰ã€‚</p>
<blockquote>
<p>commité•œåƒ</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker commit -m=<span class="string">"&lt;messahe&gt;"</span> -a=<span class="string">"&lt;author&gt;"</span> &lt;Container ID/NAME&gt; &lt;Target&gt;:&lt;Tag&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¾‹å¦‚ï¼Œæ”¹è£…tomcat:9.0çš„é•œåƒæ‰“åŒ…æˆè‡ªå·±çš„é•œåƒk-tom:1.0</span></span><br><span class="line">[root@parak khighness]# docker commit -a="Khighness" -m="Add web application" tom1 k-tom:1.0</span><br><span class="line">sha256:fa4617c8771c81b890dc2a87c7be1d2b851c6ba92b053d0d1d8730b2006550c5</span><br><span class="line">[root@parak khighness]# docker images</span><br><span class="line">REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">k-tom                 1.0                 fa4617c8771c        26 seconds ago      654MB</span><br><span class="line">nginx                 latest              bc9a0695f571        11 days ago         133MB</span><br><span class="line">tomcat                9.0                 e0bd8b34b4ea        2 weeks ago         649MB</span><br><span class="line">redis                 latest              74d107221092        2 weeks ago         104MB</span><br><span class="line">portainer/portainer   latest              62771b0b9b09        4 months ago        79.1MB</span><br><span class="line">elasticsearch         7.6.2               f29a1ee41030        8 months ago        791MB</span><br><span class="line">hello-world           latest              bf756fb1ae65        11 months ago       13.3kB</span><br></pre></td></tr></tbody></table></figure>



<h2 id="ğŸŒ€å®¹å™¨æ•°æ®å·"><a href="#ğŸŒ€å®¹å™¨æ•°æ®å·" class="headerlink" title="ğŸŒ€å®¹å™¨æ•°æ®å·"></a>ğŸŒ€å®¹å™¨æ•°æ®å·</h2><blockquote>
<p>æ¦‚å¿µ</p>
</blockquote>
<p>ç›®å½•æŒ‚è½½ï¼Œå°†å®¹å™¨å†…çš„ç›®å½•æŒ‚è½½åœ¨CentOSä¸Š</p>
<ul>
<li>Dockerå®¹å™¨äº§ç”Ÿçš„æ•°æ®åŒæ­¥åˆ°å®¿ä¸»æœº</li>
<li>æ•°æ®å·å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«æˆ–é‡ç”¨æ•°æ®</li>
</ul>
<blockquote>
<p>å‘½ä»¤è¡ŒæŒ‚è½½</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run -it -v -p &lt;ä¸»æœºç›®å½•&gt;:&lt;å®¹å™¨ç›®å½•&gt; </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¾‹å¦‚ï¼Œå°†dockerçš„centoså®¹å™¨ç›®å½•/home/<span class="built_in">test</span>ä¸å®¿ä¸»centosçš„/home/<span class="built_in">test</span>æŒ‚è½½èµ·æ¥</span></span><br><span class="line">[root@parak khighness]# docker run -it --name=cen -v /home/test:/home/test centos  /bin/bash</span><br><span class="line">Unable to find image 'centos:latest' locally</span><br><span class="line">latest: Pulling from library/centos</span><br><span class="line">3c72a8ed6814: Pull complete </span><br><span class="line">Digest: sha256:76d24f3ba3317fa945743bb3746fbaf3a0b752f10b10376960de01da70685fbd</span><br><span class="line">Status: Downloaded newer image for centos:latest</span><br><span class="line">[root@4410a5c86528 /]# ls</span><br><span class="line">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">[root@4410a5c86528 /]# cd home/</span><br><span class="line">[root@4410a5c86528 home]# ls</span><br><span class="line">test</span><br><span class="line">[khighness@parak ~]$ cd /home/</span><br><span class="line">[khighness@parak home]$ ls</span><br><span class="line">khighness  test</span><br><span class="line">[root@parak home]# docker inspect cen</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚ä¸‹æ˜¯æŒ‚è½½ä¿¡æ¯</span></span><br><span class="line">        "Mounts": [</span><br><span class="line">            {</span><br><span class="line">                "Type": "bind",              # ç±»å‹ï¼šç»‘å®š</span><br><span class="line">                "Source": "/home/test",      # å®¹å™¨ç›®å½•</span><br><span class="line">                "Destination": "/home/test", # ä¸»æœºç›®å½•</span><br><span class="line">                "Mode": "",</span><br><span class="line">                "RW": true,</span><br><span class="line">                "Propagation": "rprivate"</span><br><span class="line">            }</span><br><span class="line">        ]</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨å®¹å™¨çš„æŒ‚è½½ç›®å½•ä¸‹æ–°å»ºK1.javaï¼Œåœ¨å®¿ä¸»æœºçš„æŒ‚è½½ç›®å½•ä¸­å¯ä»¥ç›´æ¥çœ‹åˆ°</p>
<img src="/2020/12/02/Docker/image-20201206183841366.png" class="" title="image-20201206183841366">



<blockquote>
<p>å®‰è£…MySQL</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¸‹è½½8.0.20ç‰ˆæœ¬çš„mysqlé•œåƒ</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker pull mysql:8.0.20</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨mysqlæœåŠ¡</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d åå°è¿è¡Œ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -v æŒ‚è½½é…ç½®å’Œæ•°æ®</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -e MYSQL_ROOT)PASSWORD è®¾ç½®å¯†ç </span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run --name ksql -d -p 3306:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=KAG1823 mysql:8.0.20</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> è§£å†³windowsçš„navicatæ— æ³•è¿æ¥çš„é—®é¢˜</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥mysqlå®¢æˆ·ç«¯</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it ksql  bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç™»å½•mysql</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mysql -u root -pKAG1823</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡ç½®å¯†ç </span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ALTER USER <span class="string">'root'</span>@<span class="string">'%'</span> IDENTIFIED WITH mysql_native_password BY <span class="string">'KAG1823'</span>;</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="ğŸŒDockerç½‘ç»œ"><a href="#ğŸŒDockerç½‘ç»œ" class="headerlink" title="ğŸŒDockerç½‘ç»œ"></a>ğŸŒDockerç½‘ç»œ</h2><blockquote>
<p>å®ç°åŸç†</p>
</blockquote>
<p>Dockerä½¿ç”¨Linuxæ¡¥æ¥ï¼Œåœ¨å®¿ä¸»æœºè™šæ‹Ÿä¸€ä¸ªDockerå®¹å™¨ç½‘æ¡¥(Docker0)ï¼ŒDockerå¯åŠ¨ä¸€ä¸ªå®¹å™¨æ—¶ä¼šæ ¹æ®Dockerç½‘æ¡¥çš„ç½‘æ®µåˆ†é…ç»™å®¹å™¨ä¸€ä¸ªIPåœ°å€ï¼Œç§°ä¸ºContainer-IPï¼ŒåŒæ—¶Dockerç½‘æ¡¥æ˜¯æ¯ä¸ªå®¹å™¨çš„é»˜è®¤ç½‘å…³ã€‚å› ä¸ºåœ¨åŒä¸€å®¿ä¸»æœºå†…çš„å®¹å™¨éƒ½æ¥å…¥åŒä¸€ç½‘æ¡¥ã€‚è¿™æ ·å®¹å™¨ä¹‹é—´å°±èƒ½å¤Ÿé€šè¿‡å®¹å™¨çš„Contain-IPç›´æ¥é€šä¿¡ã€‚</p>
<p>Dockerç½‘æ¡¥æ˜¯å®¿ä¸»æœºè™šæ‹Ÿå‡ºæ¥çš„ï¼Œå¹¶ä¸æ˜¯çœŸå®å­˜åœ¨çš„ç½‘ç»œè®¾å¤‡ï¼Œå¤–éƒ¨è®¾å¤‡æ˜¯æ— æ³•å¯»å€åˆ°çš„ï¼Œè¿™ä¹Ÿæ„å‘³ç€å¤–éƒ¨è®¾å¤‡æ— æ³•é€šè¿‡ç›´æ¥Container-IPè®¿é—®åˆ°å®¹å™¨ã€‚å¦‚æœå®¹å™¨å¸Œæœ›å¤–éƒ¨è®¿é—®åˆ°ï¼Œå¯ä»¥é€šè¿‡æ˜ å°„å®¹å™¨ç«¯å£åˆ°å®¿ä¸»ä¸»æœºï¼ˆç«¯å£æ˜ å°„ï¼‰ï¼Œå³docker runåˆ›å»ºå®¹å™¨æ—¶å€™é€šè¿‡-pæˆ–è€…-På‚æ•°æ¥å¯åŠ¨ï¼Œè®¿é—®å®¹å™¨çš„æ—¶å€™å°±é€šè¿‡[å®¿ä¸»æœºIP]:[å®¹å™¨ç«¯å£]è®¿é—®å®¹å™¨ã€‚</p>
<blockquote>
<p>ç½‘ç»œæ¨¡å¼</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">æ¨¡å¼</th>
<th align="center">é…ç½®</th>
<th align="center">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Bridgeæ¨¡å¼</td>
<td align="center">-net=bridge</td>
<td align="center">é»˜è®¤æ¨¡å¼</td>
</tr>
<tr>
<td align="center">Hostæ¨¡å¼</td>
<td align="center">-net=host</td>
<td align="center">å®¹å™¨å’Œå®¿ä¸»æœºå…±äº«Network NameSpace</td>
</tr>
<tr>
<td align="center">Containeræ¨¡å¼</td>
<td align="center">-net=container : NAME OR ID</td>
<td align="center">å®¹å™¨å’Œå¦å¤–ä¸€ä¸ªå®¹å™¨å…±äº«Network NameSpace</td>
</tr>
<tr>
<td align="center">Noneæ¨¡å¼</td>
<td align="center">-net=none</td>
<td align="center">å®¹å™¨æœ‰ç‹¬ç«‹çš„Network NameSpaceï¼Œä½†å¹¶æ²¡æœ‰å¯¹å…¶è¿›è¡Œä»»ä½•ç½‘ç»œè®¾ç½®ï¼Œå¦‚åˆ†é…veth pair å’Œç½‘æ¡¥è¿æ¥ï¼Œé…ç½®IPç­‰</td>
</tr>
</tbody></table>
<h3 id="1ï¸âƒ£hostæ¨¡å¼"><a href="#1ï¸âƒ£hostæ¨¡å¼" class="headerlink" title="1ï¸âƒ£hostæ¨¡å¼"></a>1ï¸âƒ£hostæ¨¡å¼</h3><p>å¦‚æœå¯åŠ¨å®¹å™¨çš„æ—¶å€™ä½¿ç”¨hostæ¨¡å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¹å™¨å°†ä¸ä¼šè·å¾—ä¸€ä¸ªç‹¬ç«‹çš„Network NameSpaceï¼Œè€Œæ˜¯å’Œå®¿ä¸»æœºå…±ç”¨ä¸€ä¸ªNetwork NameSpaceã€‚å®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„IPç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„IPå’Œç«¯å£ã€‚ä½†æ˜¯ï¼Œå®¹å™¨çš„å…¶ä»–æ–¹é¢ï¼Œå¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯å’Œå®¿ä¸»æœºéš”ç¦»çš„ã€‚</p>
<p>ä½¿ç”¨hostæ¨¡å¼çš„å®¹å™¨å¯ä»¥ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„IPåœ°å€ä¸å¤–ç•Œé€šä¿¡ï¼Œå®¹å™¨å†…éƒ¨çš„æœåŠ¡ç«¯å£ä¹Ÿå¯ä»¥ä½¿ç”¨å®¿ä¸»æœºçš„ç«¯å£ï¼Œä¸éœ€è¦è¿›è¡ŒNATï¼Œhostæœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯ç½‘ç»œæ€§èƒ½æ¯”è¾ƒå¥½ï¼Œä½†æ˜¯docker hostä¸Šå·²ç»ä½¿ç”¨çš„ç«¯å£å°±ä¸èƒ½å†ç”¨äº†ï¼Œç½‘ç»œçš„éš”ç¦»æ€§ä¸å¥½ã€‚</p>
<h3 id="2ï¸âƒ£containeræ¨¡å¼"><a href="#2ï¸âƒ£containeræ¨¡å¼" class="headerlink" title="2ï¸âƒ£containeræ¨¡å¼"></a>2ï¸âƒ£containeræ¨¡å¼</h3><p>è¿™ä¸ªæ¨¡å¼æŒ‡å®šæ–°åˆ›å»ºçš„å®¹å™¨å’Œå·²ç»å­˜åœ¨çš„ä¸€ä¸ªå®¹å™¨å…±äº«ä¸€ä¸ª Network NameSpaceï¼Œè€Œä¸æ˜¯å’Œå®¿ä¸»æœºå…±äº«ã€‚æ–°åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„ IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº« IPã€ç«¯å£èŒƒå›´ç­‰ã€‚åŒæ ·ï¼Œä¸¤ä¸ªå®¹å™¨é™¤äº†ç½‘ç»œæ–¹é¢ï¼Œå…¶ä»–çš„å¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯éš”ç¦»çš„ã€‚ä¸¤ä¸ªå®¹å™¨çš„è¿›ç¨‹å¯ä»¥é€šè¿‡ lo ç½‘å¡è®¾å¤‡é€šä¿¡ã€‚</p>
<h3 id="3ï¸âƒ£noneæ¨¡å¼"><a href="#3ï¸âƒ£noneæ¨¡å¼" class="headerlink" title="3ï¸âƒ£noneæ¨¡å¼"></a>3ï¸âƒ£noneæ¨¡å¼</h3><p>ä½¿ç”¨noneæ¨¡å¼ï¼ŒDockerå®¹å™¨æ‹¥æœ‰è‡ªå·±çš„Network NameSpaceï¼Œä½†æ˜¯ï¼Œå¹¶ä¸ä¸ºDockerå®¹å™¨è¿›è¡Œä»»ä½•ç½‘ç»œé…ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªDockerå®¹å™¨æ²¡æœ‰ç½‘å¡ã€IPã€è·¯ç”±ç­‰ä¿¡æ¯ã€‚éœ€è¦æˆ‘ä»¬è‡ªå·±ä¸ºDockerå®¹å™¨æ·»åŠ ç½‘å¡ã€é…ç½®IPç­‰ã€‚</p>
<p>è¿™ç§ç½‘ç»œæ¨¡å¼ä¸‹å®¹å™¨åªæœ‰loå›ç¯ç½‘ç»œï¼Œæ²¡æœ‰å…¶ä»–ç½‘å¡ã€‚noneæ¨¡å¼å¯ä»¥åœ¨å®¹å™¨åˆ›å»ºæ—¶é€šè¿‡â€“network=noneæ¥æŒ‡å®šã€‚è¿™ç§ç±»å‹çš„ç½‘ç»œæ²¡æœ‰åŠæ³•è”ç½‘ï¼Œå°é—­çš„ç½‘ç»œèƒ½å¾ˆå¥½çš„ä¿è¯å®¹å™¨çš„å®‰å…¨æ€§ã€‚</p>
<h3 id="4ï¸âƒ£bridgeæ¨¡å¼"><a href="#4ï¸âƒ£bridgeæ¨¡å¼" class="headerlink" title="4ï¸âƒ£bridgeæ¨¡å¼"></a>4ï¸âƒ£bridgeæ¨¡å¼</h3><p>å½“Dockerè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œä¼šåœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªåä¸ºdocker0çš„è™šæ‹Ÿç½‘æ¡¥ï¼Œæ­¤ä¸»æœºä¸Šå¯åŠ¨çš„Dockerå®¹å™¨ä¼šè¿æ¥åˆ°è¿™ä¸ªè™šæ‹Ÿç½‘æ¡¥ä¸Šã€‚è™šæ‹Ÿç½‘æ¡¥çš„å·¥ä½œæ–¹å¼å’Œç‰©ç†äº¤æ¢æœºç±»ä¼¼ï¼Œè¿™æ ·ä¸»æœºä¸Šçš„æ‰€æœ‰å®¹å™¨å°±é€šè¿‡äº¤æ¢æœºè¿åœ¨äº†ä¸€ä¸ªäºŒå±‚ç½‘ç»œä¸­ã€‚</p>
<p>ä»docker0å­ç½‘ä¸­åˆ†é…ä¸€ä¸ªIPç»™å®¹å™¨ä½¿ç”¨ï¼Œå¹¶è®¾ç½®docker0çš„IPåœ°å€ä¸ºå®¹å™¨çš„é»˜è®¤ç½‘å…³ã€‚åœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€å¯¹è™šæ‹Ÿç½‘å¡veth pairè®¾å¤‡ï¼ŒDockerå°†veth pairè®¾å¤‡çš„ä¸€ç«¯æ”¾åœ¨æ–°åˆ›å»ºçš„å®¹å™¨ä¸­ï¼Œå¹¶å‘½åä¸ºeth0ï¼ˆå®¹å™¨çš„ç½‘å¡ï¼‰ï¼Œå¦ä¸€ç«¯æ”¾åœ¨ä¸»æœºä¸­ï¼Œä»¥vethxxxè¿™æ ·ç±»ä¼¼çš„åå­—å‘½åï¼Œå¹¶å°†è¿™ä¸ªç½‘ç»œè®¾å¤‡åŠ å…¥åˆ°docker0ç½‘æ¡¥ä¸­ã€‚å¯ä»¥é€šè¿‡brctl showå‘½ä»¤æŸ¥çœ‹ã€‚</p>
<p>bridgeæ¨¡å¼æ˜¯dockerçš„é»˜è®¤ç½‘ç»œæ¨¡å¼ï¼Œä¸å†™â€“netå‚æ•°ï¼Œå°±æ˜¯bridgeæ¨¡å¼ã€‚ä½¿ç”¨docker run -pæ—¶ï¼Œdockerå®é™…æ˜¯åœ¨iptablesåšäº†DNATè§„åˆ™ï¼Œå®ç°ç«¯å£è½¬å‘åŠŸèƒ½ã€‚å¯ä»¥ä½¿ç”¨iptables -t nat -vnLæŸ¥çœ‹ã€‚</p>
<blockquote>
<p>â€“linkæ¢ç©¶</p>
</blockquote>
<p>å®˜æ–¹å·²ç»ä¸æ¨èä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£ä¸€ä¸‹ã€‚</p>
<p>2ä¸ªå®¹å™¨ä¹‹é—´äº’ç›¸è®¿é—®é€šä¿¡ï¼š<code>docker run &lt;container1-id/name&gt; --link &lt;container2-id/name&gt; &lt;image&gt;</code></p>
<p>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯åŠ¨å®¹å™¨2çš„æ—¶å€™ï¼Œå®¹å™¨ä¾¿å¯ä»¥pingé€šå®¹å™¨1ï¼Œä½†æ˜¯åå‘pingä¸é€šã€‚</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºå®¹å™¨tom1</span></span><br><span class="line">[root@parak khighness]# docker run -d -p 3356:8080 --name tom1 tomcat:9.0 </span><br><span class="line">dd615d6d2ccb9467aad8ba008ece995588680d849b9f61945b10de5c3475f671</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä½¿ç”¨--linkåˆ›å»ºå®¹å™¨2</span></span><br><span class="line">[root@parak khighness]# docker run -d -p 3357:8081 --name tom2 --link tom1  tomcat:9.0 </span><br><span class="line">b2c17969a2cb4407bb1a61a53703a38998a11db01ce516feb70e397b42af6ad3</span><br><span class="line"><span class="meta">#</span><span class="bash"> tom1ä¸èƒ½pingé€štom2</span></span><br><span class="line">[root@parak khighness]# docker exec -it tom1 ping tom2</span><br><span class="line">ping: tom2: Name or service not known</span><br><span class="line"><span class="meta">#</span><span class="bash"> tom2å¯ä»¥pingé€štom1</span></span><br><span class="line">[root@parak khighness]# docker exec -it tom2 ping tom1</span><br><span class="line">PING tom1 (172.17.0.4) 56(84) bytes of data.</span><br><span class="line">64 bytes from tom1 (172.17.0.4): icmp_seq=1 ttl=64 time=0.161 ms</span><br><span class="line">64 bytes from tom1 (172.17.0.4): icmp_seq=2 ttl=64 time=0.108 ms</span><br><span class="line">64 bytes from tom1 (172.17.0.4): icmp_seq=3 ttl=64 time=0.122 ms</span><br><span class="line">^C</span><br><span class="line">--- tom1 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 4ms</span><br><span class="line">rtt min/avg/max/mdev = 0.108/0.130/0.161/0.024 ms</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹tom2å†…éƒ¨çš„hostsæ–‡ä»¶</span></span><br><span class="line">[root@parak khighness]# docker exec -it tom2 cat /etc/hosts</span><br><span class="line">127.0.0.1	localhost</span><br><span class="line">::1	localhost ip6-localhost ip6-loopback</span><br><span class="line">fe00::0	ip6-localnet</span><br><span class="line">ff00::0	ip6-mcastprefix</span><br><span class="line">ff02::1	ip6-allnodes</span><br><span class="line">ff02::2	ip6-allrouters</span><br><span class="line">172.17.0.4	tom1 dd615d6d2ccb # ==&gt; æ ¹æºï¼šæœ¬è´¨å°±æ˜¯tom2å°±æ˜¯åœ¨æœ¬åœ°é…ç½®äº†tom1çš„åŸŸåIPè§£æã€‚</span><br><span class="line">172.17.0.5	b2c17969a2cb</span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>è‡ªå®šä¹‰ç½‘ç»œ</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºç½‘ç»œ</span></span><br><span class="line">[root@parak khighness]# docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet</span><br><span class="line">abaebdc493149a140ee77965274885adea3882bf117c4f8e61e4034730c3b890</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹ç½‘ç»œ</span></span><br><span class="line">[root@parak khighness]# docker network ls</span><br><span class="line">NETWORK ID          NAME                DRIVER              SCOPE</span><br><span class="line">4399361ba4a9        bridge              bridge              local</span><br><span class="line">65f0ec2bfb42        host                host                local</span><br><span class="line">abaebdc49314        mynet               bridge              local</span><br><span class="line">feab1dfce431        none                null                local</span><br><span class="line"><span class="meta">#</span><span class="bash"> è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">[root@parak khighness]# docker network inspect mynet </span><br><span class="line">[</span><br><span class="line">    {</span><br><span class="line">        "Name": "mynet",</span><br><span class="line">        "Id": "abaebdc493149a140ee77965274885adea3882bf117c4f8e61e4034730c3b890",</span><br><span class="line">        "Created": "2020-12-10T16:12:08.563828418+08:00",</span><br><span class="line">        "Scope": "local",</span><br><span class="line">        "Driver": "bridge",</span><br><span class="line">        "EnableIPv6": false,</span><br><span class="line">        "IPAM": {</span><br><span class="line">            "Driver": "default",</span><br><span class="line">            "Options": {},</span><br><span class="line">            "Config": [</span><br><span class="line">                {</span><br><span class="line">                    "Subnet": "192.168.0.0/16",</span><br><span class="line">                    "Gateway": "192.168.0.1"</span><br><span class="line">                }</span><br><span class="line">            ]</span><br><span class="line">        },</span><br><span class="line">        "Internal": false,</span><br><span class="line">        "Attachable": false,</span><br><span class="line">        "Ingress": false,</span><br><span class="line">        "ConfigFrom": {</span><br><span class="line">            "Network": ""</span><br><span class="line">        },</span><br><span class="line">        "ConfigOnly": false,</span><br><span class="line">        "Containers": {},</span><br><span class="line">        "Options": {},</span><br><span class="line">        "Labels": {}</span><br><span class="line">    }</span><br><span class="line">]</span><br><span class="line"><span class="meta">#</span><span class="bash"> åœ¨mynetä¸‹å¯åŠ¨tomcat1</span></span><br><span class="line">[root@parak khighness]# docker run -d -it -p 8080:3355 --net mynet --name mynet-tom1 tomcat:9.0 </span><br><span class="line">4d799757f01f560af7fd44d610b7fdabd1e0f66ef528bf1259f09242bddbb636</span><br><span class="line"><span class="meta">#</span><span class="bash"> åœ¨mynetä¸‹å¯åŠ¨tomcat2</span></span><br><span class="line">[root@parak khighness]# docker run -d -it -p 8081:3356 --net mynet --name mynet-tom2 tomcat:9.0 </span><br><span class="line">15c045f96d5b7b2ee2e470cb69e5b1f86511929f7ed05ed8f20db26ef4b975af</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä½¿ç”¨mynet-tom2 ping mynet-tom1</span></span><br><span class="line">[root@parak khighness]# docker exec -it mynet-tom2 ping mynet-tom1</span><br><span class="line">PING mynet-tom1 (192.168.0.2) 56(84) bytes of data.</span><br><span class="line">64 bytes from mynet-tom1.mynet (192.168.0.2): icmp_seq=1 ttl=64 time=0.068 ms</span><br><span class="line">64 bytes from mynet-tom1.mynet (192.168.0.2): icmp_seq=2 ttl=64 time=0.042 ms</span><br><span class="line">64 bytes from mynet-tom1.mynet (192.168.0.2): icmp_seq=3 ttl=64 time=0.055 ms</span><br><span class="line">--- mynet-tom1 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 4ms</span><br><span class="line">rtt min/avg/max/mdev = 0.042/0.055/0.068/0.010 ms</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä½¿ç”¨mynet-tom1 ping mynet-tom2</span></span><br><span class="line">[root@parak khighness]# docker exec -it mynet-tom1 ping mynet-tom2</span><br><span class="line">PING mynet-tom2 (192.168.0.3) 56(84) bytes of data.</span><br><span class="line">64 bytes from mynet-tom2.mynet (192.168.0.3): icmp_seq=1 ttl=64 time=0.036 ms</span><br><span class="line">64 bytes from mynet-tom2.mynet (192.168.0.3): icmp_seq=2 ttl=64 time=0.048 ms</span><br><span class="line">64 bytes from mynet-tom2.mynet (192.168.0.3): icmp_seq=3 ttl=64 time=0.058 ms</span><br><span class="line">--- mynet-tom2 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2ms</span><br><span class="line">rtt min/avg/max/mdev = 0.036/0.047/0.058/0.010 ms</span><br></pre></td></tr></tbody></table></figure>

<p>è‡ªå®šä¹‰ç½‘ç»œè‡ªåŠ¨ç»´æŠ¤å¥½å®¹å™¨çš„ç½‘ç»œå…³ç³»ï¼</p>
<blockquote>
<p>ç½‘ç»œè¿é€š</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åœ¨Docker0ç½‘ç»œå¯åŠ¨tomcat</span></span><br><span class="line">[root@parak khighness]# docker run -d -it -p 8082:3357 --name tom1 tomcat:9.0 </span><br><span class="line">0344f04baab2eaeaac0118dac7a93d8b2d77946636c76ed3bde804cbeda836be</span><br><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•tom1 ping mynetâ€”tom1</span></span><br><span class="line">[root@parak khighness]# docker exec tom1 ping mynet-tom1</span><br><span class="line">ping: mynet-tom1: Name or service not known</span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿é€šmynet - tom1</span></span><br><span class="line">[root@parak khighness]# docker network connect mynet tom1 </span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹mynet1çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">[root@parak khighness]# docker inspect mynet</span><br><span class="line">[</span><br><span class="line">    {</span><br><span class="line">        "Name": "mynet",</span><br><span class="line">        "Id": "abaebdc493149a140ee77965274885adea3882bf117c4f8e61e4034730c3b890",</span><br><span class="line">        "Created": "2020-12-10T16:12:08.563828418+08:00",</span><br><span class="line">        "Scope": "local",</span><br><span class="line">        "Driver": "bridge",</span><br><span class="line">        "EnableIPv6": false,</span><br><span class="line">        "IPAM": {</span><br><span class="line">            "Driver": "default",</span><br><span class="line">            "Options": {},</span><br><span class="line">            "Config": [</span><br><span class="line">                {</span><br><span class="line">                    "Subnet": "192.168.0.0/16",</span><br><span class="line">                    "Gateway": "192.168.0.1"</span><br><span class="line">                }</span><br><span class="line">            ]</span><br><span class="line">        },</span><br><span class="line">        "Internal": false,</span><br><span class="line">        "Attachable": false,</span><br><span class="line">        "Ingress": false,</span><br><span class="line">        "ConfigFrom": {</span><br><span class="line">            "Network": ""</span><br><span class="line">        },</span><br><span class="line">        "ConfigOnly": false,</span><br><span class="line">        "Containers": {</span><br><span class="line">        	# å‘ç°mynetå°†tom1æ”¾åˆ°äº†mynetç½‘ç»œä¸‹ï¼Œå³ä¸€ä¸ªå®¹å™¨ï¼Œä¸¤ä¸ªIP</span><br><span class="line">            "0344f04baab2eaeaac0118dac7a93d8b2d77946636c76ed3bde804cbeda836be": {</span><br><span class="line">                "Name": "tom1",</span><br><span class="line">                "EndpointID": "8911ad05a9b0d7d0effbf50c82659f36b82d21e18f992359b09494073dddd969",</span><br><span class="line">                "MacAddress": "02:42:c0:a8:00:04",</span><br><span class="line">                "IPv4Address": "192.168.0.4/16",</span><br><span class="line">                "IPv6Address": ""</span><br><span class="line">            },</span><br><span class="line">            "15c045f96d5b7b2ee2e470cb69e5b1f86511929f7ed05ed8f20db26ef4b975af": {</span><br><span class="line">                "Name": "mynet-tom2",</span><br><span class="line">                "EndpointID": "907f16284e90be0d880a999b29210d1cd82adb2c79b4179eeb1d70d75130362a",</span><br><span class="line">                "MacAddress": "02:42:c0:a8:00:03",</span><br><span class="line">                "IPv4Address": "192.168.0.3/16",</span><br><span class="line">                "IPv6Address": ""</span><br><span class="line">            },</span><br><span class="line">            "4d799757f01f560af7fd44d610b7fdabd1e0f66ef528bf1259f09242bddbb636": {</span><br><span class="line">                "Name": "mynet-tom1",</span><br><span class="line">                "EndpointID": "6529ef4fc05dffe65fe875fdf15f2f4a61665c4d969767db94dd828baf88b323",</span><br><span class="line">                "MacAddress": "02:42:c0:a8:00:02",</span><br><span class="line">                "IPv4Address": "192.168.0.2/16",</span><br><span class="line">                "IPv6Address": ""</span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line">        "Options": {},</span><br><span class="line">        "Labels": {}</span><br><span class="line">    }</span><br><span class="line">]</span><br><span class="line"><span class="meta">#</span><span class="bash"> å†æ¬¡æµ‹è¯•tom1 ping mynetâ€”tom1</span></span><br><span class="line">[root@parak khighness]# docker exec -it tom1 ping mynet-tom1</span><br><span class="line">PING mynet-tom1 (192.168.0.2) 56(84) bytes of data.</span><br><span class="line">64 bytes from mynet-tom1.mynet (192.168.0.2): icmp_seq=1 ttl=64 time=0.097 ms</span><br><span class="line">64 bytes from mynet-tom1.mynet (192.168.0.2): icmp_seq=2 ttl=64 time=0.052 ms</span><br><span class="line">64 bytes from mynet-tom1.mynet (192.168.0.2): icmp_seq=3 ttl=64 time=0.053 ms</span><br><span class="line">--- mynet-tom1 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 3ms</span><br><span class="line">rtt min/avg/max/mdev = 0.052/0.067/0.097/0.022 ms</span><br></pre></td></tr></tbody></table></figure>



<h2 id="ğŸ’ Redisé›†ç¾¤éƒ¨ç½²"><a href="#ğŸ’ Redisé›†ç¾¤éƒ¨ç½²" class="headerlink" title="ğŸ’ Redisé›†ç¾¤éƒ¨ç½²"></a>ğŸ’ Redisé›†ç¾¤éƒ¨ç½²</h2><blockquote>
<p>shellè„šæœ¬</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºç½‘å¡</span></span><br><span class="line">docker network create redis --subnet 172.38.0.0/16</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> é€šè¿‡è„šæœ¬åˆ›å»ºå…­ä¸ªredisé…ç½®</span></span><br><span class="line">for port in $(seq 1 6); \</span><br><span class="line">do \</span><br><span class="line">mkdir -p /mydata/redis/node-${port}/conf</span><br><span class="line">touch /mydata/redis/node-${port}/conf/redis.conf</span><br><span class="line">cat &lt;&lt; EOF &gt;&gt;/mydata/redis/node-${port}/conf/redis.conf</span><br><span class="line">port 6379</span><br><span class="line">bind 0.0.0.0</span><br><span class="line">cluster-enabled yes</span><br><span class="line">cluster-config-file nodes.conf</span><br><span class="line">cluster-node-timeout 5000</span><br><span class="line">cluster-announce-ip 172.38.0.1${port}</span><br><span class="line">cluster-announce-port 6379</span><br><span class="line">cluster-announce-bus-port 16379</span><br><span class="line">appendonly yes</span><br><span class="line">EOF</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿è¡Œredis</span></span><br><span class="line">for port in $(seq 1 6); \</span><br><span class="line">do</span><br><span class="line">docker run -p 637${port}:6379 -p 1637${port}:16379 --name redis-${port} \</span><br><span class="line">-v /mydata/redis/node-${port}/data:/data \</span><br><span class="line">-v /mydata/redis/node-${port}/conf/redis.conf:/etc/redis/redis.conf \</span><br><span class="line">-d --net redis --ip 172.38.0.1${port} redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥redis-1</span></span><br><span class="line">docker exec -it redis-1 /bin/sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ­å»ºé›†ç¾¤</span></span><br><span class="line">redis-cli --cluster create 172.38.0.11:6379 172.38.0.12:6379 172.38.0.13:6379 172.38.0.14:6379 172.38.0.15:6379 172.38.0.16:6379 </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> åœæ­¢é›†ç¾¤</span></span><br><span class="line">for port in $(seq 1 6); \</span><br><span class="line">do</span><br><span class="line">docker stop redis-${port} </span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨é›†ç¾¤</span></span><br><span class="line">for port in $(seq 1 6); \</span><br><span class="line">do </span><br><span class="line">docker start redis-${port} </span><br><span class="line">done</span><br></pre></td></tr></tbody></table></figure>



<h2 id="ğŸ’¨SpringBootæµ‹è¯•"><a href="#ğŸ’¨SpringBootæµ‹è¯•" class="headerlink" title="ğŸ’¨SpringBootæµ‹è¯•"></a>ğŸ’¨SpringBootæµ‹è¯•</h2><blockquote>
<p>æ­¥éª¤</p>
</blockquote>
<ul>
<li>æ„å»ºSpringBooté¡¹ç›®</li>
<li>æ‰“åŒ…webåº”ç”¨</li>
<li>ç¼–å†™dockerfile</li>
<li>æ„å»ºé•œåƒ</li>
<li>å‘å¸ƒè¿è¡Œ</li>
</ul>
<blockquote>
<p>ç¼–å†™Controller</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>{</span><br><span class="line">    <span class="meta">@GetMapping("/hello/{name}")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(<span class="meta">@PathVariable("name")</span> String name)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello, "</span> + name + <span class="string">"\n\n"</span> + <span class="string">" -from KHighness"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é€šè¿‡mavençš„packageæ‰“åŒ…</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO] </span><br><span class="line">[INFO] --------------------------&lt; top.parak:hello &gt;---------------------------</span><br><span class="line">[INFO] Building hello 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">[INFO] --- maven-resources-plugin:3.1.0:resources (default-resources) @ hello ---</span><br><span class="line">[INFO] Using 'UTF-8' encoding to copy filtered resources.</span><br><span class="line">[INFO] Copying 0 resource</span><br><span class="line">[INFO] Copying 0 resource</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ hello ---</span><br><span class="line">[INFO] Changes detected - recompiling the module!</span><br><span class="line">[INFO] Compiling 2 source files to C:\Users\18236\Desktop\Recent\hello\target\classes</span><br><span class="line">[INFO] --- maven-resources-plugin:3.1.0:testResources (default-testResources) @ hello ---</span><br><span class="line">[INFO] Using 'UTF-8' encoding to copy filtered resources.</span><br><span class="line">[INFO] skip non existing resourceDirectory C:\Users\18236\Desktop\Recent\hello\src\test\resources</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ hello ---</span><br><span class="line">[INFO] No sources to compile</span><br><span class="line">[INFO] --- maven-surefire-plugin:2.22.2:test (default-test) @ hello ---</span><br><span class="line">[INFO] No tests to run.</span><br><span class="line">[INFO] --- maven-jar-plugin:3.1.2:jar (default-jar) @ hello ---</span><br><span class="line">[INFO] Building jar: C:\Users\18236\Desktop\Recent\hello\target\hello-1.0-SNAPSHOT.jar</span><br><span class="line">[INFO] --- spring-boot-maven-plugin:2.2.5.RELEASE:repackage (repackage) @ hello ---</span><br><span class="line">[INFO] Replacing main artifact with repackaged archive</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  5.534 s</span><br><span class="line">[INFO] Finished at: 2020-12-10T17:54:11+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ç¼–å†™Dockerfile</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">FROM java:8</span><br><span class="line"></span><br><span class="line">COPY *.jar /app.jar</span><br><span class="line"></span><br><span class="line">CMD ["--server.port=8080"]</span><br><span class="line"></span><br><span class="line">EXPOSE 8080</span><br><span class="line"></span><br><span class="line">ENTRYPOINT ["java", "-jar", "/app.jar"]</span><br></pre></td></tr></tbody></table></figure>

<p>é€šè¿‡Xftpå°†æ„å»ºå¥½çš„jaråŒ…å’ŒDockerFileå‘é€åˆ°è™šæ‹Ÿæœº</p>
<blockquote>
<p>æ„å»ºé•œåƒ</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@parak hello]# docker build -t hello .</span><br><span class="line">Sending build context to Docker daemon   17.6MB</span><br><span class="line">Step 1/5 : FROM java:8</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> d23bdf5b1b1b</span></span><br><span class="line">Step 2/5 : COPY *.jar /app.jar</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 34774df7a107</span></span><br><span class="line">Step 3/5 : CMD ["--server.port=8080"]</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> [Warning] IPv4 forwarding is disabled. Networking will not work.</span></span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> 11d95474e047</span></span><br><span class="line">Removing intermediate container 11d95474e047</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> e8b6fa21a3a0</span></span><br><span class="line">Step 4/5 : EXPOSE 8080</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> [Warning] IPv4 forwarding is disabled. Networking will not work.</span></span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> 896cc7d50875</span></span><br><span class="line">Removing intermediate container 896cc7d50875</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> b139242b232d</span></span><br><span class="line">Step 5/5 : ENTRYPOINT ["java", "-jar", "/app.jar"]</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> [Warning] IPv4 forwarding is disabled. Networking will not work.</span></span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Running <span class="keyword">in</span> 562f3bb605a0</span></span><br><span class="line">Removing intermediate container 562f3bb605a0</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 1d28463205d5</span></span><br><span class="line">Successfully built 1d28463205d5</span><br><span class="line">Successfully tagged hello:latest</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>è¿è¡Œé•œåƒ</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@parak hello]# docker run -d -it -p 8001:8080 hello</span><br><span class="line">7e19b364789de18c736c51e5c84d611e7474d3a733f188220dfd7cc011e55729</span><br><span class="line">[root@parak hello]# curl http://192.168.117.155:8001/hello/KKK</span><br><span class="line">Hello, KKK</span><br><span class="line"></span><br><span class="line"> -from KHighness</span><br></pre></td></tr></tbody></table></figure>



<h2 id="â­•ç›¸å…³é—®é¢˜"><a href="#â­•ç›¸å…³é—®é¢˜" class="headerlink" title="â­•ç›¸å…³é—®é¢˜"></a>â­•ç›¸å…³é—®é¢˜</h2><blockquote>
<p>è§£å†³é—®é¢˜1: WARNING: IPv4 forwarding is disabled. Networking will not work.</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"net.ipv4.ip_forward=1"</span> &gt;&gt;/usr/lib/sysctl.d/00-system.conf</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl restart network &amp;&amp; systemctl restart docker</span></span><br></pre></td></tr></tbody></table></figure>



<blockquote>
<p>è§£å†³é—®é¢˜2: ä½¿ç”¨é˜¿é‡Œäº‘æœåŠ¡å™¨è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œå¤–éƒ¨IPä¸èƒ½è®¿é—®</p>
</blockquote>
<p>éœ€è¦åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨é…ç½®é˜²ç«å¢™ç›¸å…³ç«¯å£å¯¹å¤–å¼€æ”¾ã€‚</p>
<p>æ¯”å¦‚è·‘ä¸€ä¸ªå¼€æ”¾ç«¯å£ä¸º3333çš„springbootåº”ç”¨éœ€è¦åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨æ§åˆ¶å°çš„é˜²ç«å¢™æ·»åŠ è§„åˆ™:</p>
<img src="/2020/12/02/Docker/image-20201211233834182.png" class="" title="image-20201211233834182">



 
      
      
      <div id="reword-out">
        <div id="reward-btn">
          æ‰“èµ
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>
          
          æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œè‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        åˆ†äº«
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&amp;data=http://example.com/2020/12/02/Docker/" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2021/03/26/MySQL/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
        <div class="article-nav-title">
          
            MySQL
          
        </div>
      </a>
    
    
      <a href="/2020/11/23/%E8%B4%9F%E8%B7%9D%E7%A6%BB/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
        <div class="article-nav-title">è´Ÿè·ç¦»</div>
      </a>
    
  </nav>

   
<!-- valineè¯„è®º -->
<div id="vcomments-box">
    <div id="vcomments">
    </div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<!-- <script src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script> -->
<!-- <script src="//unpkg.com/valine/dist/Valine.min.js"></script> -->
<script src="/js/Valine.min.js"></script>
<!-- è¯„è®ºèƒŒæ™¯ -->
<style>
    #veditor{min-height: 10rem;
        background-image: url('/images/comment-bg.jpg');
        background-size: contain;
        background-repeat: no-repeat;
        background-position: right;
        background-color: rgba(255,255,255,0);
        resize: none;}
</style>
<!-- Valineé…ç½® -->
<script>
    new Valine({
        el: '#vcomments',
        enableQQ: true,
        app_id: 'Py2eOHzSdrnxKPzKrOJaHJOq-9Nh9j0Va',
        app_key: '9eQhwuCgyshpYKn4rtEhqt4R',
        path: window.location.pathname,
        //notify: 'false',
        //verify: 'false',
        avatar: 'wavatar',
        placeholder: 'come on baby~',
        recordIP: true,

        // è®¾ç½®Bilibiliè¡¨æƒ…åŒ…åœ°å€
        emojiCDN: 'https://cdn.jsdelivr.net/gh/XXXZhy/Blog_Image/valine_emoticon/',
        // è¡¨æƒ…titleå’Œå›¾ç‰‡æ˜ å°„
        emojiMaps: {
            "å¢™è§’æ»‘ç¨½": "å®³æ€•æ»‘ç¨½.gif",
            "ä»™å¥³ä¸‹å‡¡": "ä»™å¥³ä¸‹å‡¡.webp",
            "å¬æ­Œ": "å¬æ­Œ.webp",
            "å«Œå¼ƒ": "å«Œå¼ƒ.webp",
            "å®³ç¾": "å®³ç¾.webp",
            "å½©è™¹æ»‘ç¨½": "å½©è™¹æ»‘ç¨½.webp",
            "å¿«èµ°": "å¿«èµ°.webp",
            "æ‰¯è„¸": "æ‰¯è„¸.webp",
            "æ‘¸è„¸": "æ‘¸è„¸.webp",
            "æµæ±—": "æµæ±—.webp",
            "æ»‘æ»‘æ¿": "æ»‘æ»‘æ¿.webp",
            "ç‚¹èµ": "ç‚¹èµ.webp",
            "è½¬åœˆåœˆ": "è½¬åœˆåœˆ.webp",
            // ... æ›´å¤šè¡¨æƒ…
        }
    });
    const infoEle = document.querySelector('#vcomments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
        infoEle.childNodes.forEach(function (item) {
            item.parentNode.removeChild(item);
        });
    }
</script>

<style>
    #vcomments-box {
        padding: 5px 30px;
    }

    @media screen and (max-width: 800px) {
        #vcomments-box {
            padding: 5px 0px;
        }
    }

    #vcomments-box #vcomments {
        background-color: #fff;
    }

    .v .vlist .vcard .vh {
        padding-right: 20px;
    }

    .v .vlist .vcard {
        padding-left: 10px;
    }
</style>

 
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights Â©
        2020-2021
        <i class="ri-heart-fill heart_icon"></i> Khighness
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>è®¿é—®äººæ•°:<span id="busuanzi_value_site_uv"></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>æµè§ˆæ¬¡æ•°:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </span></li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
        <script type="text/javascript" src="https://s4.cnzz.com/z_stat.php?id=1279324689&amp;web_id=1279324689"></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/Khighness.jpg" alt="Khighness"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">å…³äº</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">å‹é“¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="http://www.parak.top/contact/">è”ç³»</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search" title="æœç´¢">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>æ¥æ¯æŠ¹èŒ¶ï¼Ÿ</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wepay.jpg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->


<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: 'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto'
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  var ayerConfig = {
    mathjax: true
  }
</script>

<!-- Katex -->


    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
        <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"></script>
        
    


<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- ClickBoom1 -->

<script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script>

<script src="/js/clickBoom1.js"></script>


<!-- ClickBoom2 -->

<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
  <!-- ä¸‰è§’å½©å¸¦èƒŒæ™¯ -->
  <canvas id="evanyou-canvas" style="opacity: 0.3; position: fixed; top: 0px; left: 0px; z-index: -1; width: 100%; height: 100%; pointer-events: none;"></canvas>
  <script src="/js/evanyou-canvas.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/ni-j.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script>


<script type="text/javascript" charset="utf-8" src="/js/lazyload-plugin/lazyload.intersectionObserver.min.js"></script></body></html><!-- reward -->